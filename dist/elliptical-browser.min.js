!function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],t):(e.elliptical.Class=t(e.elliptical.utils),e.returnExports=e.elliptical.Class)}(this,function(e){var t=e._,n=!1,i=e.makeArray,o=t.isFunction,r=t.isArray,s=e.extend,a=e.concatArgs,l=/xyz/.test(function(){})?/\b_super\b/:/.*/,c=function(e,t,n){n=n||e;for(var i in e)n[i]=o(e[i])&&o(t[i])&&l.test(e[i])?function(e,n){return function(){var i,o=this._super;return this._super=t[e],i=n.apply(this,arguments),this._super=o,i}}(i,e[i]):e[i]},u=function(){arguments.length&&u.extend.apply(u,arguments)};return s(u,{proxy:function(e){var t,n=i(arguments);e=n.shift(),r(e)||(e=[e]),t=this;for(var s=0;s<e.length;s++)if("string"==typeof e[s]&&!o(this[e[s]]))throw"class.js "+(this.fullName||this.Class.fullName)+" does not have a "+e[s]+"method!";return function(){for(var i,o,s=a(n,arguments),l=e.length,c=0;l>c;c++)o=e[c],o&&(i="string"==typeof o,i&&t._set_called&&(t.called=o),s=(i?t[o]:o).apply(t,s||[]),l-1>c&&(s=!r(s)||s._use_call?[s]:s));return s}},newInstance:function(){var e,t=this.rawInstance();return t.setup&&(e=t.setup.apply(t,arguments)),t.init&&t.init.apply(t,r(e)?e:arguments),t},setup:function(e){return this.defaults=s(!0,{},e.defaults,this.defaults),arguments},rawInstance:function(){n=!0;var e=new this;return n=!1,e},extend:function(t,i){function o(){return n?void 0:this.constructor!==o&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}i||(i=t,t=null),i=i||{};var r,a=this,l=this.prototype;n=!0,r=new this,n=!1,c(i,l,r);for(name in this)this.hasOwnProperty(name)&&-1==["prototype","defaults"].indexOf(name)&&(o[name]=this[name]);c(t,this,o),s(o,{prototype:r,constructor:o}),o.prototype.Class=o.prototype.constructor=o;var u=o.setup.apply(o,e.concatArgs([a],arguments));return o.init&&o.init.apply(o,u||[]),o}}),u.callback=u.prototype.callback=u.prototype.proxy=u.proxy,u}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],t):(e.elliptical.Controller=t(e.elliptical.utils),e.returnExports=e.elliptical.Controller)}(this,function(e){var t=function(t){return this.app=t,function(){var n=[].slice.call(arguments),i=n[0];if("string"!=typeof i)throw"Controller requires a route as the first parameter";var o=n.pop();if("object"!=typeof o)throw"Controller requires the last function parameter to be an object";["Get","Post","Put","Delete"].forEach(function(i){if(o[i]&&"function"==typeof o[i]){var r=e.cloneArray(n);r.push(o[i]),t[i.toLowerCase()].apply(t,r)}else for(var s in o[i]){var a=e.cloneArray(n);if("Index"===s)a[0]=a[0].replace(/@action/g,"");else{var l=s.replace(/_/,"-");a[0]=a[0].replace(/@action/g,l)}a.push(o[i][s]),t[i.toLowerCase()].apply(t,a)}})}};return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],t):(e.elliptical.factory=t(e.elliptical.utils),e.returnExports=e.elliptical.factory)}(this,function(e){var t=e._,n={partial:function(){var e=[].slice.call(arguments);return t.partial.apply(this,e)},partialRight:function(){var e=[].slice.call(arguments);return t.partialRight.apply(this,e)},curry:function(){var e=[].slice.call(arguments);return t.curry.apply(this,e)},defer:function(){var e=[].slice.call(arguments);return t.defer.apply(this,e)},delay:function(){var e=[].slice.call(arguments);return t.delay.apply(this,e)},after:function(){var e=[].slice.call(arguments);return t.after.apply(this,e)},bind:function(){var e=[].slice.call(arguments);return t.bind.apply(this,e)},bindKey:function(){var e=[].slice.call(arguments);return t.bindKey.apply(this,e)},bindAll:function(){var e=[].slice.call(arguments);return t.bindAll.apply(this,e)},debounce:function(){var e=[].slice.call(arguments);return t.debounce.apply(this,e)},throttle:function(){var e=[].slice.call(arguments);return t.throttle.apply(this,e)},wrap:function(){var e=[].slice.call(arguments);return t.wrap.apply(this,e)},memoize:function(){var e=[].slice.call(arguments);return t.memoize.apply(this,e)}};return n}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../class/class")):"function"==typeof define&&define.amd?define(["../class/class"],t):(e.elliptical.Model=t(e.elliptical.Class),e.returnExports=e.elliptical.Model)}(this,function(e){var t=e.extend({id:"id",_data:null,"@class":null,$provider:{},$paginationProvider:null,get:function(e,t,n){this.__isImplemented("get"),"function"==typeof t&&(n=t,t={});var i,o=this,r=this.$provider,s=this.$paginationProvider,a=this["@class"];r.get(e,a,t,function(e,r){e||(t.paginate&&s?(i=s.get(t,r),o._data=i.data):(i=r,o._data=r)),n&&n(e,i)})},query:function(e,t,n){this.__isImplemented("query");var i,o=this,r=this.$provider,s=this.$paginationProvider;r.query(e,t,function(e,r){e||(t.paginate&&s?(i=s.get(t,r),o._data=i.data):(i=r,o._data=r)),n&&n(e,i)})},post:function(e,t){this.__isImplemented("post");var n=this.$provider,i=this["@class"];n.post(e,i,t)},put:function(e,t){var n=this.$provider,i=this["@class"];n.put(e,i,t)},patch:function(e,t){this.__isImplemented("patch");var n=this.$provider,i=this["@class"];n.patch(e,i,t)},"delete":function(e,t){this.__isImplemented("delete");var n=this.$provider,i=this["@class"];n.delete(e,i,t)},command:function(e,t){this.__isImplemented("command");var n=this.$provider;n.command(e,t)},$setProviders:function(e,t){this.$provider=e,this.$paginationProvider=t},__isImplemented:function(e){if(!this.$provider[e])throw new Error(e+" not implemented")}},{_data:null,init:function(e){this._data=e,this.$query={}},get:function(e,t){var n=this._data,i=this.$query;"function"==typeof e?t=e:n=e,this.constructor.get(n,i,t)},save:function(e,t){var n=this._data,i=arguments.length;0===i?e=n:1===i&&"function"==typeof e&&(t=e,e=n);var o=this.constructor.id;void 0===e||void 0===e[o]?this.constructor.post(e,t):this.constructor.put(e,t)},put:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.put(n,t)},patch:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.query(n,t)},query:function(e,t){var n=this._data,i=this.$query;"function"==typeof e?t=e:n=e,this.constructor.query(n,i,t)},filter:function(e){return this.$query.filter=e,this},orderBy:function(e){return this.$query.orderBy=e,this},top:function(e){return this.$query.top=e,this},skip:function(e){return this.$query.skip=e,this},paginate:function(e){try{e.page=parseInt(e.page)}catch(t){e.page=1}return this.$query.paginate=e,this},"delete":function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.delete(n,t)},command:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.command(n,t)}});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.noop=t(),e.returnExports=e.elliptical.noop)}(this,function(){return{noop:function(){},throwErr:function(e){if(e)throw e},doop:function(e,t,n){return"function"==typeof e?e.apply(n,t):void 0}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],t):(e.elliptical.debounce=t(e.elliptical.utils),e.returnExports=e.elliptical.debounce)}(this,function(e){var t=e._;return function(e,n,i){"undefined"==typeof n&&(n=1e3),"undefined"==typeof i&&(i={}),t.debounce(e,n,i)}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("./debounce"),require("./throttle")):"function"==typeof define&&define.amd?define(["./debounce","./throttle"],t):(e.elliptical.Interval=t(e.elliptical.debounce,e.elliptical.throttle),e.returnExports=e.elliptical.Interval)}(this,function(e,t){function n(e){e()}return function(i){this.delay=i.delay,this.timeOutId=null,this.thread="throttle"===i.thread?t:"debounce"===i.thread?e:n,this.run=function(e){var t=this;this.timeOutId=setInterval(function(){t.thread(e,{delay:10})},t.delay)},this.terminate=function(){clearInterval(this.timeOutId)}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],t):(e.elliptical.throttle=t(e.elliptical.utils),e.returnExports=e.elliptical.throttle)}(this,function(e){var t=e._;return function(e,n,i){"undefined"==typeof n&&(n=1e3),"undefined"==typeof i&&(i={}),t.throttle(e,n,i)}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.proto=t(),e.returnExports=e.elliptical.proto)}(this,function(){var e={create:function(){var e=Object.create(this),t="string"==typeof e.__init?e.__init:"init";return"function"==typeof e[t]&&e[t].apply(e,arguments),e},mixin:function(e,t){var n,i=t||this,o=/\b_super\b/,r=Object.getPrototypeOf(i)||i.prototype;for(var s in e)n=i[s],i[s]="function"==typeof e[s]&&"function"==typeof r[s]&&o.test(e[s])||"function"==typeof n&&"function"==typeof e[s]?function(e,t,n){return function(){var i=this._super;this._super="function"==typeof e?e:r[t];var o=n.apply(this,arguments);return this._super=i,o}}(n,s,e[s]):e[s];return i},extend:function(e,t){return this.mixin(e,Object.create(t||this))},proxy:function(e){var t=this[e],n=Array.prototype.slice.call(arguments,1);return n.unshift(this),t.bind.apply(t,n)}};return e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../class/class")):"function"==typeof define&&define.amd?define(["../class/class"],t):(e.elliptical.Provider=t(e.elliptical.Class),e.returnExports=e.elliptical.Provider)}(this,function(e){var t=e.extend({"@class":null},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../class/class")):"function"==typeof define&&define.amd?define(["../class/class"],t):(e.elliptical.Provider=t(e.elliptical.Class),e.returnExports=e.elliptical.$Provider)}(this,function(e){var t=function(t){return e.extend({"@class":t},{})};return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../model/model")):"function"==typeof define&&define.amd?define(["../model/model"],t):(e.elliptical.Service=t(e.elliptical.Model),e.returnExports=e.elliptical.Service)}(this,function(e){var t=e.extend({_data:null,"@class":null,$provider:null},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("../class/class")):"function"==typeof define&&define.amd?define(["elliptical-utils","../class/class"],t):(e.elliptical.View=t(e.elliptical.utils,e.elliptical),e.returnExports=e.elliptical.View)}(this,function(e,t){var n=(e.isBrowser,e._),i=n.isFunction,o=t.extend({_data:{},transition:null,$provider:null,selector:'[data-container="base"]',selectorSet:!1,clientContextRootNamespace:"$$",pushContextToClient:!0,render:function(e,t,n,o){i(n)&&(o=n,n=null),this.selector=this.$getSelector(),this.$provider.render(e,t,function(e,t){o&&o(e,t)})},$setProvider:function(e){this.$provider=e},$setSelector:function(e){this.selectorSet=!0,this.selector=e},$getSelector:function(){if("undefined"!=typeof window){if(this.selectorSet)return this.selector;var e=$("html").hasClass("customelements")?'ui-container[name="base"]':'[data-container="base"]';return this.selector=e,e}}},{init:function(e,t){"undefined"==typeof e?(e=this.constructor.$provider,t=this.constructor.$getSelector()):"string"==typeof e?(t=e,e=this.constructor.$provider):"string"!=typeof t&&(t=this.constructor.$getSelector()),this.constructor._data.$provider=new e(!0),this.constructor._data.selector=t},render:function(e,t,n,o){i(n)&&(o=n,n=this.constructor.transition);this.constructor._data.selector;this.constructor._data.$provider.render(e,t,function(e,t){o&&o(e,t)})}});return o}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.crypto=elliptical.crypto||{},e.elliptical.crypto.base64=t(),e.returnExports=e.elliptical.crypto.base64)}(this,function(){var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,i,o,r,s,a,l="",c=0;for(e=Base64._utf8_encode(e);c<e.length;)t=e.charCodeAt(c++),n=e.charCodeAt(c++),i=e.charCodeAt(c++),o=t>>2,r=(3&t)<<4|n>>4,s=(15&n)<<2|i>>6,a=63&i,isNaN(n)?s=a=64:isNaN(i)&&(a=64),l=l+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(a);return l},decode:function(e){var t,n,i,o,r,s,a,l="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)o=this._keyStr.indexOf(e.charAt(c++)),r=this._keyStr.indexOf(e.charAt(c++)),s=this._keyStr.indexOf(e.charAt(c++)),a=this._keyStr.indexOf(e.charAt(c++)),t=o<<2|r>>4,n=(15&r)<<4|s>>2,i=(3&s)<<6|a,l+=String.fromCharCode(t),64!=s&&(l+=String.fromCharCode(n)),64!=a&&(l+=String.fromCharCode(i));return l=Base64._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t="",n=0,i=c1=c2=0;n<e.length;)i=e.charCodeAt(n),128>i?(t+=String.fromCharCode(i),n++):i>191&&224>i?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return t}};return e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("./base64")):"function"==typeof define&&define.amd?define(["./base64"],t):(e.elliptical=e.elliptical||{},e.elliptical.crypto=t(e.elliptical.crypto.base64),e.returnExports=e.elliptical.crypto)}(this,function(e){var t=e.base64,n={};return n.base64=t,n.base64Encrypt=function(e,n){return"Basic "+t.encode(e+":"+n)},n}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t($):"function"==typeof define&&define.amd?define(["jquery"],t):(e.elliptical.http=e.elliptical.http|{},e.elliptical.http.browser=t(e.$),e.returnExports=e.elliptical.http.browser)}(this,function(e){var t={send:function(t,n){var i={type:t.method||"GET",dataType:t.dataType||"json",url:t.protocol+"://"+t.host+":"+(t.port||80)+t.path};t.data&&(t.data=JSON.stringify(t.data),i.data=t.data,i.contentType="application/json"),t.authorization&&(i.beforeSend=function(e){e.setRequestHeader("Authorization",t.authorization)});e.ajax(i).done(function(e){try{"string"==typeof e&&(e=JSON.parse(e)),n(null,e)}catch(t){var i={statusCode:500,message:t};n(i,null)}}).fail(function(e,t,i){var o={};o.statusCode=e.status,o.message=i,n(o,null)})}};return t}),module.exports={send:function(e,t){var n=require("http"===e.protocol?"http":"https"),i={host:e.host,port:e.port||80,path:e.path,headers:e.headers||{},method:e.method||"GET"};e.data&&(e.data=JSON.stringify(e.data),i.headers["Content-Type"]="application/json",i.headers["Content-Length"]=e.data.length),e.authorization&&(i.headers.Authorization=e.authorization);var o=n.request(i);e.data&&o.write(e.data),o.on("response",function(e){e.body="",e.setEncoding("utf-8"),e.on("data",function(t){e.body+=t}),e.on("end",function(){try{var n,i=e.body.length,o={};i>0?(n=JSON.parse(e.body),e.statusCode>=200&&e.statusCode<=206?t(null,n):(o.statusCode=e.statusCode,o.message=n,t(o,null))):e.statusCode>=200&&e.statusCode<=206?(n={},n.statusCode=e.statusCode,t(null,n)):(o.statusCode=e.statusCode,t(o,null))}catch(r){o={statusCode:500,message:r},t(o,null)}}),o.on("error",function(e){var n={};n.statusCode=500,n.message=e.message,t(n,null)})}),o.end()}},function(e,t){if("undefined"!=typeof module&&module.exports){var n=require("./node");"undefined"!=typeof window&&(n=require("./browser")),module.exports=t(n,require("elliptical-crypto"))}else if("function"==typeof define&&define.amd)define(["./browser","elliptical-crypto"],t);else{var i=e.elliptical.http.browser,o=e.elliptical.http.base64,r=t(i,o);r.browser=i,r.base64=o,e.elliptical.http=r,e.returnExports=e.elliptical.http}}(this,function(e,t){var n={send:function(t,n){e.send(t,function(e,t){n&&n(e,t)})},base64Encrypt:t.base64Encrypt,encodeSessionToken:function(e){var t="Session "+e;return t},encodeOAuthToken:function(e){var t="OAuth "+e;return t}};return n.crypto=t,n}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("elliptical-mvc"),require("elliptical-event"),require("elliptical-url")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-mvc","elliptical-event","elliptical-url"],t):(e.elliptical.Router=t(e.elliptical.utils,e.elliptical,e.elliptical.Event,e.elliptical.url),e.returnExports=e.elliptical.Router)}(this,function(e,t,n,i){var o=t.Class,r=e._,s=o.extend({events:{request:"elliptical.onDocumentRequest",click:"touchclick",orientation:"onOrientationChange"},backButtonSelector:'[data-role="back"]',on:function(){var e=this;$(window).on(this.events.request,function(t,n){e.forward(n)}),$(document).on(this.events.click,this.backButtonSelector,function(){u.history()}),$(window).on(this.events.orientation,function(t,n){n.method="get",e.forward(t,n)})},off:function(){var e=this;$(window).off(this.events.request,function(t,n){e.forward(n)}),$(document).off(this.events.click,this.backButtonSelector,function(){u.history()}),$(window).off(this.events.orientation,function(t,n){n.method="get",e.forward(t,n)})},reset:function(){this.off(),this.on()},forward:function(e){var t=e.route,n={},i=e.method;u.location(t,i,n)}},{}),a=o.extend({stateObject:null,poppedDelay:700,pushHistory:!1,push:function(){if(this.pushHistory){var e=this.stateObject,t="";e.route=c.hashify(e.route),window.history.pushState(e,t,e.route)}},pop:function(e){var t=this,n=$.support.touch||!1;if(e.originalEvent.state){var i=e.originalEvent.state.route,o=e.originalEvent.state.params,r=e.originalEvent.state.method;this.pushHistory=!1,n?setTimeout(function(){l.location(i,r,o)},t.poppedDelay):l.location(i,r,o)}},start:function(){var e=this,t=c.path(),n=c.search,i="get",o={route:t,params:n,method:i};this.stateObject=o,this.pushHistory=!0,l.location(o.route,"get",n),$(window).on("popstate",function(t){e.pop(t)})},end:function(){var e=this;this.stateObject=null,this.pushHistory=!1,$(window).off("popstate",function(t){e.pop(t)})}},{}),l=o.extend({dispatchEvent:"elliptical.onRouteDispatch",add:function(e,t,n){if(this.verify(t,e)){var i={route:t,method:e,handle:n};if(u.routes.push(i),u.debug){var o="route: "+t+" has been added. Method: "+e;u.enabled?console.log(o):u.messageQueue.push(o)}}},remove:function(e,t){var n=-1;u.routes.forEach(function(i,o){var r=i.route,s=i.method;e===r&&t===s&&(n=o)}),n>-1&&(u.routes.splice(n,1),u.debug&&console.log("route: "+e+" has been removed"))},verify:function(e,t){var n=!0;return u.routes.every(function(i){var o=i.route,r=i.method;e===o&&t===r&&(n=!1)}),n},decodeUrl:function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))},deserialize:function(e){for(var t=e.split("&"),n=[],i=0;i<t.length;i++){var o=this.decodeUrl(t[i]).split("="),r=o[0],s=o[1],a={name:r,value:s};n.push(a)}return n},location:function(e,t,i){if(e=c.deHashify(e),a.push(),!this.dispatch(e,t,i)){var o=[];o.push(this.error);var r={route:e,handlers:o};n.emit(this.dispatchEvent,r)}},dispatch:function(e,t){var o=this,r=this.dispatchEvent,s=!1,a=u.routes;return e=e.toLowerCase(),a.forEach(function(a){var l={},u={},d=a.route;d=d.toLowerCase();var p=c.toPath(e),f=i.match(d),h=f.parse(p);if(null!=h&&a.method.toLowerCase()===t.toLowerCase()&&!s){"get"!=t.toLowerCase()&&(l=i.body(h)),u=i.query(e);var m=[],v=o.next(h,l,u,p);m.push(v);for(var _=a.handle,g=0;g<_.length;g++)m.push(_[g]);var y={route:p,handlers:m};n.emit(r,y),s=!0}}),s},next:function(e,t,n,i){return function(o,r,s){r.statusCode=200,o.params=e,o.query=n,o.route=i,o.body=t,s()}},error:function(e,t,n){t.statusCode=404;n()}},{}),c=o.extend({"@class":"Location",hashify:function(t){var n=u.virtualRoot,i="/"!==n;if(u.hashTag&&i){0!==t.indexOf(n)&&(t=n+t);var o=n.length;"#"!==t.charAt(o+1)&&(t=e.stringInsertAt(t,o,"/#"))}else u.hashTag?"#"!==t.charAt(1)&&(t="/#"+t):i&&0!==t.indexOf(n)&&(t=n+t);return t},deHashify:function(e){var t=u.virtualRoot;return"/"!==t&&0===e.indexOf(t)&&(e=e.replace(t,"")),u.hashTag&&"#"===e.charAt(1)&&(e=e.substring(2)),e},hashRoot:function(e){return u.hashTag&&"#"===e.slice(-1)?e+="/":e},path:function(){var e,t=window.elliptical.$hashTag,n=window.elliptical.$virtualRoot;return t?(e=location.hash,"#"===e.charAt(0)&&(e=e.substring(1)),""===e&&(e="/"),e=this.toPath(e)):(e=location.pathname,"/"!==n&&0===e.indexOf(n)&&(e=e.replace(n,""))),e},toPath:function(e){var t=e.split("?");return t[0]},redirect:function(e){location.href=e},reload:function(){location.reload()},url:i,href:location.href,host:location.host,hostname:location.hostname,origin:location.origin,protocol:location.protocol,port:location.port,search:location.search},{}),u=o.extend({"@class":"Router",validMethods:["get","post","put","delete"],enabled:!1,debug:!0,callbacks:[],routes:[],virtualRoot:"/",hashTag:!1,messageQueue:[],get:function(e,t){this.parseMethod("get",e,t)},post:function(e,t){this.parseMethod("post",e,t)},put:function(e,t){this.parseMethod("put",e,t)},"delete":function(e,t){this.parseMethod("delete",e,t)},parseMethod:function(e,t){if(!r.contains(this.validMethods,e))return!1;var n=[];"string"!=typeof t&&(t="/");for(var i=Array.prototype.slice.call(arguments,0),o=0;o<i.length;o++)"function"==typeof i[o]&&n.push(i[o]);i.length<1?console.log('error adding route: "'+t+'".  A route must have at least one handler function.'):l.add(e,t,n)},remove:function(e,t){return this.enabled?void l.remove(e,t):!1},removeAll:function(){var e=this;return this.enabled?void this.routes.forEach(function(t){e.remove(t.route,t.method)}):!1},location:function(e,t,n,o){if(!this.enabled)return!1;"undefined"==typeof n&&(n={}),e=i.sanitize(e),e=c.hashRoot(e);var r={route:e,params:n,method:t};a.stateObject=r,a.pushHistory=!0,"undefined"!=typeof o?setTimeout(function(){l.location(e,t,n)},o):l.location(e,t,n)},start:function(){if(this.enabled)return!1;if(this.enabled=!0,a.start(),s.on(),this.debug){var e="Router has started in debug mode";console.log(e),this.messageQueue.forEach(function(e){console.log(e)}),this.messageQueue.length=0}},pause:function(){this.enabled=!1,s.off()},resume:function(){this.enabled=!1,s.on()},history:function(e,t){"undefined"!=typeof t?setTimeout(function(){"undefined"==typeof e?window.history.back():window.history.go(e)},t):"undefined"==typeof e?window.history.back():window.history.go(e)},end:function(){this.enabled=!1,this.routes=[],a.end(),s.off()},$provider:function(e,t){"string"==typeof e?l.dispatchEvent=t:"undefined"!=typeof e&&(n=e,"string"==typeof t&&(l.dispatchEvent=t))},configure:function(e){e.request&&(s.events.request=e.request),e.orientation&&(s.events.orientation=e.orientation),e.click&&(s.events.click=e.click),e.backButtonSelector&&(s.backButtonSelector=e.backButtonSelector),e.dispatchEvent&&(l.dispatchEvent=e.dispatchEvent),s.reset()}},{});return u.Location=c,u}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.middleware=e.elliptical.middleware||{},e.elliptical.middleware.authorization=t(),e.returnExports=e.elliptical.middleware.authorization)}(this,function(){return function(e){return function(t,n,i){try{for(var o=t.app,r=o.locations,s=null,a=!0,l=o.utils,c=t._parsedUrl.pathname,u=0;u<r.length;u++)if("**"===l.strLastNChars(r[u].path,2)){var d=l.trimLastNChars(r[u].path,2);if(0===c.toLowerCase().indexOf(d.toLowerCase())){s=r[u];break}}else if(c.toLowerCase()===r[u].path.toLowerCase()){s=r[u];break}if(s){for(var p=s.exclude,u=0;u<p.length;u++)if("**"===l.strLastNChars(p[u],2)){var f=l.trimLastNChars(p[u],2);if(0===c.toLowerCase().indexOf(f.toLowerCase())){a=!1;break}}else if(c.toLowerCase()===p[u].toLowerCase()){a=!1;break}a?(t.location=c,e?e(t,n,i):i()):i()}else i()}catch(h){i(h)}}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.middleware=e.elliptical.middleware||{},e.elliptical.middleware.globalCallback=t(),e.returnExports=e.elliptical.middleware.globalCallback)}(this,function(){return function(e){return function(t,n,i){try{t.context||(t.context={}),e?e(t,n,i):i()}catch(o){i(o)}}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.middleware=e.elliptical.middleware||{},e.elliptical.middleware.http404=t(),e.returnExports=e.elliptical.middleware.http404)}(this,function(){return function(e,t){return function(n,i,o){function r(t,n,i){i.context.statusCode=t.statusCode,i.context.message=t.message,i.context.description=t.description,i.context.url=n.url,i.render(e,i.context)}("undefined"==typeof e||"function"==typeof e)&&("function"==typeof e&&(t=e),e="http-status");var s,a=n.app,l=a.settings.STRINGS;s=l&&l._404?l._404:{statusCode:404,message:"Page Not Found",description:"The resource you are looking for could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly."},t?t(s,n,i,o,function(e,t,n){r(e,t,n)}):r(s,n,i)}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.middleware=e.elliptical.middleware||{},e.elliptical.middleware.httpError=t(),e.returnExports=e.elliptical.middleware.httpError)}(this,function(){return function(e,t){function n(t,n,i){i.context.statusCode=t.statusCode,i.context.description=t.description,i.context.message=t.message,i.context.url=n.url,i.render(e,i.context)}return function(i,o,r,s){("undefined"==typeof e||"function"==typeof e)&&("function"==typeof e&&(t=e),e="http-status");var a={};i.stack?(a.statusCode=500,a.description=i.stack,a.message="Internal Server Error"):(a.statusCode=i.statusCode,a.description=i.description,a.message=i.message),t?t(a,o,r,s,function(e,t,i){n(e,t,i)}):n(a,o,r)}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.middleware=e.elliptical.middleware||{},e.elliptical.middleware.logonIdenity=t(),e.returnExports=e.elliptical.middleware.logonIdentity)}(this,function(){return function(e,t,n){return function(i,o,r){try{var s;if(i.cookies[e]&&i.cookies[t]&&!i.session.membership){s=i.cookies[t],s=JSON.parse(s);var a=s.authToken;n.call(this,i.cookies[e],a,i,o,r)}else i.cookies[t]&&(s=i.cookies[t],s=JSON.parse(s),o.context.adminIdentity=s);r()}catch(l){r(l)}}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.middleware=e.elliptical.middleware||{},e.elliptical.middleware.service=t(),e.returnExports=e.elliptical.middleware.service)}(this,function(){return function(){var e=[].slice.call(arguments);return function(t,n,i){t.services=[],t.service=function(e){var n=null,i=null;return t.services&&t.services.length>0&&t.services.forEach(function(t){t.name===e?n=t.service:"Model"===t.name&&(i=t.service.extend({},{}),i["@class"]=e)}),n?n:i};try{for(var o=0;o<e.length;o++){var r=e[o]["@class"];r||(r=e[o].constructor&&e[o].constructor["@class"]?e[o].constructor["@class"]:"Model"),e[o].req=t,e[o].res=n,e[o].$provider&&(e[o].$provider.req=t,e[o].$provider.res=n),t.services.push({name:r,service:e[o]})}i()}catch(s){i(s)}}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],t):(e.elliptical.middleware=e.elliptical.middleware||{},e.elliptical.middleware.sessionSync=t(e.elliptical),e.returnExports=e.elliptical.middleware.sessionSync)}(this,function(e){var t=e._;return function(){return function(e,n,i){try{if("undefined"!=typeof window){var o=sessionStorage.getItem("sessionStore");o&&(o=JSON.parse(o),t.defaults(e.session,o))}var r=e.service("Session");r.get(function(n,o){if(o)try{t.defaults(e.session,o)}catch(r){}i()})}catch(s){i(s)}}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?"undefined"!=typeof window&&e($):e($)}(function(e){function t(e){return e}function n(e){return decodeURIComponent(e.replace(o," "))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return r.json?JSON.parse(e):e}catch(t){}}var o=/\+/g,r=e.cookie=function(o,s,a){if(void 0!==s){if(a=e.extend({},r.defaults,a),"number"==typeof a.expires){var l=a.expires,c=a.expires=new Date;c.setDate(c.getDate()+l)}return s=r.json?JSON.stringify(s):String(s),document.cookie=[r.raw?o:encodeURIComponent(o),"=",r.raw?s:encodeURIComponent(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var u=r.raw?t:n,d=document.cookie.split("; "),p=o?void 0:{},f=0,h=d.length;h>f;f++){var m=d[f].split("="),v=u(m.shift()),_=u(m.join("="));if(o&&o===v){p=i(_);break}o||(p[v]=i(_))}return p};return r.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)?(e.cookie(t,"",e.extend({},n,{expires:-1})),!0):!1},e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc"),require("./cookie")):"function"==typeof define&&define.amd?define(["elliptical-mvc","./cookie"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers.$cookie=t(e.elliptical),e.returnExports=e.elliptical.providers.$cookie)}(this,function(e){var t=e.Provider.extend({get:function(e){return"undefined"==typeof e?$.cookie():$.cookie(e)},post:function(e){var t=e.key,n=e.value,i=e.options;return $.cookie(t,n,i)},put:function(e){var t=e.key,n=e.value,i=e.options;return $.cookie(t,n,i)},"delete":function(e){return $.removeCookie(e)}},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers.$identity=t(e.elliptical),e.returnExports=e.elliptical.providers.$identity)}(this,function(e){var t=e.Provider.extend({tokenKey:"authToken",identityTokenKey:"authIdentity",on:function(e,t,n){var i=this.req,o=this.res,r=i.session,s=r.membership,a=null;if(s){var l={};l.authToken=i.cookies[this.tokenKey],l.profile=s.profile,l.roles=s.roles,console.log(l),o.cookie(this.identityTokenKey,JSON.stringify(l)),console.log(this.tokenKey),console.log(e),o.cookie(this.tokenKey,e),s.profile=t,n(a,null)}else a.statusCode=401,a.message="No membership object available",n(a,null)},off:function(e){var t=this.req,n=this.res,i=t.session,o=i.membership,r=null;if(o){var s=t.cookies[this.identityTokenKey];s=JSON.parse(s);var a=s.authToken;n.cookie(this.tokenKey,a),n.clearCookie(this.identityTokenKey),e(r,s)}else r.statusCode=401,r.message="No membership object available",e.call(this,r,null)},setKeys:function(e){"undefined"!=typeof e.tokenKey&&(this.tokenKey=e.tokenKey),"undefined"!=typeof e.identityTokenKey&&(this.identityTokenKey=e.identityTokenKey)}},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc"),require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-mvc","elliptical-utils"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers.$memory=t(e.elliptical,e.elliptical.utils),e.returnExports=e.elliptical.providers.$memory)
}(this,function(e,t){function n(e,t,n,a){var c=i(t,a);return c?o(e,c)?s(e,n):(l(e,c),null):(r(e,t,a),null)}function i(e,t){for(var n=null,i=0,o=t.length;o>i;i++)if(t[i].model===e){n=t[i];break}return n}function o(e,t){for(var n=t.keys,i=!1,o=0,r=n.length;r>o;o++)if(n[o]===e){i=!0;break}return i}function r(e,t,n){var i={};i.model=t,i.keys=[],i.keys.push(e),n.push(i)}function s(e,t){for(var n=null,i=0,o=t.length;o>i;i++)if(t[i].key===e){n=t[i].val,t.splice(i,1);break}return n}function a(e,t,n){for(var o=i(t,n),r=o.keys,s=0,a=r.length;a>s;s++)if(r[s]===e){r.splice(s,1);break}}function l(e,t){var n=t.keys;n.push(e)}function c(e,t){for(var n=0,i=t.length;i>n;n++)if(t[n].model===e){t.splice(n,1);break}}function u(e){for(var t=[],n=0,i=e.length;i>n;n++)if(0===n||n%2===0){var o={};o.key=e[n];var r=n+1;o.val=e[r],t.push(o)}return t}var d=e.async,p=t._,f=e.Provider.extend({store:[],index:[]},{get:function(e,t,n){var i=e.id;"undefined"==typeof i?this.getAll(t,function(e,t){n&&n(e,t)}):this.getByKey(i,function(e,t){n&&n(e,t)})},getByKey:function(e,t){var n,i=this.constructor.store,o=null;try{for(var r=0;r<i.length;r++)if(i[r].key===e){n=i[r].val;break}if("undefined"==typeof n&&(o={statusCode:404,message:"key does not exist"},n=null),!t)return n;t(o,n)}catch(s){t&&t(s,null)}},mget:function(e,t){var n=null,i=[],o=this;try{var r=e.length;r>0?d.forEach(e,function(e,t){o.getByKey(e,function(e,n){if(e)throw new Error(e);i.push(n),t()})},function(e){e?t&&t(e,[]):t&&t(e,i)}):t&&(n={statusCode:400,message:"invalid keys"},t(n,[]))}catch(s){t&&t(s,[])}},getAll:function(e,t){var n=this.constructor.index,o=i(e,n),r=o.keys;this.mget(r,function(e,n){t&&t(e,n)})},list:function(e){var t=this.constructor.store;e&&e(null,t)},post:function(e,n,i){var o=t.guid();e.id=o,this.set(o,e,n,function(e,t){i&&i(e,t)})},put:function(e,t,n){var i=e.id;this.set(i,e,t,function(e,t){n&&n(e,t)})},set:function(e,t,i,o){var r=this.constructor.store,s=this.constructor.index,a=null;try{var l=n(e,i,r,s),c={};c=l?p.extend(l,t):t;var u={key:e,val:c};r.push(u),o&&o(a,t)}catch(d){o&&o(d,{})}},mset:function(e,t,n){var i=null,o=[],r=this;try{var s=e.length;if(s>0&&s%2===0){var a=u(e);d.forEach(a,function(e,n){r.set(e.key,e.val,t,function(e,t){if(e)throw new Error(e);o.push(t),n()})},function(e){e?n&&n(e,[]):n&&n(e,o)})}else n&&(i={statusCode:400,message:"invalid keys"},n(i,[]))}catch(l){n&&n(l,[])}},remove:function(e,t,n){var i=this.constructor.store,o=this.constructor.index;try{a(e,t,o),s(e,i),n&&n(null)}catch(r){n&&n(r)}},"delete":function(e,t,n){var i=e.id;this.remove(i,t,function(e,t){n&&n(e,t)})},flushModel:function(e,t){var n=this.constructor.index,o=i(e,n);try{if(!o&&t)return t(null,null);for(var r=o.keys,a=0,l=r.length;l>a;a++){var u=r[a];s(u)}c(e,n),t&&t(null,null)}catch(d){t&&t(err,null)}},flushAll:function(e){var t=this.constructor.store,n=this.constructor.index;try{t.splice(0,t.length),n.splice(0,n.length),e&&e(null)}catch(i){e&&e(i)}},length:function(e){var t=this.constructor.store,n=null;try{var i=t.length;e&&e(n,i)}catch(o){e&&e(o,0)}},query:function(){throw new Error("query not implemented")},command:function(){throw new Error("command not implemented")}});return f}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers.$odata=t(e.elliptical),e.returnExports=e.elliptical.providers.$odata)}(this,function(e){var t=e.Provider.extend({filter:function(e,t){var n="$filter="+encodeURIComponent(t);return e.indexOf("?")>-1?"&"+n:"?"+n},orderBy:function(e,t){var n="$orderby="+encodeURIComponent(t);return e.indexOf("?")>-1?"&"+n:"?"+n},top:function(e,t){var n="$top="+t;return e.indexOf("?")>-1?"&"+n:"?"+n},skip:function(e,t){var n="$skip="+t;return e.indexOf("?")>-1?"&"+n:"?"+n},paginate:function(e,t){var n,i,o=t.page,r=t.pageSize;return"undefined"==typeof o||"undefined"==typeof r?e:(o--,n=o*r,i=n>0?"$skip="+n+"&$top="+r+"&$inlinecount=allpages":"$top="+r+"&$inlinecount=allpages",e.indexOf("?")>-1?"&"+i:"?"+i)}},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers.$pagination=t(e.elliptical),e.returnExports=e.elliptical.providers.$pagination)}(this,function(e){var t=e.Provider.extend({count:"count",data:"data",spread:10,get:function(e,t){function n(e,t){var n,l,c,u,d,p;n=e.baseUrl,l=e.page,c=t[r],p=t[s],u=e.pageSize,d=a;try{l=parseInt(l)}catch(f){l=1}var h=parseInt(c/u),m=c%u;1>h?h=1:m>0&&h++;var v={page:l,pageCount:h,prevPage:n,prevClass:"hide",nextPage:n,nextClass:"hide",pages:[],count:c};return l>1&&(v.prevClass="",v.prevPage=o(n,parseInt(l-1),e)),h>l&&(v.nextClass="",v.nextPage=o(n,parseInt(l+1),e)),h>1&&(v.pages=i(n,l,h,d,e)),{pagination:v,data:p}}function i(e,t,n,i,r){var s=[];if(i>n&&(i=n),i>=t){for(var a=0;i>a;a++){var l={page:a+1,pageUrl:o(e,parseInt(a+1),r)};a===parseInt(t-1)&&(l.activePage="active"),s.push(l)}return s}var c,u,d=parseInt(i/2);t+d>n?(u=n,c=u-i):(u=t+d,c=t-d);for(var a=c;u+1>a;a++){var l={page:a,pageUrl:o(e,a,r)};a===t&&(l.activePage="active"),s.push(l)}return s}function o(e,t,n){var i=!1,o=e+"/"+t;return n.filter&&(i=!0,o+="?$filter="+encodeURIComponent(n.filter)),n.orderBy&&(o+=i?"&$orderby="+encodeURIComponent(n.orderBy):"?$orderby="+encodeURIComponent(n.orderBy)),o}var r=this.count,s=this.data,a=this.spread;if(e.paginate){var l=e.filter,c=e.orderBy;e=e.paginate,void 0!==l&&(e.filter=l),void 0!==c&&(e.orderBy=c)}return n(e,t)}},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc"),require("elliptical-http"),require("../odata/odata")):"function"==typeof define&&define.amd?define(["elliptical-mvc","elliptical-http","../odata/odata"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers.$rest=t(e.elliptical,e.elliptical.http,e.elliptical.$odata),e.returnExports=e.elliptical.providers.$rest)}(this,function(e,t,n){var i=e.factory,o=e.async,r=e.Provider.extend({_data:null,port:null,path:null,host:null,protocol:null,$queryProvider:n,onSend:null,init:function(e,t){this.host=e.host||"locahost",this.port=e.port||80,this.path=e.path||"/api",this.protocol=e.protocol||"http",void 0!==t&&(this.$queryProvider=t)},get:function(e,t,n,i){"function"==typeof n&&(i=n);var o=this._getOptions(t,"GET",void 0),r="",s=0;for(var a in e)if(e.hasOwnProperty(a)){var l=encodeURIComponent(e[a]);0===s?(r+="?"+a+"="+l,s++):r+="&"+a+"="+l}""!==r&&(o.path+="/"+r),"undefined"!=typeof n.filter&&(o.path+=this.$queryProvider.filter(o.path,n.filter)),"undefined"!=typeof n.orderBy&&(o.path+=this.$queryProvider.orderBy(o.path,n.orderBy)),"undefined"!=typeof n.paginate?o.path+=this.$queryProvider.paginate(o.path,n.paginate):("undefined"!=typeof n.skip&&(o.path+=this.$queryProvider.skip(o.path,n.skip)),"undefined"!=typeof n.top&&(o.path+=this.$queryProvider.top(o.path,n.top))),this._send(o,t,i)},post:function(e,t,n){var i=this._getOptions(t,"POST",e);this._send(i,t,n)},patch:function(){throw new Error("patch not implemented")},put:function(e,t,n){var i=this._getOptions(t,"PUT",e);this._send(i,t,n)},"delete":function(e,t,n){var i=this._getOptions(t,"DELETE",void 0),o="",r=0;for(var s in e)if(e.hasOwnProperty(s)){var a=encodeURIComponent(e[s]);0===r?(o+="?"+s+"="+a,r++):o+="&"+s+"="+a}""!=o&&(i.path+="/"+o),this._send(i,t,n)},query:function(){throw new Error("query not implemented")},command:function(){throw new Error("command not implemented")},_send:function(e,n,r){var s=this.req||{},a=[],l=i.partial(this._onAuthentication,e,n).bind(this);if(a.push(l),"function"==typeof this.onSend){var c=this.onSend,u=i.partial(this._onSend,c,s,n).bind(this);a.push(u)}o.waterfall(a,function(e,n){e?r(e,null):t.send(n,r)})},_onAuthentication:function(e,t,n){n&&n.call(this,null,e)},_onSend:function(e,t,n,i,o){e.call(this,t,i,n,o)},_getOptions:function(e,t,n){var i={};return i.host=this.host,i.port=this.port,i.method=t,i.path=this.path,i.path=i.path+"/"+e,i.protocol=this.protocol,n&&void 0!==n&&(i.data=n),i}});return r}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc"),require("../cookie/cookie")):"function"==typeof define&&define.amd?define(["elliptical-mvc","../cookie/cookie"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers.$session=e.elliptical.providers.$session||{},e.elliptical.providers.$session.$cookie=t(e.elliptical),e.returnExports=e.elliptical.providers.$session.$cookie)}(this,function(e){var t=e.Provider.extend({key:"sessionStore",get:function(e,t){var n=void 0===e.key?this.key:e.key,i=$.cookie(n);return i="undefined"!=typeof i?JSON.parse(i):{},t?t(null,i):i},put:function(e,t){var n=void 0===e.key?this.key:e.key,i="object"==typeof e.session?JSON.stringify(e.session):e.session;return $.cookie(n,i,{path:"/"}),t?void t(null,i):i},"delete":function(e,t){var n=void 0===e.key?this.key:e.key;$.removeCookie(n),t&&t(null,null)},$setKey:function(e){this.key=e}},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers.session=e.elliptical.providers.session||{},e.elliptical.providers.session.$local=t(e.elliptical),e.returnExports=e.elliptical.providers.session.$local)}(this,function(e){var t=e.Provider.extend({key:"sessionStore",get:function(e,t){var n=void 0===e||void 0===e.key?this.key:e.key,i=localStorage.getItem(n);try{i=JSON.parse(i)}catch(o){i={}}return t?void t(null,i):i},put:function(e,t){var n=void 0===e||void 0===e.key?this.key:e.key,i="object"==typeof e.session?JSON.stringify(e.session):e.session;return localStorage.setItem(n,i),t?void t(null,i):i},"delete":function(e,t){var n=void 0===e||void 0===e.key?this.key:e.key;localStorage.removeItem(n),t&&t(null,null)},$setKey:function(e){this.key=e}},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers.session=e.elliptical.providers.session||{},e.elliptical.providers.session.$storage=t(e.elliptical),e.returnExports=e.elliptical.providers.session.$storage)}(this,function(e){var t=e.Provider.extend({key:"sessionStore",get:function(e,t){var n=void 0===e||void 0===e.key?this.key:e.key,i=sessionStorage.getItem(n);try{i=JSON.parse(i)}catch(o){i={}}return t?void t(null,i):i},put:function(e,t){var n=void 0===e||void 0===e.key?this.key:e.key,i="object"==typeof e.session?JSON.stringify(e.session):e.session;return sessionStorage.setItem(n,i),t?void t(null,i):i},"delete":function(e,t){var n=void 0===e||void 0===e.key?this.key:e.key;sessionStorage.removeItem(n),t&&t(null,null)},$setKey:function(e){this.key=e}},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc"),require("elliptical-utils"),require("elliptical-dustjs")):"function"==typeof define&&define.amd?define(["elliptical-mvc","elliptical-utils","elliptical-dustjs"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers.$template=t(e.elliptical,dust),e.returnExports=e.elliptical.providers.$template)}(this,function(e,t,n){function i(i,r,s,a,l){if(t.isBrowser()){var c=0,u=new e.Interval({delay:10});u.run(function(){o(s,u,c,l)})}else r.getAll(i,function(e,t){for(var i=0,o=t.length;o>i;i++){var r=JSON.parse(t[i]);n.loadSource(r)}l()})}function o(e,n,i,o){var r=e.cache;t._.isEmpty(r)?i>1e3?(n.terminate(),o&&o()):i++:(n.terminate(),o&&o())}var r=t._;n.optimizers.format=function(e,t){return t};var s=e.Provider.extend({_data:{},$store:null,base:{server:"base",client:"base-client"},$provider:n,compile:n.compile,cache:n.cache,model:"template",api:"/api/template",namespace:null,getBase:function(){return t.isBrowser()?this.base.client:this.base.server},$setOpts:function(e){e&&("undefined"!=typeof e.model&&(this.model=e.model),"undefined"!=typeof e.api&&(this.api=e.api),"undefined"!=typeof e.base&&(this.base=e.base))},$setProvider:function(e){this.$provider=e},render:function(e,t,n){var o=this.$provider,s=o.cache;r.isEmpty(s)?i(this.model,this.$store,this.$provider,this.api,function(){o.render(e,t,function(e,t){n&&n(e,t)})}):o.render(e,t,function(e,t){n&&n(e,t)})},setBrowserGlobal:function(){"undefined"!=typeof window&&(window.dust=this.$provider)}},{init:function(e){e&&(this.constructor._data.base=!0)},render:function(e,t,n){if(this.constructor._data.base){var i={render:this.constructor.getBase()},o=this.constructor.$provider.makeBase(i);t=o.push(t)}this.constructor.render(e,t,function(e,t){n&&n(e,t)})}});return s}),function(e,t){"undefined"!=typeof module&&module.exports?"undefined"!=typeof window&&(module.exports=t(require("elliptical-mvc"),require("ellipsis-animation"))):"function"==typeof define&&define.amd?define(["elliptical-mvc","ellipsis-animation"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers.$transitions=t(e.elliptical),e.returnExports=e.elliptical.providers.$transitions)}(this,function(e){var t='[data-placeholder="content"]';$("html").hasClass("customelements");var n=e.Provider.extend({render:function(e,n,i,o){function r(e){var t={};t.duration=300,t.preset="fadeOut",a.transition(t,function(){e.call(a[0])})}function s(e){var n={};n.duration=300,n.preset=i;var o=$(t);o.transition(n,function(){e.call(o[0])})}var a=$(e);"none"!==i?r(function(){a.html(n),a.show(),s(function(){})}):(a.html(n),o&&o.call(this))}},{});return n}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.providers=e.elliptical.providers||{},e.elliptical.providers$validation=t(e.elliptical),e.returnExports=e.elliptical.providers.$validation)}(this,function(e){var t=e.Provider.extend({schemas:[],submitLabel:"submitLabel",successMessage:"Successfully Submitted...",post:function(e,t,n){var i=null,o=this.getSchema(t);for(var r in o)if(o.hasOwnProperty(r))if(!o[r].required||"undefined"!=typeof e[r]&&""!==e[r]){if(o[r].confirm)e[r]&&e["confirm"+r]&&e[r]!=e["confirm"+r]&&(e[r+"_placeholder"]="Does Not Match...",e[r+"_error"]="error",e["confirm"+r+"_placeholder"]="Does Not Match...",e["confirm"+r+"_error"]="error",i||(i=this.error()));else if(o[r].validate&&"function"==typeof o[r].validate&&e[r]){var s=o[r].validate(e);s&&(e[r+"_placeholder"]=s,e[r+"_error"]="error",e[r]="",i||(i=this.error()))}}else e[r+"_placeholder"]="Required...",e[r+"_error"]="error",i||(i=this.error());i?(e=this.addSubmitLabel(e,!1),n(i,e)):(e=this.deleteProperties(e),n(null,e))},onError:function(e,t){return e=this.addSubmitLabel(e,t,!1)},onSuccess:function(e){return e=this.addEmptySubmitLabel(e)},getSchema:function(e){for(var t=null,n=0;n<this.schemas.length;n++)if(this.schemas[n].name.toLowerCase()===e.toLowerCase()){t=this.schemas[n].schema;break}return t},error:function(e){"undefined"==typeof e&&(e="Form Submission Error");var t={};return t.message=e,t.css="error",t.cssDisplay="visible",t},addSubmitLabel:function(e,t,n){"undefined"==typeof n&&(n=t,t=void 0);var i;return i=n?this.success():this.error(t),e[this.submitLabel]=i,e},addEmptySubmitLabel:function(e){return e[this.submitLabel]=this.emptyLabelObject(),e},success:function(){var e={};return e.message=this.successMessage,e.css="success",e.cssDisplay="visible",e},emptyLabelObject:function(){var e={};return e.message="&nbsp;",e.css="",e.cssDisplay="",e},deleteProperties:function(e){for(var t in e)e.hasOwnProperty(t)&&(e["confirm"+t]&&delete e["confirm"+t],e["confirm"+t+"_placeholder"]&&delete e["confirm"+t+"_placeholder"],e["confirm"+t+"_error"]&&delete e["confirm"+t+"_error"],e[t+"_placeholder"]&&delete e[t+"_placeholder"],e[t+"_error"]&&delete e[t+"_error"]);return e}},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc"),require("elliptical-providers")):"function"==typeof define&&define.amd?define(["elliptical-mvc","elliptical-providers"],t):(e.elliptical.services=e.elliptical.services||{},e.elliptical.services.Log=t(e.elliptical,e.elliptical.providers),e.returnExports=e.elliptical.services.Cookie)}(this,function(e,t){var n=t.$cookie,i=e.Service.extend({"@class":"Cookie",$provider:n,get:function(e){return this.$provider.get(e)},post:function(e){return this.$provider.post(e)},put:function(e){return this.$provider.put(e)},"delete":function(e){return this.$provider.delete(e)}},{});return i}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc"),require("elliptical-providers")):"function"==typeof define&&define.amd?define(["elliptical-mvc","elliptical-providers"],t):(e.elliptical.services=e.elliptical.services||{},e.elliptical.services.Identity=t(e.elliptical,e.elliptical.providers),e.returnExports=e.elliptical.services.Identity)}(this,function(e,t){var n=t.$identity,i=e.Service.extend({"@class":"Identity",$provider:n,on:function(e,t,n){this.$provider.on(e,t,n)},off:function(e){this.$provider.off(e)},setKeys:function(e){this.$provider.setKeys(e)}},{});return i}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.services=e.elliptical.services||{},e.elliptical.services.Log=t(e.elliptical),e.returnExports=e.elliptical.services.Log)}(this,function(e){var t=e.Service.extend({"@class":"Log"},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.services=e.elliptical.services||{},e.elliptical.services.Membership=t(e.elliptical),e.returnExports=e.elliptical.services.Membership)}(this,function(e){var t=e.Service.extend({"@class":"Membership",login:function(e,t){if(!this.$provider.login)throw new Error("login method not implemented");this.$provider.login(e,t)},authenticate:function(e,t){if(!this.$provider.authenticate)throw new Error("authenticate method not implemented");this.$provider.authenticate(e,t)},resetPassword:function(e,t){if(!this.$provider.resetPassword)throw new Error("resetPassword method not implemented");this.$provider.resetPassword(e,t)},changePassword:function(e,t){if(!this.$provider.changePassword)throw new Error("changePassword method not implemented");this.$provider.changePassword(e,t)},logout:function(e){if(!this.$provider.logout)throw new Error("logout method not implemented");this.$provider.logout(e)},signUp:function(e,t){if(!this.$provider.signUp)throw new Error("signUp method not implemented");this.$provider.signUp(e,t)},roleExists:function(e,t){if(!this.$provider.roleExists)throw new Error("roleExists method not implemented");this.$provider.roleExists(e,t)},isUserInRole:function(e,t){if(!this.$provider.isUserInRole)throw new Error("isUserInRole method not implemented");this.$provider.isUserInRole(e,t)},isUserInRoles:function(e,t){if(!this.$provider.isUserInRoles)throw new Error("isUserInRoles method not implemented");this.$provider.isUserInRoles(e,t)},getRolesForUser:function(e,t){if(!this.$provider.getRolesForUser)throw new Error("getRolesForUser method not implemented");this.$provider.getRolesForUser(e,t)},addUserToRole:function(e,t){if(!this.$provider.addUserToRole)throw new Error("addUserToRoles method not implemented");this.$provider.addUserToRole(e,t)},removeUserFromRole:function(e,t){if(!this.$provider.removeUserFromRole)throw new Error("removeUserFromRoles method not implemented");this.$provider.removeUserFromRole(e,t)},getUsersInRole:function(e,t){if(!this.$provider.getUsersInRole)throw new Error("getUsersInRole method not implemented");this.$provider.getUsersInRole(e,t)},createRole:function(e,t){if(!this.$provider.createRole)throw new Error("createRole method not implemented");this.$provider.createRole(e,t)},deleteRole:function(e,t){if(!this.$provider.deleteRole)throw new Error("deleteRole method not implemented");this.$provider.deleteRole(e,t)},isAuthenticated:function(e,t){if(!this.$provider.isAuthenticated)throw new Error("isAuthenticated method not implemented");return void 0===e&&void 0===t?this.$provider.isAuthenticated(e,t):void this.$provider.isAuthenticated(e,t)},profile:function(e,t){if(!this.$provider.profile)throw new Error("profile method not implemented");this.$provider.profile(e,t)}},{login:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.login(n,t)},signUp:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.signUp(n,t)},logout:function(e){this.constructor.logout(e)},roleExists:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.roleExists(n,t)},isUserInRole:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.isUserInRole(n,t)},isUserInRoles:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.isUserInRoles(n,t)},getRolesForUser:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.getRolesForUser(n,t)},addUserToRoles:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.addUserToRoles(n,t)},removeUserFromRoles:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.removeUserFromRoles(n,t)},getUsersInRole:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.getUsersInRole(n,t)},createRole:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.createRole(n,t)},deleteRole:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.deleteRole(n,t)},profile:function(e,t){var n=this._data;"function"==typeof e?t=e:n=e,this.constructor.profile(n,t)}});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.services=e.elliptical.services||{},e.elliptical.services.Message=t(e.elliptical),e.returnExports=e.elliptical.services.Message)}(this,function(e){var t=e.Service.extend({"@class":"Message"},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.services=e.elliptical.services||{},e.elliptical.services.Role=t(e.elliptical),e.returnExports=e.elliptical.services.Role)}(this,function(e){var t=e.Service.extend({"@class":"Role"},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.services=e.elliptical.services||{},e.elliptical.services.Schema=t(e.elliptical),e.returnExports=e.elliptical.services.Schema)}(this,function(e){var t=e.Service.extend({"@class":"Schema"},{});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc")):"function"==typeof define&&define.amd?define(["elliptical-mvc"],t):(e.elliptical.services=e.elliptical.services||{},e.elliptical.services.Session=t(e.elliptical),e.returnExports=e.elliptical.services.Session)}(this,function(e){var t=e.Service.extend({"@class":"Session",get:function(e,t){return this.$provider.get(e,t)},put:function(e,t){return this.$provider.put(e,t)},"delete":function(e,t){return this.$provider.delete(e,t)}},{init:function(e){this.$provider=void 0!==e?e:null},get:function(e,t){var n=this.$provider?this.$provider:this.constructor.$provider;return n.get(e,t)},put:function(e,t){var n=this.$provider?this.$provider:this.constructor.$provider;return n.put(e,t)},"delete":function(e,t){var n=this.$provider?this.$provider:this.constructor.$provider;return n.delete(e,t)}});return t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc"),require("elliptical-providers")):"function"==typeof define&&define.amd?define(["elliptical-mvc","elliptical-providers"],t):(e.elliptical.services=e.elliptical.services||{},e.elliptical.services.Log=t(e.elliptical,e.elliptical.providers),e.returnExports=e.elliptical.services.Validation)}(this,function(e,t){var n=t.$validation,i=e.Service.extend({"@class":"Validation",$provider:n,schemas:null,post:function(e,t,n){this.$provider.schemas=this.schemas,this.$provider.post(e,t,n)},onSuccess:function(e){return this.$provider.onSuccess(e)},onError:function(e,t){return this.$provider.onError(e,t)}},{});return i}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc"),require("elliptical-event")):"function"==typeof define&&define.amd?define(["elliptical-mvc","elliptical-event"],t):(e.elliptical.Delegate=t(e.elliptical,e.elliptical.Event),e.returnExports=e.elliptical.Delegate)}(this,function(e,t){var n=e.Class.extend({bindings:null,init:function(e){this.bindings=e},on:function(){function e(e,t){$(document).on(e,'[delegate="'+t+'"]',function(t){n(e,"delegate-target")&&i(t)}),$(document).on(e,'[data-delegate="'+t+'"]',function(e){n(e,"data-delegate-target")&&i(e)})}function n(e,t){return e.target===e.currentTarget?!0:void 0!==$(e.currentTarget).attr(t)}function i(e){var n,i,o,r=$(e.currentTarget);o=!1,n=r.attr(r.attr("event")?"event":"data-event"),i=r.attr(r.attr("channel")?"channel":"data-channel"),r.attr("camel-case")?o=r.attr("camel-case"):r.attr("data-camel-case")&&(o=r.attr("data-camel-case"));var s=$.element.getOpts(r[0],o);s.channel&&delete s.channel,s.event&&delete s.event,s.delegate&&delete s.delegate,s.camelCase&&delete s.camelCase,s.target=r[0],"undefined"!=typeof i&&"sync"!==n&&t.emit(i+"."+n,s)}var o=this.bindings;o&&o.length&&o.forEach(function(t){var n=t.event,i=t.delegate;e(n,i)})},off:function(){function e(e,t){$(document).off(event,'[delegate="'+t+'"]'),$(document).on(e,'[data-delegate="'+t+'"]')}var t=this.bindings;t&&t.length&&t.forEach(function(t){var n=t.event,i=t.delegate;e(n,i)})}});return n}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){var e={};e.mozilla=!1,e.webkit=!1,e.opera=!1,e.msie=!1;var t=navigator.userAgent;e.name=navigator.appName,e.fullVersion=""+parseFloat(navigator.appVersion),e.majorVersion=parseInt(navigator.appVersion,10);var n,i,o;return-1!=(i=t.indexOf("Opera"))?(e.opera=!0,e.name="Opera",e.fullVersion=t.substring(i+6),-1!=(i=t.indexOf("Version"))&&(e.fullVersion=t.substring(i+8))):-1!=(i=t.indexOf("MSIE"))?(e.msie=!0,e.name="Microsoft Internet Explorer",e.fullVersion=t.substring(i+5)):-1!=(i=t.indexOf("Chrome"))?(e.webkit=!0,e.name="Chrome",e.fullVersion=t.substring(i+7)):-1!=(i=t.indexOf("Safari"))?(e.webkit=!0,e.name="Safari",e.fullVersion=t.substring(i+7),-1!=(i=t.indexOf("Version"))&&(e.fullVersion=t.substring(i+8))):-1!=(i=t.indexOf("Firefox"))?(e.mozilla=!0,e.name="Firefox",e.fullVersion=t.substring(i+8)):(n=t.lastIndexOf(" ")+1)<(i=t.lastIndexOf("/"))?(e.name=t.substring(n,i),e.fullVersion=t.substring(i+1),e.name.toLowerCase()===e.name.toUpperCase()&&(e.name=navigator.appName)):-1!==t.indexOf("Mozilla")&&-1===t.indexOf("Firefox")&&(e.msie=!0,e.name="Internet Explorer",e.fullVersion="11"),-1!=(o=e.fullVersion.indexOf(";"))&&(e.fullVersion=e.fullVersion.substring(0,o)),-1!=(o=e.fullVersion.indexOf(" "))&&(e.fullVersion=e.fullVersion.substring(0,o)),e.majorVersion=parseInt(""+e.fullVersion,10),isNaN(e.majorVersion)&&(e.fullVersion=""+parseFloat(navigator.appVersion),e.majorVersion=parseInt(navigator.appVersion,10)),e.version=e.majorVersion,$.browser=$.browser||e,$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){function e(e){Q.cssText=e}function t(e,t){return typeof e===t}function n(e,t){return!!~(""+e).indexOf(t)}function i(e,t){for(var i in e){var o=e[i];if(!n(o,"-")&&void 0!==Q[o])return"pfx"==t?o:!0}return!1}function o(e,n,i){for(var o in e){var r=n[e[o]];if(void 0!==r)return i===!1?e[o]:t(r,"function")?r.bind(i||n):r}return!1}function r(e,t,n){return t?s(e,t,n):s(e,"pfx")}function s(e,n,r){var s=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+et.join(s+" ")+s).split(" ");return t(n,"string")||t(n,"undefined")?i(a,n):(a=(e+" "+tt.join(s+" ")+s).split(" "),o(a,n,r))}function a(){var e;return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?e=!0:ot(["@media (",Z.join("touch-enabled),("),J,")","{#ellipsis{top:9px;position:absolute}}"].join(""),function(t){e=9===t.offsetTop}),e}function l(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}function c(){return"geolocation"in navigator}function u(){return!(!window.history||!history.pushState)}function d(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}function p(){return"WebSocket"in window||"MozWebSocket"in window}function f(){var e=!!s("perspective");return e&&"webkitPerspective"in K.style&&ot("@media (transform-3d),(-webkit-transform-3d){#ellipsis{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e}function h(){var e=document.createElement("video"),t=!1;try{(t=!!e.canPlayType)&&(t=new Boolean(t),t.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return t}function m(){var e=document.createElement("audio"),t=!1;try{(t=!!e.canPlayType)&&(t=new Boolean(t),t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return t}function v(){try{return localStorage.setItem(J,J),localStorage.removeItem(J),!0}catch(e){return!1}}function _(){try{return sessionStorage.setItem(J,J),sessionStorage.removeItem(J),!0}catch(e){return!1}}function g(){return!!window.Worker}function y(){return!!window.applicationCache}function b(){return!!document.createElementNS&&!!document.createElementNS(nt.svg,"svg").createSVGRect}function w(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==nt.svg}function x(){return!!document.createElementNS&&/SVGClipPath/.test(Y.call(document.createElementNS(nt.svg,"clipPath")))}function E(){if(/Android/.test(navigator.userAgent))return!1;var e=document.createElement("ellipsis"),t=("undefined"!=typeof e.style.webkitBackgroundClip&&(e.style.webkitBackgroundClip="text"),"text"==e.style.webkitBackgroundClip);return t}function C(){return"contentEditable"in document.documentElement}function O(){return s("overflowScrolling")}function S(){return s("resize")}function k(){return!!window.postMessage}function P(){return"undefined"!=typeof DataView&&"getFloat64"in DataView.prototype}function I(){var e=document.createElement("div");return e.setAttribute("data-a-b","c"),!(!e.dataset||"c"!==e.dataset.aB)}function T(){return void 0!==document.createElement("progress").max}function j(){return void 0!==document.createElement("meter").max}function N(){return!!r("requestFileSystem",window)}function q(){return!!(window.File&&window.FileList&&window.FileReader)}function A(){for(var e=0;e<tt.length;e++)if(document[tt[e].toLowerCase()+"CancelFullScreen"])return!0;return!!document.cancelFullScreen||!1}function M(){return!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest)
}function L(){return!!r("battery",navigator)}function R(){var e=.2,t=r("battery",navigator);return!!(t&&!t.charging&&t.level<=e)}function D(){return s("flexWrap")}function F(){return!!s("indexedDB",window)}function U(){return e("background-color:hsla(120,40%,100%,.5)"),n(Q.backgroundColor,"rgba")||n(Q.backgroundColor,"hsla")}function B(){return e("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(Q.background)}function V(){return s("columnCount")}function W(){return s("boxReflect")}function H(){var e=document.createElement("form");if(!("checkValidity"in e))return!1;var t,n=document.body,i=document.documentElement,o=!1,r=!1;e.onsubmit=function(e){window.opera||e.preventDefault(),e.stopPropagation()},e.innerHTML='<input name="modTest" required><button></button>',e.style.position="absolute",e.style.top="-99999em",n||(o=!0,n=document.createElement("body"),n.style.background="",i.appendChild(n)),n.appendChild(e),t=e.getElementsByTagName("input")[0],t.oninvalid=function(e){r=!0,e.preventDefault(),e.stopPropagation()};!!t.validationMessage;return e.getElementsByTagName("button")[0].click(),n.removeChild(e),o&&i.removeChild(n),r}{var z={},K=document.documentElement,J="ellipsis",G=document.createElement(J),Q=G.style,Y={}.toString,Z=" -webkit- -moz- -o- -ms- ".split(" "),X="Webkit Moz O ms",et=X.split(" "),tt=X.toLowerCase().split(" "),nt={svg:"http://www.w3.org/2000/svg"},it=[],ot=(it.slice,function(e,t,n,i){var o,r,s,a,l=document.createElement("div"),c=document.body,u=c||document.createElement("body");if(parseInt(n,10))for(;n--;)s=document.createElement("div"),s.id=i?i[n]:J+(n+1),l.appendChild(s);return o=["&#173;",'<style id="s',J,'">',e,"</style>"].join(""),l.id=J,(c?l:u).innerHTML+=o,u.appendChild(l),c||(u.style.background="",u.style.overflow="hidden",a=K.style.overflow,K.style.overflow="hidden",K.appendChild(u)),r=t(l,e),c?l.parentNode.removeChild(l):(u.parentNode.removeChild(u),K.style.overflow=a),!!r});({}).hasOwnProperty}return z.touch=a(),z.canvas=l(),z.geolocation=c(),z.history=u(),z.dragdrop=d(),z.websockets=p(),z.css3dtransforms=f(),z.video=h(),z.audio=m(),z.localstorage=v(),z.sessionstorage=_(),z.webworkers=g(),z.applicationcache=y(),z.svg=b(),z.inlinesvg=w(),z.svgclippaths=x(),z.backgroundclip=E(),z.contenteditbale=C(),z.overflowscrolling=O(),z.cssresize=S(),z.postmessage=k(),z.dataview=P(),z.dataset=I(),z.progressbar=T(),z.meter=j(),z.filesystem=N(),z.filereader=q(),z.fullscreen=A(),z.cors=M(),z.battery=L(),z.lowbattery=R(),z.flexbox=D(),z.indexeddb=F(),z.hsla=U(),z.multiplebgs=B(),z.csscolumns=V(),z.cssreflections=W(),z.formvalidation=H(),z.init=function(){var e=$("html");e.removeClass("no-js"),e.addClass("js");var t=["touch","canvas","svg","history","formvalidation","localstorage","sessionstorage","meter","backgroundclip","inlinesvg","svgclippaths","css3dtransforms","video","audio","progressbar","cssresize","postmessage","overflowscrolling","flexbox","indexeddb","hsla","multiplebgs","csscolumns","cssreflections"];t.forEach(function(t){e.addClass(z[t]?t:"no-"+t)}),$.browser&&$.browser.msie&&(6===$.browser.majorVersion?e.addClass("ie6"):7===$.browser.majorVersion?e.addClass("ie7"):8===$.browser.majorVersion&&e.addClass("ie8"))},z.stickyFooter=function(){if($.browser.msie){var e=$(".ui-sticky-footer");e[0]&&e.addClass("ns")}},z.init(),z.stickyFooter(),$.support=$.support||{},$.extend($.support,z),$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){var e={};return e.datetime={isDate:function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},setToStartOfDay:function(e){this.isDate(e)&&e.setHours(0,0,0,0)},compareDates:function(e,t){return e.getTime()===t.getTime()},currentDate:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,i=e.getFullYear();return n+"/"+t+"/"+i}},e.array={isArray:function(e){return/Array/.test(Object.prototype.toString.call(e))}},e.string={dashToCamelCase:function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},random:function(){return Math.floor(1e5*Math.random()+1).toString()}},e.color={rgb2hex:function(e){function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}return-1==e.search("rgb")?e:"rgba(0, 0, 0, 0)"==e?"transparent":(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/),"#"+t(e[1])+t(e[2])+t(e[3]))}},e.url={queryString:function(e){var t=window.location.search.substring(1),n=t.split("&");for(i=0;i<n.length;i++){var o=n[i].split("=");if(o[0]==e)return o[1]}return null},queryStringObjectArray:function(){var e=[],t=window.location.search.substring(1),n=t.split("&");for(i=0;i<n.length;i++){var o=n[i].split("=");if(o[0]==ji)return o[1];var r={};r.prop=o[0],r.val=o[1],e.push(r)}return e},queryStringFilterArray:function(){var e=[],t=window.location.search.substring(1),n=t.split("&");for(i=0;i<n.length;i++){var o=n[i].split("="),r={};r.filter=o[0],r.val=o[1],""!=r.filter&&e.push(r)}return e}},e.image={aspectRatio:function(e,t){var n=e.width(),i=e.height(),o=i/n;return t.aspectRatio=o,"undefined"!=typeof t.height?t.width=parseInt(1/o*t.height):"undefined"!=typeof t.width&&(t.height=parseInt(o*t.width)),t}},$.utils=$.utils||{},$.extend($.utils,e),String.prototype.toCamelCase=function(){return this.replace(/[-_]([a-z])/g,function(e){return e[1].toUpperCase()})},String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},String.prototype.toPixel=function(){var e=parseInt(this,10);return e=e.toString()+"px"},Number.prototype.toPixel=function(){var e=parseInt(this,10);return e=e.toString()+"px"},String.prototype.toFloatPixel=function(){var e=this.toString()+"px";return e},Number.prototype.toFloatPixel=function(){var e=this.toString()+"px";return e},String.prototype.toInteger=function(){return parseInt(this.replace("px",""),10)},String.prototype.toMillisecond=function(){var e=parseInt(this,10);return e=e.toString()+"ms"},Number.prototype.toMillisecond=function(){var e=parseInt(this,10);return e=e.toString()+"ms"},$.fn.alterClass=function(e,t){var n=this;if(-1===e.indexOf("*"))return n.removeClass(e),t?n.addClass(t):n;var i=new RegExp("\\s"+e.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");return n.each(function(e,t){for(var n=" "+t.className+" ";i.test(n);)n=n.replace(i," ");t.className=$.trim(n)}),t?n.addClass(t):n},$.fn.selfFind=function(e){return this.find(e).add(this.filter(e))},$.fn.clearSelect=function(e){return"undefined"==typeof e.defaultOption?this.children.remove():this.children("option:not(:first)").remove(),this},$.fn.findTextNodes=function(){return this.contents().filter(function(){return 3===this.nodeType})},$.fn.findTextNodeDescendants=function(){return this.find("*").contents().filter(function(){return 3===this.nodeType})},$.fn.closestChildren=function(e){if(!e||""===e)return $();var t=$();return this.each(function(){var n=$(this),i=[];for(i.push(n);i.length>0;)for(var o=i.shift(),r=o.children(),s=0;s<r.length;++s){var a=$(r[s]);if(a.is(e))return t=r,!1;i.push(a)}}),t},$}),"undefined"==typeof global&&(global=window),global.Platform=global.Platform||{},global.logFlags=global.logFlags||{},"undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty,t=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(t++ +"__")};n.prototype={set:function(t,n){var i=t[this.name];i&&i[0]===t?i[1]=n:e(t,this.name,{value:[t,n],writable:!0})},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},"delete":function(e){var t=e[this.name];if(!t)return!1;var n=t[0]===e;return t[0]=t[1]=void 0,n},has:function(e){var t=e[this.name];return t?t[0]===e:!1}},window.WeakMap=n}(),window.CustomElements=window.CustomElements||{flags:{}},function(e){function t(e,n,i){var o=e.firstElementChild;if(!o)for(o=e.firstChild;o&&o.nodeType!==Node.ELEMENT_NODE;)o=o.nextSibling;for(;o;)n(o,i)!==!0&&t(o,n,i),o=o.nextElementSibling;return null}function n(e,t){for(var n=e.shadowRoot;n;)i(n,t),n=n.olderShadowRoot}function i(e,i){t(e,function(e){return i(e)?!0:void n(e,i)}),n(e,i)}function o(e){return a(e)?(l(e),!0):void d(e)}function r(e){i(e,function(e){return o(e)?!0:void 0})}function s(e){return o(e)||r(e)}function a(t){if(!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var n=t.getAttribute("is")||t.localName,i=e.registry[n];if(i)return O.dom&&console.group("upgrade:",t.localName),e.upgrade(t),O.dom&&console.groupEnd(),!0}}function l(e){d(e),_(e)&&i(e,function(e){d(e)})}function c(e){if(I.push(e),!P){P=!0;var t=window.Platform&&window.Platform.endOfMicrotask||setTimeout;t(u)}}function u(){P=!1;for(var e,t=I,n=0,i=t.length;i>n&&(e=t[n]);n++)e();I=[]}function d(e){k?c(function(){p(e)}):p(e)}function p(e){(e.attachedCallback||e.detachedCallback||e.__upgraded__&&O.dom)&&(O.dom&&console.group("inserted:",e.localName),_(e)&&(e.__inserted=(e.__inserted||0)+1,e.__inserted<1&&(e.__inserted=1),e.__inserted>1?O.dom&&console.warn("inserted:",e.localName,"insert/remove count:",e.__inserted):e.attachedCallback&&(O.dom&&console.log("inserted:",e.localName),e.attachedCallback())),O.dom&&console.groupEnd())}function f(e){h(e),i(e,function(e){h(e)})}function h(e){k?c(function(){m(e)}):m(e)}function m(e){(e.attachedCallback||e.detachedCallback||e.__upgraded__&&O.dom)&&(O.dom&&console.group("removed:",e.localName),_(e)||(e.__inserted=(e.__inserted||0)-1,e.__inserted>0&&(e.__inserted=0),e.__inserted<0?O.dom&&console.warn("removed:",e.localName,"insert/remove count:",e.__inserted):e.detachedCallback&&e.detachedCallback()),O.dom&&console.groupEnd())}function v(e){return window.ShadowDOMPolyfill?ShadowDOMPolyfill.wrapIfNeeded(e):e}function _(e){for(var t=e,n=v(document);t;){if(t==n)return!0;t=t.parentNode||t.host}}function g(e){if(e.shadowRoot&&!e.shadowRoot.__watched){O.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)y(t),t=t.olderShadowRoot}}function y(e){e.__watched||(x(e),e.__watched=!0)}function b(e){if(O.dom){var t=e[0];if(t&&"childList"===t.type&&t.addedNodes&&t.addedNodes){for(var n=t.addedNodes[0];n&&n!==document&&!n.host;)n=n.parentNode;var i=n&&(n.URL||n._URL||n.host&&n.host.localName)||"";i=i.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",e.length,i||"")}e.forEach(function(e){"childList"===e.type&&(j(e.addedNodes,function(e){e.localName&&s(e)}),j(e.removedNodes,function(e){e.localName&&f(e)}))}),O.dom&&console.groupEnd()}function w(){b(T.takeRecords()),u()}function x(e){T.observe(e,{childList:!0,subtree:!0})}function $(e){x(e)}function E(e){O.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop()),s(e),O.dom&&console.groupEnd()}function C(e){e=v(e);for(var t,n=e.querySelectorAll("link[rel="+S+"]"),i=0,o=n.length;o>i&&(t=n[i]);i++)t.import&&t.import.__parsed&&C(t.import);E(e)}var O=window.logFlags||{},S=window.HTMLImports?HTMLImports.IMPORT_LINK_TYPE:"none",k=!window.MutationObserver||window.MutationObserver===window.JsMutationObserver;e.hasPolyfillMutations=k;var P=!1,I=[],T=new MutationObserver(b),j=Array.prototype.forEach.call.bind(Array.prototype.forEach);e.IMPORT_LINK_TYPE=S,e.watchShadow=g,e.upgradeDocumentTree=C,e.upgradeAll=s,e.upgradeSubtree=r,e.insertedNode=l,e.observeDocument=$,e.upgradeDocument=E,e.takeRecords=w}(window.CustomElements),function(e){function t(t,s){var a=s||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(n(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(f(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");if(!a.prototype)throw new Error("Options missing required prototype property");return a.__name=t.toLowerCase(),a.lifecycle=a.lifecycle||{},a.ancestry=i(a.extends),o(a),r(a),d(a.prototype),h(a.__name,a),a.ctor=m(a),a.ctor.prototype=a.prototype,a.prototype.constructor=a.ctor,e.ready&&e.upgradeDocumentTree(document),a.ctor}function n(e){for(var t=0;t<E.length;t++)if(e===E[t])return!0}function i(e){var t=f(e);return t?i(t.extends).concat([t]):[]}function o(e){for(var t,n=e.extends,i=0;t=e.ancestry[i];i++)n=t.is&&t.tag;e.tag=n||e.__name,n&&(e.is=e.__name)}function r(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var n=document.createElement(e.tag),i=Object.getPrototypeOf(n);i===e.prototype&&(t=i)}for(var o,r=e.prototype;r&&r!==t;)o=Object.getPrototypeOf(r),r.__proto__=o,r=o;e.native=t}}function s(e){return a(S(e.tag),e)}function a(t,n){return n.is&&t.setAttribute("is",n.is),l(t,n),t.__upgraded__=!0,u(t),e.insertedNode(t),e.upgradeSubtree(t),t}function l(e,t){Object.__proto__?e.__proto__=t.prototype:(c(e,t.prototype,t.native),e.__proto__=t.prototype)}function c(e,t,n){for(var i={},o=t;o!==n&&o!==HTMLElement.prototype;){for(var r,s=Object.getOwnPropertyNames(o),a=0;r=s[a];a++)i[r]||(Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r)),i[r]=1);o=Object.getPrototypeOf(o)}}function u(e){e.createdCallback&&e.createdCallback()}function d(e){if(!e.setAttribute._polyfilled){var t=e.setAttribute;e.setAttribute=function(e,n){p.call(this,e,n,t)};var n=e.removeAttribute;e.removeAttribute=function(e){p.call(this,e,null,n)},e.setAttribute._polyfilled=!0}}function p(e,t,n){e=e.toLowerCase();var i=this.getAttribute(e);n.apply(this,arguments);var o=this.getAttribute(e);this.attributeChangedCallback&&o!==i&&this.attributeChangedCallback(e,i,o)}function f(e){return e?C[e.toLowerCase()]:void 0}function h(e,t){C[e]=t}function m(e){return function(){return s(e)}}function v(e,t,n){return e===O?_(t,n):k(e,t)}function _(e,t){var n=f(t||e);if(n){if(e==n.tag&&t==n.is)return new n.ctor;if(!t&&!n.is)return new n.ctor}if(t){var i=_(e);return i.setAttribute("is",t),i}var i=S(e);return e.indexOf("-")>=0&&l(i,HTMLElement),i}function g(e){if(!e.__upgraded__&&e.nodeType===Node.ELEMENT_NODE){var t=e.getAttribute("is"),n=f(t||e.localName);if(n){if(t&&n.tag==e.localName)return a(e,n);if(!t&&!n.extends)return a(e,n)}}}function y(t){var n=P.call(this,t);return e.upgradeAll(n),n}e||(e=window.CustomElements={flags:{}});var b=e.flags,w=Boolean(document.registerElement),x=!b.register&&w&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||HTMLImports.useNative);if(x){var $=function(){};e.registry={},e.upgradeElement=$,e.watchShadow=$,e.upgrade=$,e.upgradeAll=$,e.upgradeSubtree=$,e.observeDocument=$,e.upgradeDocument=$,e.upgradeDocumentTree=$,e.takeRecords=$,e.reservedTagList=[]}else{var E=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],C={},O="http://www.w3.org/1999/xhtml",S=document.createElement.bind(document),k=document.createElementNS.bind(document),P=Node.prototype.cloneNode;document.registerElement=t,document.createElement=_,document.createElementNS=v,Node.prototype.cloneNode=y,e.registry=C,e.upgrade=g}var I;I=Object.__proto__||x?function(e,t){return e instanceof t}:function(e,t){for(var n=e;n;){if(n===t.prototype)return!0;n=n.__proto__}return!1},e.instanceof=I,e.reservedTagList=E,document.register=document.registerElement,e.hasNative=w,e.useNative=x}(window.CustomElements),function(e){function t(e){return"link"===e.localName&&e.getAttribute("rel")===n}var n=e.IMPORT_LINK_TYPE,i={selectors:["link[rel="+n+"]"],map:{link:"parseLink"},parse:function(e){if(!e.__parsed){e.__parsed=!0;var t=e.querySelectorAll(i.selectors);o(t,function(e){i[i.map[e.localName]](e)}),CustomElements.upgradeDocument(e),CustomElements.observeDocument(e)}},parseLink:function(e){t(e)&&this.parseImport(e)},parseImport:function(e){e.import&&i.parse(e.import)}},o=Array.prototype.forEach.call.bind(Array.prototype.forEach);e.parser=i,e.IMPORT_LINK_TYPE=n}(window.CustomElements),function(e){function t(){CustomElements.parser.parse(document),CustomElements.upgradeDocument(document),CustomElements.ready=!0,setTimeout(function(){CustomElements.readyTime=Date.now(),window.HTMLImports&&(CustomElements.elapsed=CustomElements.readyTime-HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0})),window.HTMLImports&&(HTMLImports.__importsParsingHook=function(e){CustomElements.parser.parse(e.import)})})}if("function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n},window.CustomEvent.prototype=window.Event.prototype),"complete"===document.readyState||e.flags.eager)t();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var n=window.HTMLImports&&!HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(n,t)}else t()}(window.CustomElements),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("ellipsis-utils"),require("ellipsis-platform"),require("./widget.factory")):"function"==typeof define&&define.amd?define(["ellipsis-utils","ellipsis-platform","./widget.factory"],t):e.returnExports=t()}(this,function(){function e(e,t){if(null===t)throw new Error("Error: render requires a template provider to be set");if("undefined"==typeof e)throw new Error("Error: render requires an options object");if("undefined"==typeof e.template&&"undefined"==typeof e.templateStr)throw new Error("Error: template name or template string is required");e.model=e.model||{};var n={};return e.context?n[e.context]=e.model:n=e.model,n}function t(e,t){if(e.template)return e.template;if(e.templateStr){var i="str_"+n(8),o=t.compile(e.templateStr,i);return t.loadSource(o),i}return null}function n(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="",i=e;i>0;--i)n+=t[Math.round(Math.random()*(t.length-1))];return n}function i(e,t,n,i){var o=i?$(e).find(t):$(e).selfFind(t);o&&o.length>0&&$.widget.instantiateUIElements(o,n)}function o(e,t){var n=$.widget.definitions;n&&n.length&&n.forEach(function(n){var i=t?$(e).find(n.tagName):$(e).selfFind(n.tagName);i&&i.length>0&&$.widget.instantiateCustomDefinitionElements(i,n.name)})}function r(e,t){void 0===t&&(t=!0);var n={};return $.each(e.attributes,function(e,i){var o=i.name,r=i.value;if(!s(o)){var a=/data-/;a.test(o)&&(o=o.replace("data-","")),t&&"false"!==t?"template"!==o?n[o.toCamelCase()]=r.toCamelCase():n[o]=r:n[o.toCamelCase()]=r}}),n}function s(e){var t=/href|tcmuri|rowspan|colspan|class|nowrap|cellpadding|cellspacing/;return t.test(e)}function a(e,t){var n=e.replace(/HTML/g,"").replace(/Element/g,"");return n=n.toLowerCase(),t.extends=n,t}var l=$.touch||{},c=$.transit||{},u={$providers:{template:window.dust||{},device:l.device||{},mq:l.mq||{},transforms:c.transforms||{},location:function(e){window.location=e},utils:$.utils||{}},$customElements:!1,mqMaxWidth:$.touch.mqMaxWidth||1024};window.ellipsis=window.ellipsis||{},$.extend($.Widget.prototype.options,u);var d={containerSelector:'[data-role="container"]',$containerSelector:"ui-container",drawerClass:"touch-ui-drawer",drawerElement:'<div class="touch-ui-drawer"></div>',$drawerElement:"<touch-ui-drawer></touch-ui-drawer>",touchMenuClass:"touch-ui-menu",touchDropdownClass:"touch-ui-dropdown",menuElement:'<ul class="ui-menu"></ul>',$menuElement:"<ui-menu></ui-menu>",touchMenuElement:'<ul class="touch-ui-menu"></ul>',$touchMenuElement:"<touch-ui-menu></touch-ui-menu>",menuClass:"ui-menu",listItem:"li",$listItem:"menu-item",listItemElement:"<li></li>",$listItemElement:"<menu-item></menu-item>",dropdownClass:"ui-dropdown",dropdownElement:'<ul class="ui-dropdown"></ul>',$dropdownElement:"<ui-dropdown></ui-dropdown>",searchClass:"ui-search",searchRole:'[data-role="search"]',$searchRole:'[role="search"]',overlayElement:'<div data-role="overlay"></div>',$overlayElement:"<ui-overlay></ui-overlay>",hardwareAcceleratedClass:"ui-hardware-accelerated",leftBoxShadowClass:"ui-left-box-shadow",fixedToggleContainerClass:"ui-fixed-toggle-container",overflowContainerClass:"ui-overflow-container",toggleSelector:'[data-role="toggle"]',$toggleSelector:"ui-toggle",loadingContainer:".ui-loading-container",loading:".ui-loading",loadingDelay:300,modalElement:'<div class="ui-modal"></div>',$modalElement:"<ui-modal></ui-modal>",modalClass:"ui-modal",modal:null,modalOpacity:.4,modalZIndex:999,click:"touchclick",hover:"touchhover",$elements:["ui-container","ui-overlay","ui-modal","ui-menu","menu-item","ui-brand","ui-search","ui-toggle","ui-collapse","menu-item-dropdown","menu-item-search","menu-divider","grid-row","grid-columns","ui-select","ui-input-addon","ui-input-icon","ui-loading","ui-notification","ui-slide-notification","ui-flex-grid","grid-item","ui-flex-table","ui-dropdown","ui-media-object","ui-box","ui-breadcrumb","breadcrumb-item","ui-menu-tab","ui-flex-list","ui-flex-gallery","ui-flex-form","form-item","ui-badge","ui-semantic-label","ui-semantic-checkbox","ui-social","social-icon","ui-flex-container","touch-ui-drawer","touch-ui-menu","touch-ui-dropdown","touch-ui-toggle","touch-ui-brand"]};return $.Widget.prototype._data=$.Widget.prototype._data||{},$.extend($.Widget.prototype._data,d),$.Widget.prototype._getCreateEventData=function(){this._data=$.widget.extend({},this._data),$.data(this.element[0],"custom-"+this.widgetName,this.widgetName),this._onCreateEventData()},$.Widget.prototype._onCreateEventData=$.noop,$.Widget.prototype._transitions=function(e,t,n){return t=t||{},t==={}&&(t.duration=300,t.preset="fadeIn"),"none"===t.preset?void e.hide():void e.transition(t,function(){n&&n.call(e[0])})},$.Widget.prototype._render=function(n,i,o){var r=$.Widget.prototype.options.$providers.template,s=e(i,r),a=t(i,r);r.render(a,s,function(e,t){var i=t;n.html(i),o&&o(e,i)})},$.Widget.prototype._renderTemplate=function(n,i){n.parse=void 0!==n.parse?n.parse:!0;var o=$.Widget.prototype.options.$providers.template,r=e(n,o),s=t(n,o);o.render(s,r,function(e,t){var o=t,r=n.parse?$.parseHTML(o):o;i&&i(e,r)})},$.Widget.prototype._renderFragment=function(n,i,o){var r=$.Widget.prototype.options.$providers.template,s=e(i,r),a=t(i,r);r.render(a,s,function(e,t){var i=t.replace(/<ui-template(.*?)>/g,"").replace(/<\/ui-template>/g,"");n.html(i),o&&o(e,i)})},$.Widget.prototype._DOMParser=function(e){return(new DOMParser).parseFromString(e,"text/html")},$.Widget.prototype._getData=function(e){return sessionStorage.getItem(e)},$.Widget.prototype._setData=function(e,t){sessionStorage.setItem(e,t)},$.Widget.prototype._utils=$.Widget.prototype.options.$providers.utils||{},$.Widget.prototype._mode=function(){return this._support.device.viewport.width>this.options.mqMaxWidth?"desktop":"touch"},$.Widget.prototype._offset=function(e){var t=curtop=0;if(e.offsetParent)do t+=e.offsetLeft,curtop+=e.offsetTop;while(e=e.offsetParent);return{top:curtop,left:t}},$.Widget.prototype._preloadImages=function(e,t){var n=[],i={},o={},r=e.find("img").not("[data-src]"),s=r.length,a=0;return 0===s?(t&&(i.message="No images found in element",t(i,null)),!1):($.each(r,function(e,i){var r=new Image;$(r).bind("load",function(){a++,n.push(r),a===s&&t&&(o.images=n,o.length=a,t(null,o))}),r.src=i.src}),!0)},$.Widget.prototype._onEventTrigger=function(e,t){var n=$.Event(e);this._trigger(e,n,t)},$.Widget.prototype._scrollTop=function(e,t){"number"!==$.type(e)?e=0:"undefined"==typeof t&&(t="scrollTop"),setTimeout(function(){window.scrollTo(0,e),$(document).trigger(t,{x:0,y:e})},20)},$.Widget.prototype._setHardwareAcceleration=function(e){var t=$.Widget.prototype.options.$providers.transforms;this._data.toggleAcceleration=t.setHardwareAcceleration(e,this._data.hardwareAcceleratedClass)},$.Widget.prototype._resetHardwareAcceleration=function(e){var t=$.Widget.prototype.options.$providers.transforms;t.resetHardwareAcceleration(e,this._data.toggleAcceleration,this._data.hardwareAcceleratedClass)},$.Widget.prototype._setContainerOverflow=function(e){var t=$.Widget.prototype.options.$providers.transforms;this._data.toggleOverflow=t.setContainerOverflow(e,this._data.overflowContainerClass)},$.Widget.prototype._resetContainerOverflow=function(e){var t=$.Widget.prototype.options.$providers.transforms;t.resetContainerOverflow(e,this._data.overflowContainerClass)},$.Widget.prototype._resetContainer=function(e){var t=$.Widget.prototype.options.$providers.transforms;t.resetContainer(e,this._data.leftBoxShadowClass,this._data.fixedToggleContainerClass)},$.Widget.prototype._resetTransition=function(e){var t=$.Widget.prototype.options.$providers.transforms;t.resetTransition(e)},$.Widget.prototype._resetTransform=function(e){var t=$.Widget.prototype.options.$providers.transforms;t.resetTransform(e)},$.Widget.prototype._transform=function(e,t){var n=$.Widget.prototype.options.$providers.transforms;n.transform(e,t)},$.Widget.prototype._3dTransition=function(e,t,n){var i=$.Widget.prototype.options.$providers.transforms;i.transition3d(e,t,n)},$.Widget.prototype._requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},$.Widget.prototype._touch=function(e,t){return e.touch(t)},$.Widget.prototype._support=Object.defineProperties({},{device:{get:function(){return $.Widget.prototype.options.$providers.device},configurable:!1},mq:{get:function(){return $.Widget.prototype.options.$providers.mq},configurable:!1}}),$.Widget.prototype._loadTemplate=function(){throw new Error("Load Template method not implemented for this widget")},$.Widget.prototype._setModal=function(e,t,n){var i=$('<div class="ui-modal"></div>');t.cssClass&&i.addClass(t.cssClass),t.zIndex&&i.css({"z-index":t.zIndex}),this._data.modal=i;var o=t.opacity?t.opacity:this._data.modalOpacity;i.css({opacity:0}),e.append(i),this._transitions(i,{opacity:o,duration:250},function(){n&&n()})},$.Widget.prototype._removeModal=function(e){var t=this,n=this._data.modal;n&&void 0!==n&&this._transitions(n,{opacity:0,duration:250},function(){n.remove(),t._data.modal=null,e&&e()})},$.Widget.prototype._trigger=function(e,t,n){var i,o,r=this.options[e];if(n=n||{},t=$.Event(t),t.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+"."+e).toLowerCase(),t.target=this.element[0],o=t.originalEvent)for(i in o)i in t||(t[i]=o[i]);return this.element.trigger(t,n),!($.isFunction(r)&&r.apply(this.element[0],[t].concat(n))===!1||t.isDefaultPrevented())},$.Widget.prototype._location=function(e){var t=$.Widget.prototype.options.$providers.location;t(e)},$.Widget.prototype._registerElement=function(e,t){"undefined"==typeof t&&(t=HTMLElement.prototype,t._name="HTMLElement");var n=Object.create(t),i={prototype:n};"HTMLElement"===t._name?document.register(e,i):(i=a(t._name,i),document.register(e,i))},$.Widget.prototype._registerElements=function(e){"string"==typeof e?$.Widget.prototype._registerElement(e):e.length>0&&e.forEach(function(e){"string"==typeof e?$.Widget.prototype._registerElement(e):$.Widget.prototype._registerElement(e.name,e.prototype)})},$.Widget.prototype._instantiated=function(e,t){return t===$.data(e,"custom-"+t)},$.Widget.prototype._getAttrs=function(e,t){return $.widget.getOpts(e,t)},$.Widget.prototype.loadTemplate=function(e,t){this._loadTemplate(e,function(e,n){t&&t(e,n)})},$.Widget.prototype.setOptions=function(e){this._setOptions(e)},$.each({show:"fadeIn",hide:"fadeOut"},function(e,t){$.Widget.prototype["_"+e]=function(n,i,o){var r=i?i.event:null;"string"==typeof i&&(i={effect:i});{var s;i?i===!0||"number"==typeof i?t:i.effect||t:e}i=i||{},"number"==typeof i&&(i={duration:i}),s=!$.isEmptyObject(i),i.complete=o,i.delay&&n.delay(i.delay),i.duration||(i.duration=300);var a={};a.duration=i.duration,a.preset=i.effect,$("html").hasClass("no-css3dtransforms")||"none"===i.effect?"show"===r?(n.show(),o&&o()):"hide"===r&&(n.hide(),o&&o()):this._transitions(n,a,o)}}),$.widget.render=function(e,t,n){$.Widget.prototype._render(e,t,n)},$.widget.$providers=function(e){for(var t in e)e.hasOwnProperty(t)&&($.Widget.prototype.options.$providers[t]=e[t])},$.widget.config={options:Object.defineProperties({},{mqMaxWidth:{get:function(){return $.Widget.prototype.options.mqMaxWidth},set:function(e){$.Widget.prototype.options.mqMaxWidth=e}}})},$.widget.customElementsObj=function(){var e="[data-ui]",t=!1;return $("html").hasClass("customelements")&&(e="ui-element",t=!0),{Selector:e,customElements:t}},$.widget.onMutation=function(e){var t=$.widget.customElementsObj(),n=t.Selector,r=t.customElements;$(document).trigger("ellipsis.onMutation",{mutations:e}),e.forEach(function(e){var t=e.addedNodes,s=e.removedNodes;if(t.length>0)i(t,n,r),o(t);else if(s.length>0)try{$(document).tooltip("remove",s)}catch(a){}})},$.widget.instantiateUIElements=function(e,t){$.each(e,function(){var e=$(this).attr(t?"name":"data-ui");void 0!==e&&(e=e.toCamelCase());var n=$(this).attr(t?"camel-case":"data-camel-case");void 0===n&&(n=!0);var i=r(this,n);i.name&&delete i.name,i.ui&&delete i.ui,void 0===e||$.widget.instantiated(this,e)||$(this)[e](i)})},$.widget.instantiateCustomDefinitionElements=function(e,t){$.each(e,function(e,n){var i=$(this).attr("camel-case");void 0===i&&(i=!0);var o=$.widget.instantiated(n,t);if(!o){var s=r(n,i);$(n)[t](s)}})},$.widget.definitions=[],$.widget.register=function(e,t,n,i){var o={};o.name=e,o.tagName=t,void 0===i&&(i=!0);var r=Object.create(n),s={prototype:r};r.attachedCallback=function(){this._attachedCallback&&this._attachedCallback()},r.detachedCallback=function(){this._detachedCallback&&this._detachedCallback()},r.attributeChangedCallback=function(e,t,n){this._attributeChangedCallback&&this._attributeChangedCallback(e,t,n)},"HTMLElement"===n._name?document.register(t,s):(o.tagName='[is="'+t+'"]',s=a(n._name,s),document.register(t,s)),i&&$.widget.definitions.push(o)},$.widget.instantiated=function(e,t){return t===$.data(e,"custom-"+t)},$.widget.registerElement=function(e,t){$.Widget.prototype._registerElement(e,t)},$.widget.registerElements=function(e){$.Widget.prototype._registerElements(e)},$.widget.registerFrameworkElements=function(){var e=$.Widget.prototype._data.$elements;e.forEach(function(e){$.widget.registerElement(e)})},$.widget.registerTemplateElements=function(){$.widget.registerElement("ui-template"),$.widget.registerElement("ui-model")},$.widget.getOpts=function(e,t){return r(e,t)},function(){$.widget.observer=new MutationObserver($.widget.onMutation),$.widget.observer.observe($("body")[0],{childList:!0,subtree:!0}),document.addEventListener("WebComponentsReady",function(){var e=$.widget.customElementsObj(),t=e.Selector;i(document,t,e.customElements,!0),o(document,!0)})}(),$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("./widget")):"function"==typeof define&&define.amd?define(["./widget"],t):e.returnExports=t()}(this,function(e){var t=!1;if(e("html").hasClass("customelements")&&(t=!0),e.widget("ellipsis.element",{_create:function(){this._data.events=[],e.extend(this.options,e.Widget.prototype.options),t&&(this.options.$customElements=!0,this._data.containerSelector=this._data.$containerSelector,this._data.overlayElement=this._data.$overlayElement,this._data.drawerElement=this._data.$drawerElement,this._data.listItem=this._data.$listItem,this._data.listItemElement=this._data.$listItemElement,this._data.menuElement=this._data.$menuElement,this._data.touchMenuElement=this._data.$touchMenuElement,this._data.searchRole=this._data.$searchRole,this._data.dropdownElement=this._data.$dropdownElement,this._data.toggleSelector=this._data.$toggleSelector,this._data.modalElement=this._data.$modalElement),this.__onCreate(),this._onCreate(),this._initElement(),this.__onInit();
var n=this.widgetName+".loaded";e(window).trigger(n,{}),t&&this.__componentCallbacks()},__onCreate:function(){var e=this;this.__initFunc&&this.__initFunc.length&&this.__initFunc.forEach(function(t){t.call(e)})},_onCreate:e.noop,_initElement:e.noop,__onInit:function(){this._events(),this._onInit()},_onInit:e.noop,_events:e.noop,_event:function(t,n,i,o,r){var s={};s.element=t,s.event=n;var a=arguments.length;3===a?(r="function"==typeof i?i:null,o=!1,i=null):4===a&&(r="function"==typeof o?o:null,"boolean"==typeof i?(o=i,i=null):o=!1),s.selector=i,s.unbind=o,s.callback=r;var l=this._data.events;-1===e.inArray(s,l)&&this._data.events.push(s),i?t.on(n,i,function(){var e=[].slice.call(arguments);r&&r.apply(this,e)}):t.on(n,function(){var e=[].slice.call(arguments);r&&r.apply(this,e)})},_unbindEvents:function(t){"undefined"==typeof t&&(t=!1);var n=this._data.events;e.each(n,function(e,i){t?i.selector?i.element.off(i.event,i.selector,i.callback):i.element.off(i.event,i.callback):i.unbind&&(i.selector?i.element.off(i.event,i.selector,i.callback):i.element.off(i.event,i.callback),n.splice(e,1))}),t&&this._onUnbindEvents()},_onUnbindEvents:e.noop,_showLoader:function(t){"undefined"==typeof t&&(t={});var n=e("body");n.loading(t)},_hideLoader:function(){var t=e("body");t.loading("hide")},_notify:function(t,n,i,o){var r={};r.cssClass=t,r.message=n,r.terminate=i,r.terminateDelay=o,this._notification(e("body"),r)},_notification:function(e,t,n){"function"==typeof t?t={}:t||(t={}),t.inline=t.inline||!1,t.terminateTimeout=t.terminateTimeout||1e3,t.terminateDelay=t.terminateDelay||1e3,t.cssClass=t.cssClass||"info",t.message=t.message||"processing...",t.terminate=t.terminate||!1,e.notification(t),e.notification("show"),n&&n()},_notificationLabel:function(t,n){if(!this._data.notificationLabel){t=t||{},t.cssClass=t.cssClass||"info",t.message=t.message||"message...";var i=e('<div class="ui-semantic-label '+t.cssClass+'">'+t.message+"</div>");t.inline=!0,this._data.notificationLabel=i,this.element.append(i),this._notification(i,t,n)}},_killNotificationLabel:function(){this._data.notificationLabel&&(this._data.notificationLabel.remove(),this._data.notificationLabel=null)},_window:function(t,n){function i(){e(window).on("window.hide",function(){try{r[0].remove()}catch(e){r.remove()}o()})}function o(){e(window).off("window.hide",function(){try{r[0].remove()}catch(e){r.remove()}o()})}t.window=t.window||{},t.template=t.template||"ui-window",t.window.modal=t.window.modal||!0,t.window.animationIn=t.window.animationIn||"none",t.context=t.context||"model";var r=e("<div data-window></div>"),s=e("body");s.append(r);var a=this.options.$customElements?"ui-window":".ui-window";this._render(r,t,function(){var e=r.find(a);e.window(t.window),n&&n(null,e),i()})},_getWindowDimensions:function(e,t){var n={height:t,width:e},i=this._support.device.viewport;return i.height<t&&(n.height=parseInt(.8*i.height)),i.width<e&&(n.width=parseInt(.7*i.width)),n},_destroy:function(){this._unbindEvents(!0),this.__onDispose(),this._onDestroy(),e.removeData(this.element[0],"custom-"+this.widgetName)},__onDispose:function(){var e=this;this.__disposeFunc&&this.__disposeFunc.length&&this.__disposeFunc.forEach(function(t){t.call(e)})},__componentCallbacks:function(){var e=this.element[0],t=this;e._attributeChangedCallback=function(e,n,i){t._attributeChangedCallback(e,n,i)},e._attachedCallback=function(){t._attachedCallback()},e._detachedCallback=function(){t._detachedCallback()}},_attachedCallback:e.noop,_detachedCallback:e.noop,_attributeChangedCallback:e.noop,_dispose:e.noop,_onDestroy:e.noop}),e.element=function(n,i,o,r,s){var a,l=null,c=null,u=arguments.length;if(2>u)throw"Error: Element requires a minimum of two parameter types: string name and a singleton for the prototype";if(2===u){if(s=i,"object"==typeof n)throw"Error: Element requires a string name parameter";if("object"!=typeof i)throw"Error: Element requires a singleton for the prototype";i=n,a=e.ellipsis.element,r=null}else if(3===u)if(s=o,"object"==typeof n){if("string"!=typeof i)throw"Error: Element requires a string name parameter";if("object"!=typeof o)throw"Error: Element requires a singleton for the prototype";c=n,a=e.ellipsis.element,r=null}else{if("object"!=typeof o)throw"Error: Element requires a singleton for the prototype";"string"==typeof i?(l=i,a=e.ellipsis.element,r=null):r=i,i=n}else if(4===u)if(s=r,"object"==typeof n){if(c=n,"string"!=typeof i)throw"Error: Element requires a string name parameter";"string"==typeof o?(l=o,a=e.ellipsis.element,r=null):r=o}else r=o,l=i,i=n;else c=n,l=o;if(r){var d=[],p=[];e.utils.array.isArray(r)?(a=function(){},a._childConstructors=[],r.forEach(function(t){t.prototype.__initFunc&&t.prototype.__initFunc.length>0&&(d=d.concat(t.prototype.__initFunc)),t.prototype.__disposeFunc&&t.prototype.__disposeFunc.length>0&&(p=p.concat(t.prototype.__disposeFunc)),e.extend(a.prototype,t.prototype,e.ellipsis.element.prototype),d.push(t.prototype._initElement),p.push(t.prototype._dispose)}),d.length>0&&(s.__initFunc=d),p.length>0&&(s.__disposeFunc=p)):(r.prototype._initElement?(a=r,a.prototype.__initFunc&&a.prototype.__initFunc.length>0&&(d=d.concat(a.prototype.__initFunc)),a.prototype.__disposeFunc&&a.prototype.__disposeFunc.length>0&&(p=p.concat(a.prototype.__disposeFunc)),d.push(a.prototype._initElement),p.push(a.prototype._dispose)):(a=function(){},a._childConstructors=[],e.extend(a.prototype,r.prototype,e.ellipsis.element.prototype)),d.length>0&&(s.__initFunc=d),p.length>0&&(s.__disposeFunc=p))}if(e.widget(i,a,s),t){l||(l=i.replace(".","-"));var f=i.split(".")[1];if(c)n._id=f,n._tag=l;else{var h=HTMLElement.prototype;h._name="HTMLElement",h._id=f,h._tag=l,c=h}e.widget.register(f,l,c)}},t){e.element.custom=!0;try{e.widget.registerFrameworkElements()}catch(n){}e.widget.registerElement("ui-element")}try{e.widget.registerTemplateElements()}catch(n){}for(var i in e.widget)e.element[i]=e.widget[i];return e}),function(global){"use strict";function detectObjectObserve(){function e(e){t=e}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var t=[],n={},i=[];return Object.observe(n,e),Array.observe(i,e),n.id=1,n.id=2,delete n.id,i.push(1,2),i.length=0,Object.deliverChangeRecords(e),5!==t.length?!1:"add"!=t[0].type||"update"!=t[1].type||"delete"!=t[2].type||"splice"!=t[3].type||"splice"!=t[4].type?!1:(Object.unobserve(n,e),Array.unobserve(i,e),!0)}function detectEval(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;if(navigator.getDeviceStorage)return!1;try{var e=new Function("","return true;");return e()}catch(t){return!1}}function isIndex(e){return+e===e>>>0}function toNumber(e){return+e}function isObject(e){return e===Object(e)}function areSameValue(e,t){return e===t?0!==e||1/e===1/t:numberIsNaN(e)&&numberIsNaN(t)?!0:e!==e&&t!==t}function getPathCharType(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&122>=t||t>=65&&90>=t?"ident":t>=49&&57>=t?"number":"else"}function noop(){}function parsePath(e){function t(){if(!(u>=e.length)){var t=e[u+1];return"inSingleQuote"==d&&"'"==t||"inDoubleQuote"==d&&'"'==t?(u++,i=t,p.append(),!0):void 0}}for(var n,i,o,r,s,a,l,c=[],u=-1,d="beforePath",p={push:function(){void 0!==o&&(c.push(o),o=void 0)},append:function(){void 0===o?o=i:o+=i}};d;)if(u++,n=e[u],"\\"!=n||!t(d)){if(r=getPathCharType(n),l=pathStateMachine[d],s=l[r]||l["else"]||"error","error"==s)return;if(d=s[0],a=p[s[1]]||noop,i=void 0===s[2]?n:s[2],a(),"afterPath"===d)return c}}function isIdent(e){return identRegExp.test(e)}function Path(e,t){if(t!==constructorIsPrivate)throw Error("Use Path.get to retrieve path objects");for(var n=0;n<e.length;n++)this.push(String(e[n]));hasEval&&this.length&&(this.getValueFrom=this.compiledGetValueFromFn())}function getPath(e){if(e instanceof Path)return e;if((null==e||0==e.length)&&(e=""),"string"!=typeof e){if(isIndex(e.length))return new Path(e,constructorIsPrivate);e=String(e)}var t=pathCache[e];if(t)return t;var n=parsePath(e);if(!n)return invalidPath;var t=new Path(n,constructorIsPrivate);return pathCache[e]=t,t}function formatAccessor(e){return isIndex(e)?"["+e+"]":'["'+e.replace(/"/g,'\\"')+'"]'}function dirtyCheck(e){for(var t=0;MAX_DIRTY_CHECK_CYCLES>t&&e.check_();)t++;return testingExposeCycleCount&&(global.dirtyCheckCycleCount=t),t>0}function objectIsEmpty(e){for(var t in e)return!1;return!0}function diffIsEmpty(e){return objectIsEmpty(e.added)&&objectIsEmpty(e.removed)&&objectIsEmpty(e.changed)}function diffObjectFromOldObject(e,t){var n={},i={},o={};for(var r in t){var s=e[r];(void 0===s||s!==t[r])&&(r in e?s!==t[r]&&(o[r]=s):i[r]=void 0)}for(var r in e)r in t||(n[r]=e[r]);return Array.isArray(e)&&e.length!==t.length&&(o.length=e.length),{added:n,removed:i,changed:o}}function runEOMTasks(){if(!eomTasks.length)return!1;for(var e=0;e<eomTasks.length;e++)eomTasks[e]();return eomTasks.length=0,!0}function newObservedObject(){function e(e){t&&t.state_===OPENED&&!i&&t.check_(e)}var t,n,i=!1,o=!0;return{open:function(n){if(t)throw Error("ObservedObject in use");o||Object.deliverChangeRecords(e),t=n,o=!1},observe:function(t,i){n=t,i?Array.observe(n,e):Object.observe(n,e)},deliver:function(t){i=t,Object.deliverChangeRecords(e),i=!1},close:function(){t=void 0,Object.unobserve(n,e),observedObjectCache.push(this)}}}function getObservedObject(e,t,n){var i=observedObjectCache.pop()||newObservedObject();return i.open(e),i.observe(t,n),i}function newObservedSet(){function e(t,r){t&&(t===i&&(o[r]=!0),a.indexOf(t)<0&&(a.push(t),Object.observe(t,n)),e(Object.getPrototypeOf(t),r))}function t(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.object!==i||o[n.name]||"setPrototype"===n.type)return!1}return!0}function n(n){if(!t(n)){for(var i,o=0;o<s.length;o++)i=s[o],i.state_==OPENED&&i.iterateObjects_(e);for(var o=0;o<s.length;o++)i=s[o],i.state_==OPENED&&i.check_()}}var i,o,r=0,s=[],a=[],l={object:void 0,objects:a,open:function(t,n){i||(i=n,o={}),s.push(t),r++,t.iterateObjects_(e)},close:function(){if(r--,!(r>0)){for(var e=0;e<a.length;e++)Object.unobserve(a[e],n),Observer.unobservedCount++;s.length=0,a.length=0,i=void 0,o=void 0,observedSetCache.push(this)}}};return l}function getObservedSet(e,t){return lastObservedSet&&lastObservedSet.object===t||(lastObservedSet=observedSetCache.pop()||newObservedSet(),lastObservedSet.object=t),lastObservedSet.open(e,t),lastObservedSet}function Observer(){this.state_=UNOPENED,this.callback_=void 0,this.target_=void 0,this.directObserver_=void 0,this.value_=void 0,this.id_=nextObserverId++}function addToAll(e){Observer._allObserversCount++,collectObservers&&allObservers.push(e)}function removeFromAll(){Observer._allObserversCount--}function ObjectObserver(e){Observer.call(this),this.value_=e,this.oldObject_=void 0}function ArrayObserver(e){if(!Array.isArray(e))throw Error("Provided object is not an Array");ObjectObserver.call(this,e)}function PathObserver(e,t){Observer.call(this),this.object_=e,this.path_=getPath(t),this.directObserver_=void 0}function CompoundObserver(e){Observer.call(this),this.reportChangesOnOpen_=e,this.value_=[],this.directObserver_=void 0,this.observed_=[]}function identFn(e){return e}function ObserverTransform(e,t,n,i){this.callback_=void 0,this.target_=void 0,this.value_=void 0,this.observable_=e,this.getValueFn_=t||identFn,this.setValueFn_=n||identFn,this.dontPassThroughSet_=i}function diffObjectFromChangeRecords(e,t,n){for(var i={},o={},r=0;r<t.length;r++){var s=t[r];expectedRecordTypes[s.type]?(s.name in n||(n[s.name]=s.oldValue),"update"!=s.type&&("add"!=s.type?s.name in i?(delete i[s.name],delete n[s.name]):o[s.name]=!0:s.name in o?delete o[s.name]:i[s.name]=!0)):(console.error("Unknown changeRecord type: "+s.type),console.error(s))}for(var a in i)i[a]=e[a];for(var a in o)o[a]=void 0;var l={};for(var a in n)if(!(a in i||a in o)){var c=e[a];n[a]!==c&&(l[a]=c)}return{added:i,removed:o,changed:l}}function newSplice(e,t,n){return{index:e,removed:t,addedCount:n}}function ArraySplice(){}function calcSplices(e,t,n,i,o,r){return arraySplice.calcSplices(e,t,n,i,o,r)}function intersect(e,t,n,i){return n>t||e>i?-1:t==n||i==e?0:n>e?i>t?t-n:i-n:t>i?i-e:t-e}function mergeSplice(e,t,n,i){for(var o=newSplice(t,n,i),r=!1,s=0,a=0;a<e.length;a++){var l=e[a];if(l.index+=s,!r){var c=intersect(o.index,o.index+o.removed.length,l.index,l.index+l.addedCount);if(c>=0){e.splice(a,1),a--,s-=l.addedCount-l.removed.length,o.addedCount+=l.addedCount-c;var u=o.removed.length+l.removed.length-c;if(o.addedCount||u){var n=l.removed;if(o.index<l.index){var d=o.removed.slice(0,l.index-o.index);Array.prototype.push.apply(d,n),n=d}if(o.index+o.removed.length>l.index+l.addedCount){var p=o.removed.slice(l.index+l.addedCount-o.index);Array.prototype.push.apply(n,p)}o.removed=n,l.index<o.index&&(o.index=l.index)}else r=!0}else if(o.index<l.index){r=!0,e.splice(a,0,o),a++;var f=o.addedCount-o.removed.length;l.index+=f,s+=f}}}r||e.push(o)}function createInitialSplices(e,t){for(var n=[],i=0;i<t.length;i++){var o=t[i];switch(o.type){case"splice":mergeSplice(n,o.index,o.removed.slice(),o.addedCount);break;case"add":case"update":case"delete":if(!isIndex(o.name))continue;var r=toNumber(o.name);if(0>r)continue;mergeSplice(n,r,[o.oldValue],1);break;default:console.error("Unexpected record type: "+JSON.stringify(o))}}return n}function projectArraySplices(e,t){var n=[];return createInitialSplices(e,t).forEach(function(t){return 1==t.addedCount&&1==t.removed.length?void(t.removed[0]!==e[t.index]&&n.push(t)):void(n=n.concat(calcSplices(e,t.index,t.index+t.addedCount,t.removed,0,t.removed.length)))}),n}var testingExposeCycleCount=global.testingExposeCycleCount,hasObserve=detectObjectObserve(),hasEval=detectEval(),numberIsNaN=global.Number.isNaN||function(e){return"number"==typeof e&&global.isNaN(e)},createObject="__proto__"in{}?function(e){return e}:function(e){var t=e.__proto__;if(!t)return e;var n=Object.create(t);return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),n},identStart="[$_a-zA-Z]",identPart="[$_a-zA-Z0-9]",identRegExp=new RegExp("^"+identStart+"+"+identPart+"*$"),pathStateMachine={beforePath:{ws:["beforePath"],ident:["inIdent","append"],"[":["beforeElement"],eof:["afterPath"]},inPath:{ws:["inPath"],".":["beforeIdent"],"[":["beforeElement"],eof:["afterPath"]},beforeIdent:{ws:["beforeIdent"],ident:["inIdent","append"]},inIdent:{ident:["inIdent","append"],0:["inIdent","append"],number:["inIdent","append"],ws:["inPath","push"],".":["beforeIdent","push"],"[":["beforeElement","push"],eof:["afterPath","push"]},beforeElement:{ws:["beforeElement"],0:["afterZero","append"],number:["inIndex","append"],"'":["inSingleQuote","append",""],'"':["inDoubleQuote","append",""]},afterZero:{ws:["afterElement","push"],"]":["inPath","push"]},inIndex:{0:["inIndex","append"],number:["inIndex","append"],ws:["afterElement"],"]":["inPath","push"]},inSingleQuote:{"'":["afterElement"],eof:["error"],"else":["inSingleQuote","append"]},inDoubleQuote:{'"':["afterElement"],eof:["error"],"else":["inDoubleQuote","append"]},afterElement:{ws:["afterElement"],"]":["inPath","push"]}},constructorIsPrivate={},pathCache={};Path.get=getPath,Path.prototype=createObject({__proto__:[],valid:!0,toString:function(){for(var e="",t=0;t<this.length;t++){var n=this[t];e+=isIdent(n)?t?"."+n:n:formatAccessor(n)}return e},getValueFrom:function(e){for(var t=0;t<this.length;t++){if(null==e)return;e=e[this[t]]}return e},iterateObjects:function(e,t){for(var n=0;n<this.length;n++){if(n&&(e=e[this[n-1]]),!isObject(e))return;t(e,this[0])}},compiledGetValueFromFn:function(){var e="",t="obj";e+="if (obj != null";for(var n,i=0;i<this.length-1;i++)n=this[i],t+=isIdent(n)?"."+n:formatAccessor(n),e+=" &&\n     "+t+" != null";e+=")\n";var n=this[i];return t+=isIdent(n)?"."+n:formatAccessor(n),e+="  return "+t+";\nelse\n  return undefined;",new Function("obj",e)},setValueFrom:function(e,t){if(!this.length)return!1;for(var n=0;n<this.length-1;n++){if(!isObject(e))return!1;e=e[this[n]]}return isObject(e)?(e[this[n]]=t,!0):!1}});var invalidPath=new Path("",constructorIsPrivate);invalidPath.valid=!1,invalidPath.getValueFrom=invalidPath.setValueFrom=function(){};var MAX_DIRTY_CHECK_CYCLES=1e3,eomTasks=[],runEOM=hasObserve?function(){var e={pingPong:!0},t=!1;return Object.observe(e,function(){runEOMTasks(),t=!1}),function(n){eomTasks.push(n),t||(t=!0,e.pingPong=!e.pingPong)}}():function(){return function(e){eomTasks.push(e)}}(),observedObjectCache=[],observedSetCache=[],lastObservedSet,UNOPENED=0,OPENED=1,CLOSED=2,RESETTING=3,nextObserverId=1;Observer.prototype={open:function(e,t){if(this.state_!=UNOPENED)throw Error("Observer has already been opened.");return addToAll(this),this.callback_=e,this.target_=t,this.connect_(),this.state_=OPENED,this.value_},close:function(){this.state_==OPENED&&(removeFromAll(this),this.disconnect_(),this.value_=void 0,this.callback_=void 0,this.target_=void 0,this.state_=CLOSED)},deliver:function(){this.state_==OPENED&&dirtyCheck(this)},report_:function(e){try{this.callback_.apply(this.target_,e)}catch(t){Observer._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+(t.stack||t))}},discardChanges:function(){return this.check_(void 0,!0),this.value_}};var collectObservers=!hasObserve,allObservers;Observer._allObserversCount=0,collectObservers&&(allObservers=[]);var runningMicrotaskCheckpoint=!1,hasDebugForceFullDelivery=hasObserve&&hasEval&&function(){try{return eval("%RunMicrotasks()"),!0}catch(ex){return!1}}();global.Platform=global.Platform||{},global.Platform.performMicrotaskCheckpoint=function(){if(!runningMicrotaskCheckpoint){if(hasDebugForceFullDelivery)return void eval("%RunMicrotasks()");if(collectObservers){runningMicrotaskCheckpoint=!0;var cycles=0,anyChanged,toCheck;do{cycles++,toCheck=allObservers,allObservers=[],anyChanged=!1;for(var i=0;i<toCheck.length;i++){var observer=toCheck[i];observer.state_==OPENED&&(observer.check_()&&(anyChanged=!0),allObservers.push(observer))}runEOMTasks()&&(anyChanged=!0)}while(MAX_DIRTY_CHECK_CYCLES>cycles&&anyChanged);testingExposeCycleCount&&(global.dirtyCheckCycleCount=cycles),runningMicrotaskCheckpoint=!1}}},collectObservers&&(global.Platform.clearObservers=function(){allObservers=[]}),ObjectObserver.prototype=createObject({__proto__:Observer.prototype,arrayObserve:!1,connect_:function(){hasObserve?this.directObserver_=getObservedObject(this,this.value_,this.arrayObserve):this.oldObject_=this.copyObject(this.value_)},copyObject:function(e){var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=e[n];return Array.isArray(e)&&(t.length=e.length),t},check_:function(e){var t,n;if(hasObserve){if(!e)return!1;n={},t=diffObjectFromChangeRecords(this.value_,e,n)}else n=this.oldObject_,t=diffObjectFromOldObject(this.value_,this.oldObject_);return diffIsEmpty(t)?!1:(hasObserve||(this.oldObject_=this.copyObject(this.value_)),this.report_([t.added||{},t.removed||{},t.changed||{},function(e){return n[e]}]),!0)},disconnect_:function(){hasObserve?(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},deliver:function(){this.state_==OPENED&&(hasObserve?this.directObserver_.deliver(!1):dirtyCheck(this))},discardChanges:function(){return this.directObserver_?this.directObserver_.deliver(!0):this.oldObject_=this.copyObject(this.value_),this.value_}}),ArrayObserver.prototype=createObject({__proto__:ObjectObserver.prototype,arrayObserve:!0,copyObject:function(e){return e.slice()},check_:function(e){var t;if(hasObserve){if(!e)return!1;t=projectArraySplices(this.value_,e)}else t=calcSplices(this.value_,0,this.value_.length,this.oldObject_,0,this.oldObject_.length);return t&&t.length?(hasObserve||(this.oldObject_=this.copyObject(this.value_)),this.report_([t]),!0):!1}}),ArrayObserver.applySplices=function(e,t,n){n.forEach(function(n){for(var i=[n.index,n.removed.length],o=n.index;o<n.index+n.addedCount;)i.push(t[o]),o++;Array.prototype.splice.apply(e,i)})},PathObserver.prototype=createObject({__proto__:Observer.prototype,get path(){return this.path_},connect_:function(){hasObserve&&(this.directObserver_=getObservedSet(this,this.object_)),this.check_(void 0,!0)},disconnect_:function(){this.value_=void 0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},iterateObjects_:function(e){this.path_.iterateObjects(this.object_,e)},check_:function(e,t){var n=this.value_;return this.value_=this.path_.getValueFrom(this.object_),t||areSameValue(this.value_,n)?!1:(this.report_([this.value_,n,this]),!0)},setValue:function(e){this.path_&&this.path_.setValueFrom(this.object_,e)}});var observerSentinel={};CompoundObserver.prototype=createObject({__proto__:Observer.prototype,connect_:function(){if(hasObserve){for(var e,t=!1,n=0;n<this.observed_.length;n+=2)if(e=this.observed_[n],e!==observerSentinel){t=!0;break}t&&(this.directObserver_=getObservedSet(this,e))}this.check_(void 0,!this.reportChangesOnOpen_)},disconnect_:function(){for(var e=0;e<this.observed_.length;e+=2)this.observed_[e]===observerSentinel&&this.observed_[e+1].close();this.observed_.length=0,this.value_.length=0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},addPath:function(e,t){if(this.state_!=UNOPENED&&this.state_!=RESETTING)throw Error("Cannot add paths once started.");var t=getPath(t);if(this.observed_.push(e,t),this.reportChangesOnOpen_){var n=this.observed_.length/2-1;this.value_[n]=t.getValueFrom(e)}},addObserver:function(e){if(this.state_!=UNOPENED&&this.state_!=RESETTING)throw Error("Cannot add observers once started.");if(this.observed_.push(observerSentinel,e),this.reportChangesOnOpen_){var t=this.observed_.length/2-1;this.value_[t]=e.open(this.deliver,this)}},startReset:function(){if(this.state_!=OPENED)throw Error("Can only reset while open");this.state_=RESETTING,this.disconnect_()},finishReset:function(){if(this.state_!=RESETTING)throw Error("Can only finishReset after startReset");return this.state_=OPENED,this.connect_(),this.value_},iterateObjects_:function(e){for(var t,n=0;n<this.observed_.length;n+=2)t=this.observed_[n],t!==observerSentinel&&this.observed_[n+1].iterateObjects(t,e)},check_:function(e,t){for(var n,i=0;i<this.observed_.length;i+=2){var o,r=this.observed_[i],s=this.observed_[i+1];if(r===observerSentinel){var a=s;o=this.state_===UNOPENED?a.open(this.deliver,this):a.discardChanges()}else o=s.getValueFrom(r);t?this.value_[i/2]=o:areSameValue(o,this.value_[i/2])||(n=n||[],n[i/2]=this.value_[i/2],this.value_[i/2]=o)}return n?(this.report_([this.value_,n,this.observed_]),!0):!1}}),ObserverTransform.prototype={open:function(e,t){return this.callback_=e,this.target_=t,this.value_=this.getValueFn_(this.observable_.open(this.observedCallback_,this)),this.value_},observedCallback_:function(e){if(e=this.getValueFn_(e),!areSameValue(e,this.value_)){var t=this.value_;this.value_=e,this.callback_.call(this.target_,this.value_,t)}},discardChanges:function(){return this.value_=this.getValueFn_(this.observable_.discardChanges()),this.value_},deliver:function(){return this.observable_.deliver()},setValue:function(e){return e=this.setValueFn_(e),!this.dontPassThroughSet_&&this.observable_.setValue?this.observable_.setValue(e):void 0},close:function(){this.observable_&&this.observable_.close(),this.callback_=void 0,this.target_=void 0,this.observable_=void 0,this.value_=void 0,this.getValueFn_=void 0,this.setValueFn_=void 0}};var expectedRecordTypes={add:!0,update:!0,"delete":!0},EDIT_LEAVE=0,EDIT_UPDATE=1,EDIT_ADD=2,EDIT_DELETE=3;ArraySplice.prototype={calcEditDistances:function(e,t,n,i,o,r){for(var s=r-o+1,a=n-t+1,l=new Array(s),c=0;s>c;c++)l[c]=new Array(a),l[c][0]=c;for(var u=0;a>u;u++)l[0][u]=u;for(var c=1;s>c;c++)for(var u=1;a>u;u++)if(this.equals(e[t+u-1],i[o+c-1]))l[c][u]=l[c-1][u-1];else{var d=l[c-1][u]+1,p=l[c][u-1]+1;l[c][u]=p>d?d:p}return l},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,n=e[0].length-1,i=e[t][n],o=[];t>0||n>0;)if(0!=t)if(0!=n){var r,s=e[t-1][n-1],a=e[t-1][n],l=e[t][n-1];r=l>a?s>a?a:s:s>l?l:s,r==s?(s==i?o.push(EDIT_LEAVE):(o.push(EDIT_UPDATE),i=s),t--,n--):r==a?(o.push(EDIT_DELETE),t--,i=a):(o.push(EDIT_ADD),n--,i=l)}else o.push(EDIT_DELETE),t--;else o.push(EDIT_ADD),n--;return o.reverse(),o},calcSplices:function(e,t,n,i,o,r){var s=0,a=0,l=Math.min(n-t,r-o);if(0==t&&0==o&&(s=this.sharedPrefix(e,i,l)),n==e.length&&r==i.length&&(a=this.sharedSuffix(e,i,l-s)),t+=s,o+=s,n-=a,r-=a,n-t==0&&r-o==0)return[];if(t==n){for(var c=newSplice(t,[],0);r>o;)c.removed.push(i[o++]);return[c]}if(o==r)return[newSplice(t,[],n-t)];for(var u=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,n,i,o,r)),c=void 0,d=[],p=t,f=o,h=0;h<u.length;h++)switch(u[h]){case EDIT_LEAVE:c&&(d.push(c),c=void 0),p++,f++;break;case EDIT_UPDATE:c||(c=newSplice(p,[],0)),c.addedCount++,p++,c.removed.push(i[f]),f++;break;case EDIT_ADD:c||(c=newSplice(p,[],0)),c.addedCount++,p++;break;case EDIT_DELETE:c||(c=newSplice(p,[],0)),c.removed.push(i[f]),f++}return c&&d.push(c),d},sharedPrefix:function(e,t,n){for(var i=0;n>i;i++)if(!this.equals(e[i],t[i]))return i;return n},sharedSuffix:function(e,t,n){for(var i=e.length,o=t.length,r=0;n>r&&this.equals(e[--i],t[--o]);)r++;return r},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}};var arraySplice=new ArraySplice;global.Observer=Observer,global.Observer.runEOM_=runEOM,global.Observer.observerSentinel_=observerSentinel,global.Observer.hasObjectObserve=hasObserve,global.ArrayObserver=ArrayObserver,global.ArrayObserver.calculateSplices=function(e,t){return arraySplice.calculateSplices(e,t)},global.ArraySplice=ArraySplice,global.ObjectObserver=ObjectObserver,global.PathObserver=PathObserver,global.CompoundObserver=CompoundObserver,global.Path=Path,global.ObserverTransform=ObserverTransform}("undefined"!=typeof global&&global&&"undefined"!=typeof module&&module?global:this||window),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e._utils=e._utils||{},e._utils.forEach=t(),e.returnExports=e._utils.forEach)}(this,function(){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString;return function(n,i,o){if("[object Function]"!==t.call(i))throw new TypeError("iterator must be a function");var r=n.length;if(r===+r)for(var s=0;r>s;s++)i.call(o,n[s],s,n);else for(var a in n)e.call(n,a)&&i.call(o,n[a],a,n)}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("foreach")):"function"==typeof define&&define.amd?define(["foreach"],t):(e._utils.jsonPointer=t(e._utils.forEach),e.returnExports=e._utils.jsonPointer)}(this,function(e){function t(e,n,i){if(3===arguments.length)return t.set(e,n,i);if(2===arguments.length)return t.get(e,n);var o=t.bind(t,e);for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r].bind(o,e));return o}var n=e;return t.get=function(e,n){for(var i,o=t.parse(n);o.length;){if(i=o.shift(),!e.hasOwnProperty(i))throw new Error("Invalid reference token: "+i);e=e[i]}return e},t.set=function(e,n,i){for(var o,r=t.parse(n),s=r[0];r.length>1;)o=r.shift(),s=r[0],e.hasOwnProperty(o)||(e[o]=s.match(/^\d+$/)?[]:{}),e=e[o];return e[s]=i,this},t.remove=function(e,n){var i=t.parse(n),o=i.pop();if(void 0===o)throw new Error('Invalid JSON pointer for remove: "'+n+'"');delete t.get(e,t.compile(i))[o]},t.dict=function(e,n){var i={};return t.walk(e,function(e,t){i[t]=e},n),i},t.walk=function(e,i,o){var r=[];o=o||function(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t||"[object Array]"===t},function s(e){n(e,function(e,n){r.push(String(n)),o(e)?s(e):i(e,t.compile(r)),r.pop()})}(e)},t.has=function(e,n){try{t.get(e,n)}catch(i){return!1}return!0},t.escape=function(e){return e.toString().replace(/~/g,"~0").replace(/\//g,"~1")},t.unescape=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},t.parse=function(e){if(""===e)return[];if("/"!==e.charAt(0))throw new Error("Invalid JSON pointer: "+e);return e.substring(1).split(/\//).map(t.unescape)},t.compile=function(e){return 0===e.length?"":"/"+e.map(t.escape).join("/")},t}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("json-pointer")):"function"==typeof define&&define.amd?define(["json-pointer"],t):(e.Nested=t(e._utils.jsonPointer),e.returnExports=e.Nested)}(this,function(e){function t(e,t,n){return e.has(t)?-1!==e.get(t).indexOf(n):!1}function n(e,t,n){var i=(!e.has(t)&&e.set(t,[]),e.get(t));i.push(n)}function i(e,t,n){var i=e.get(t),o=i.indexOf(n);i.splice(o,1),i.length||e.delete(t)}var o=e,r=Object.create(null),s=new WeakMap,a=function(e){this.callback=e,this.observers=new WeakMap;var t=this;this.handleChangeRecords=function(e){try{var n=e.map(t.transform,t);n=Array.prototype.concat.apply([],n),t.callback(n)}catch(i){r.debug&&console.error(i.stack)}}};a.prototype.transform=function(e){var t=this.observers.get(e.object);return t=t.filter(function(e,t,n){return n.indexOf(e)===t}),t.map(function(t){return t.transform(e)})};var l=function(e,t,n){this.root=e,this.delegate=t,this.callback=t.handleChangeRecords,this.accept=n,this.paths=new WeakMap};return l.prototype.observe=function(e,i,r){if(i||(i=""),r||(r=new WeakMap),!r.has(e)){r.set(e,!0),t(this.delegate.observers,e,this)||(Array.isArray(e)&&!this.accept?Object.observe(e,this.callback,["add","update","delete","splice"]):Object.observe(e,this.callback,this.accept)),n(this.paths,e,i),n(this.delegate.observers,e,this);for(var s in e)"object"==typeof e[s]&&null!==e[s]&&this.observe(e[s],i+"/"+o.escape(s),r)}},l.prototype.unobserve=function(e,n){if(console.log(n),e||(e=this.root),n||(n=""),t(this.delegate.observers,e,this)){i(this.paths,e,n),i(this.delegate.observers,e,this),this.paths.has(e)||Object.unobserve(e,this.callback);for(var r in e)"object"==typeof e[r]&&this.unobserve(e[r],n+"/"+o.escape(r))}},l.prototype.transform=function(e){var t=String(e.name||e.index),n=this.paths.get(e.object)[0]+"/"+o.escape(t),i={root:this.root,path:n};for(var r in e)i[r]=e[r];var s=e.oldValue&&[e.oldValue]||e.removed||[];s.forEach(function(e){if(e&&"object"==typeof e){this.paths.get(e).filter(function(t){return!o.has(this.root,t)||o.get(this.root,t)!==e},this)}},this);var a=e.object[t];if("object"==typeof a){var l=Object.getOwnPropertyDescriptor(e.object,t);l.enumerable===!0?this.observe(a,n):this.unobserve(a,n)}return Object.preventExtensions(i),i},r.observe=function(e,t,n){if(void 0===e)return!1;var i;s.has(t)?i=s.get(t):(i=new a(t),s.set(t,i));var o=i.observers;if(!o.has(e)){var r=new l(e,i,n);r.observe(e)}},r.unobserve=function(e,t){if(s.has(t)){var n=s.get(t);if(n.observers.has(e)){console.log("nested unobserve");var i=n.observers.get(e);i.forEach(function(e){e.unobserve()})}}},r.deliverChangeRecords=function(e){if("function"!=typeof e)throw new TypeError("Callback must be a function, given: "+e);if(s.has(e)){var t=s.get(e);Object.deliverChangeRecords(t.handleChangeRecords)}},r.debug=!1,r}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("observe-js"),require("elliptical-utils"),require("nested-observe")):"function"==typeof define&&define.amd?define(["observe-js","elliptical-utils","nested-observe"],t):e.returnExports=t(e,e.elliptical.utils,e.Nested)}(this,function(e,t,n){function i(){function e(e){t=e}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var t=[],n={},i=[];return Object.observe(n,e),Array.observe(i,e),n.id=1,n.id=2,delete n.id,i.push(1,2),i.length=0,Object.deliverChangeRecords(e),5!==t.length?!1:"add"!=t[0].type||"update"!=t[1].type||"delete"!=t[2].type||"splice"!=t[3].type||"splice"!=t[4].type?!1:(Object.unobserve(n,e),Array.unobserve(i,e),!0)}function o(e,t){var n={},i={},o={};for(var r in t){var s=e[r];
(void 0===s||s!==t[r])&&(r in e?s!==t[r]&&(o[r]=s):i[r]=void 0)}for(var r in e)r in t||(n[r]=e[r]);return Array.isArray(e)&&e.length!==t.length&&(o.length=e.length),{added:n,removed:i,changed:o}}function r(e,t,n){var i=d.pop()||s();return i.open(e),i.observe(t,n),i}function s(){function e(e){t&&t.state_===u&&!i&&t.check_(e)}var t,n,i=!1,o=!0;return{open:function(n){if(t)throw Error("ObservedObject in use");o||Object.deliverChangeRecords(e),t=n,o=!1},observe:function(t,i){n=t,i?Array.observe(n,e):Object.observe(n,e)},deliver:function(t){i=t,Object.deliverChangeRecords(e),i=!1},close:function(){t=void 0,Object.unobserve(n,e),d.push(this)}}}function a(e,t,n){for(var i={},o={},r=0;r<t.length;r++){var s=t[r];p[s.type]?(s.name in n||(n[s.name]=s.oldValue),"update"!=s.type&&("add"!=s.type?s.name in i?(delete i[s.name],delete n[s.name]):o[s.name]=!0:s.name in o?delete o[s.name]:i[s.name]=!0)):(console.error("Unknown changeRecord type: "+s.type),console.error(s))}for(var a in i)i[a]=e[a];for(var a in o)o[a]=void 0;var l={};for(var a in n)if(!(a in i||a in o)){var c=e[a];n[a]!==c&&(l[a]=c)}return{added:i,removed:o,changed:l}}var l=t._,c=i(),u=1,d=[],p={add:!0,update:!0,"delete":!0},f=ObjectObserver.prototype;return ObjectObserver=function(e,t){Observer.call(this),this.value_=e,this.oldObject_=void 0,"undefined"!=typeof t&&(this.__id=t)},ObjectObserver.prototype=f,ObjectObserver.prototype.connect_=function(){c?"undefined"!==this.__id?n.observe(this.value_,this.check_.bind(this)):this.directObserver_=r(this,this.value_,this.arrayObserve):this.oldObject_="undefined"!==this.__id?l.cloneDeep(this.value_):this.copyObject(this.value_)},ObjectObserver.prototype.check_=function(e){if("undefined"!==this.__id){var n;if(c)return e?(n=t.nativeObjDiffReport(this.value_,e),this.callback_.call(this,n),!0):!1;if(l.isEqual(this.value_,this.oldObject_))return!1;var i=this.oldObject_;return this.oldObject_=l.cloneDeep(this.value_),n=t.objDiffReport(this.value_,i,this.__id),this.callback_.call(this,n),!0}var r,s;if(c){if(!e)return!1;s={},r=a(this.value_,e,s)}else s=this.oldObject_,r=o(this.value_,this.oldObject_);return diffIsEmpty(r)?!1:(c||(this.oldObject_=this.copyObject(this.value_)),this.report_([r.added||{},r.removed||{},r.changed||{},function(e){return s[e]}]),!0)},ObjectObserver.prototype.disconnect_=function(){c?"undefined"!==this.__id?n.unobserve(this.value_,function(){}):(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},e.ObjectObserver=ObjectObserver,e}),function(){"use strict";function e(e){for(;e.parentNode;)e=e.parentNode;return"function"==typeof e.getElementById?e:null}function t(e,t,n){var i=e.bindings_;return i||(i=e.bindings_={}),i[t]&&(n[t]?n[t].close():i[t].close()),i[t]=n}function n(e,t,n){return n}function i(e){return null==e?"":e}function o(e,t){e.data=i(t)}function r(e){return function(t){return o(e,t)}}function s(e,t,n,o){return n?void(o?e.setAttribute(t,""):e.removeAttribute(t)):void e.setAttribute(t,i(o))}function a(e,t,n){return function(i){s(e,t,n,i)}}function l(e){switch(e.type){case"checkbox":return b;case"radio":case"select-multiple":case"select-one":return"change";case"range":if(/Trident|MSIE/.test(navigator.userAgent))return"change";default:return"input"}}function c(e,t,n,o){e[t]=(o||i)(n)}function u(e,t,n){return function(i){return c(e,t,i,n)}}function d(){}function p(e,t,n,i){function o(){n.setValue(e[t]),n.discardChanges(),(i||d)(e),Platform.performMicrotaskCheckpoint()}var r=l(e);return e.addEventListener(r,o),{close:function(){e.removeEventListener(r,o),n.close()},observable_:n}}function f(e){return Boolean(e)}function h(t){if(t.form)return g(t.form.elements,function(e){return e!=t&&"INPUT"==e.tagName&&"radio"==e.type&&e.name==t.name});var n=e(t);if(!n)return[];var i=n.querySelectorAll('input[type="radio"][name="'+t.name+'"]');return g(i,function(e){return e!=t&&!e.form})}function m(e){"INPUT"===e.tagName&&"radio"===e.type&&h(e).forEach(function(e){var t=e.bindings_.checked;t&&t.observable_.setValue(!1)})}function v(e,t){var n,o,r,s=e.parentNode;s instanceof HTMLSelectElement&&s.bindings_&&s.bindings_.value&&(n=s,o=n.bindings_.value,r=n.value),e.value=i(t),n&&n.value!=r&&(o.observable_.setValue(n.value),o.observable_.discardChanges(),Platform.performMicrotaskCheckpoint())}function _(e){return function(t){v(e,t)}}var g=Array.prototype.filter.call.bind(Array.prototype.filter);Node.prototype.bind=function(e,t){console.error("Unhandled binding to Node: ",this,e,t)},Node.prototype.bindFinished=function(){};var y=n;Object.defineProperty(Platform,"enableBindingsReflection",{get:function(){return y===t},set:function(e){return y=e?t:n,e},configurable:!0}),Text.prototype.bind=function(e,t,n){if("textContent"!==e)return Node.prototype.bind.call(this,e,t,n);if(n)return o(this,t);var i=t;return o(this,i.open(r(this))),y(this,e,i)},Element.prototype.bind=function(e,t,n){var i="?"==e[e.length-1];if(i&&(this.removeAttribute(e),e=e.slice(0,-1)),n)return s(this,e,i,t);var o=t;return s(this,e,i,o.open(a(this,e,i))),y(this,e,o)};var b;!function(){var e=document.createElement("div"),t=e.appendChild(document.createElement("input"));t.setAttribute("type","checkbox");var n,i=0;t.addEventListener("click",function(){i++,n=n||"click"}),t.addEventListener("change",function(){i++,n=n||"change"});var o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(o),b=1==i?"change":n}(),HTMLInputElement.prototype.bind=function(e,n,o){if("value"!==e&&"checked"!==e)return HTMLElement.prototype.bind.call(this,e,n,o);this.removeAttribute(e);var r="checked"==e?f:i,s="checked"==e?m:d;if(o)return c(this,e,n,r);var a=n,l=p(this,e,a,s);return c(this,e,a.open(u(this,e,r)),r),t(this,e,l)},HTMLTextAreaElement.prototype.bind=function(e,t,n){if("value"!==e)return HTMLElement.prototype.bind.call(this,e,t,n);if(this.removeAttribute("value"),n)return c(this,"value",t);var o=t,r=p(this,"value",o);return c(this,"value",o.open(u(this,"value",i))),y(this,e,r)},HTMLOptionElement.prototype.bind=function(e,t,n){if("value"!==e)return HTMLElement.prototype.bind.call(this,e,t,n);if(this.removeAttribute("value"),n)return v(this,t);var i=t,o=p(this,"value",i);return v(this,i.open(_(this))),y(this,e,o)},HTMLSelectElement.prototype.bind=function(e,n,i){if("selectedindex"===e&&(e="selectedIndex"),"selectedIndex"!==e&&"value"!==e)return HTMLElement.prototype.bind.call(this,e,n,i);if(this.removeAttribute(e),i)return c(this,e,n);var o=n,r=p(this,e,o);return c(this,e,o.open(u(this,e))),t(this,e,r)}}(this),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-platform")):"function"==typeof define&&define.amd?define(["elliptical-platform"],t):e.returnExports=t($)}(this,function(e){var t=e.elliptical.utils,n=t._;return e.elliptical.hasObjectObserve||e.elliptical.startDirtyCheck(),e.element("elliptical.scope",{options:{idProp:"id",dataBind:!0},_initElement:function(){this._data._timeOutId=null,this._data.scopeObserver=null,this._data.scopeId=this.options.idProp,this._data._discard=!1,this.__initScope(),this.options.dataBind&&this.__initScopeObservable()},__initScope:function(){this.$scope={}},__initScopeObservable:function(){var e=this;this._data._timeOutId=setInterval(function(){n.isEmpty(e.$scope)||(clearInterval(e._data._timeOutId),e.__setObservable(),e._onScopeInit(e.__cloneScope()))},500)},__setObservable:function(){var e=this.$scope,t=this,n=this.options.idProp;void 0===n&&(n="id");var i=new ObjectObserver(e,n);i.open(function(e){t.__onScopeChange(e)}),this._data.scopeObserver=i},__destroyObservable:function(){this._data.scopeObserver&&(this._data.scopeObserver.close(),this._data.scopeObserver=null,this.$scope=null)},__resetObservable:function(){this.__destroyObservable(),this.__setObservable()},__cloneScope:function(){return n.cloneDeep(this.$scope)},__cloneObject:function(e){return n.cloneDeep(e)},__scopeLength:function(e){var n="undefined"==typeof e?this.$scope:e;if(t.isPropertyByIndexArray(n,0)){var i=t.objectPropertyByIndex(n,0);return i.length}return-1},__isModelList:function(){return this.__scopeLength()>-1},_removeFromModelListById:function(e){var n=this.$scope,i=this._data.scopeId;t.deleteObjectByIdFromArrayProp(n,i,e)},_selectFromModelListById:function(e){var n=this.$scope,i=this._data.scopeId;return void 0===i&&(i="id"),t.selectObjectByIdFromArrayProp(n,i,e)},_selectFromModelListByObj:function(e){var t,i=this.$scope[Object.keys(this._scope)[0]];return i.forEach(function(i){n.isEqual(e,i)&&(t=i)}),t},_scopeIndexById:function(e){var n=this._data.scopeId;return void 0===n&&(n="id"),t.objectIndexById(this.$scope,e,n)},__recycle:function(){this.__destroyObservable(),this.__setObservable()},__clearWatch:function(){this._data.timeOutId&&clearInterval(self._data._timeOutId)},__onScopeChange:function(e){this._data._discard||this._onScopeChange(e)},__printScope:function(e){void 0===e&&(e=0);var t=this;setTimeout(function(){console.log(t.$scope)},e)},_objectChange:function(e){if(e.object&&e.oldObject)return t.objChangedProps(e.object,e.oldObject);var n={};return n[e.name]=e.value,n},_dispose:function(){this.__clearWatch(),this.__destroyObservable()},_onScopeInit:e.noop,_onScopeChange:e.noop,$changeReport:function(e,n){return t.objChangedProps(e,n)}}),e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("ellipsis-element")):"function"==typeof define&&define.amd?define(["ellipsis-element"],t):e.returnExports=t($)}(this,function(e){return e.element("elliptical.cache",{_initElement:function(){this._data.$cache=this.$cache()},$cache:function(){var e={},t=1;return{reset:function(){t=1,e={}},set:function(n,i){n.__data||(n.__data=t++),e[n.__data]=i},get:function(t){return e[t.__data]}}},_dispose:function(){var e=this._data.$cache;e.reset()}}),e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-dustjs"),require("elliptical-scope"),require("elliptical-cache")):"function"==typeof define&&define.amd?define(["elliptical-dustjs","elliptical-scope","elliptical-cache"],t):e.returnExports=t(e.dust)}(this,function(e){window.dust=e;var t=$.elliptical.utils,n=t._;return"undefined"!=typeof window.dust&&$.widget.$providers({template:window.dust}),$.element("elliptical.template",[$.elliptical.scope,$.elliptical.cache],{_initElement:function(){this._data.Running=null,this._data.unlockInterval=300,this._data._intervalId=null,this._data.fragment=null,this._data.templateId=null,this._data.tree=[],this._data.pathObservers=[],this._data._setDiscardBit=!0,this._data.modelPathTree=[],this._data.previouslyBound=!1,this._data._watched=!1;var e=this.options.$customElements;this._data.modelNodeSelector=e?"ui-model":'[data-node="model"]',this._data.attrId=e?"model-id":"data-id";var t=this.__getTemplateNode();t[0]&&(this._data.templateNode=t,this.__onScriptsLoaded())},__onScriptsLoaded:function(){var e=this;this._data._intervalId=setInterval(function(){void 0!==$$.fragments&&(clearInterval(e._data._intervalId),e.__bind())},100)},__bind:function(e){var t=this._data.templateNode;this.__initTemplate(t),this.__initDOMObserver(t[0]),this.__isModelList()?this.__scopeLength()>0?this.__databind(t,e):this.__watch(t,!0,e):n.isEmpty(this.$scope)?this.__watch(t,!1,e):this.__databind(t,e)},__watch:function(e,t,i){var o=this;this._data._watched=!0,this._data.intervalId=setInterval(function(){(t&&o.__scopeLength()>0||!t&&!n.isEmpty(o.$scope))&&(o._data._watched=!1,clearInterval(o._data.intervalId),o.__databind(e,i))},100)},__getTemplateNode:function(){return this.element.find("ui-template")},__initTemplate:function(e){{var t,n=e.attr("id");e.attr("name")}"undefined"!=typeof n&&(this._data.templateId=n,t=this.__getFragmentById(n),this._data.fragment=t,t&&this.__parseTemplateFragment(t))},__initDOMObserver:function(e){var t=this,n=new MutationObserver(function(e){e.forEach(function(e){e.addedNodes&&e.addedNodes.length>0&&t.__addedNodes(e.addedNodes),e.removedNodes&&e.removedNodes.length>0&&t.__removedNodes(e.removedNodes),t._onDOMMutation(e)})});n.observe(e,{childList:!0,subtree:!0}),this._data.DOMObserver=n},__getFragmentById:function(e){var t;return!$$.fragments.length>0?null:($$.fragments.forEach(function(n){n.id===e&&(t=n.fragment)}),t)},__parseTemplateFragment:function(e){function t(e){e&&e.length&&e.forEach(function(e){if("#"===e[0]&&n.isArray(e)){var r={index:c,context:e[1][1],cxt:i(e[1][1],c,!1)};o=e[1][1],l.push(r),a.push(r);var s=c;c++,t(e),c=s}else"bodies"===e[0]?t(e[1]):"reference"===e[0]?t(e[1]):"body"===e[0]&&(e.forEach(function(e){if("reference"===e[0]){var t={cxt:i(o,c),context:o,index:c,key:e[1][1]};l.push(t)}}),t(e))})}function i(e,t,n){"undefined"==typeof n&&(n=!0),t>0&&n&&t--;var i=[];return a.forEach(function(e){e.index<t&&i.push(e.context)}),e&&i.push(e),i}var o,r=this.options.$providers.template,s=r.parse(e),a=[],l=[],c=0;s.length&&s.length>0&&t(s),l.push(a),this._data.contextKeyArray=l},__templateModels:function(e){"undefined"==typeof e&&(e=this._data.templateNode);var t=this._data.modelNodeSelector;return e?e.find(t):null},_templateNodes:function(){return this.__templateModels()},_nodeById:function(e){var t=this._templateNodes();return t.selfFind('[model-id="'+e+'"]')},__databind:function(e,t,i){this.__lock();var o=this,r=this.$scope,s=this.__templateModels(e);this.__isModelList()&&s&&s.length>0&&void 0===i?$.each(s,function(e,t){o.__bindModel(t,e)}):n.isEmpty(r)||void 0!==t?this.__bindModel(e[0],null):this.__render(r,function(){o.__databind(e,!1,void 0)}),this._data.previouslyBound=!0,this.__unlock()},__render:function(e,t){var n={};if(n.template=this._data.templateId,this.__isModelList()){var i=Object.keys(e)[0];n.model=e[i],n.context=i}else n.model=e;n.parse=!1,this.__renderTemplate(n,t)},__renderTemplate:function(e,t){var n=this;this._renderTemplate(e,function(e,i){var o=i.replace(/<ui-template(.*?)>/g,"").replace(/<\/ui-template>/g,"");n._data.templateNode.html(o),t&&t(e,i)})},__lock:function(){this._data.Running=!0,this._data._setDiscardBit&&(this._data._discard=!0)},__unlock:function(){var e=this,t=this._data.unlockInterval;setTimeout(function(){e._data.Running=null,e._data._discard=!1,e._data._setDiscardBit=!0},t)},__bindModel:function(e,i){function o(e,t,n){var i=_.__getTemplateContextArray();i&&i.length>0&&i.forEach(function(i){if(i.index===e&&i.context===t){var o={index:e,context:i.context,cxt:i.cxt,modelIndex:n};b.push(o)}})}function r(){return b.length>0?b[b.length-1]:null}function s(e){var t=[],n=_.__getTemplateContextArray();return n&&n.length>0&&n.forEach(function(n){n.index===e&&t.push(n)}),t}function a(e){for(var t=0,n=x[0];e!==n;)e=$(e).parent()[0],("UI-MODEL"===e.tagName||e.hasAttribute("data-node"))&&t++;return t}function l(e){b.length>0&&n.remove(b,function(t){return t.index>e})}function c(){b.length=0}function u(e){if(e.tagName&&"ui-model"===e.tagName.toLowerCase()||e.hasAttribute&&e.hasAttribute("data-node")){y=a(e);var t=r();t&&t.index>y&&l(y);var n=0===y?_._data.templateNode[0]:$(e).parents(_._data.modelNodeSelector)[0];void 0===n&&(n=_._data.templateNode[0]);var i=$(n).closestChildren(_._data.modelNodeSelector).index($(e)),u=s(y),p={};u&&u.length>1?(p=_.__getCurrentContextModelPath(b,y,u,i),t&&y>t.index?(l(y),o(y,p.context,p.modelIndex)):(b.pop(),o(y,p.context,p.modelIndex))):t&&y>t.index?o(y,u[0].context,i):t?(b.pop(),o(y,u[0].context,i)):!t&&u.length>0&&o(y,u[0].context,i)}else{var n=$(e).parents(_._data.modelNodeSelector)[0];n?y=a(n):(y=0,c());var t=r();t&&t.index>y&&l(y)}(3!==e.nodeType&&e.hasAttributes()||e.tagName&&"ui-model"===e.tagName.toLowerCase())&&d(e)}function d(e){var t=_._data.scopeId;void 0===t&&(t="id");var n,i;$.each(e.attributes,function(o,r){try{if(r&&void 0!==r)if(0===r.name.indexOf("model")){n=t,i=r.name;var s=[i,n];f(e,s,r.value)}else if(0===r.name.indexOf("data-bind")){var a=r.value.split(",");a.length&&a.forEach(function(t){t=t.trim();var n=t.split(":"),i=n[0];"text"===i?p(e,n):f(e,n)})}}catch(l){console.log(l)}}),e.tagName&&"ui-model"===e.tagName.toLowerCase()&&v(e)}function p(e,i){var o=i[1],r={};i.length>2&&(r=h(i[2]));var s=_._data.$cache,a=_._data.previouslyBound,l=_.__createPath(b,o),c=t.objectPropertyByPath(g,l);n.isEmpty(r)||(c=m(c,r),t.assignValueToPath(g,l,c));var u,d,p=$(e);if(a){var f=p.findTextNodes();$.each(f,function(e,t){t.textContent===c&&(d=$(t))}),u=d&&d[0]?d[0]:_.__createTextNode(p,e,c)}else u=_.__createTextNode(p,e,c);s.set(u,{observers:l});var v=(t.observerMapPath(l),new PathObserver(g,t.observerMapPath(l)));u.bind("textContent",v);var y={type:"text",value:"textContent",node:u,path:l,observer:v};w.push(y)}function f(e,i,o){var r=i[0],s=i[1],a={};i.length>2&&(a=h(i[2]));var l,c,u=_._data.$cache,d=_.__createPath(b,s),p=t.objectPropertyByPath(g,d);n.isEmpty(a)||(p=m(p,a),t.assignValueToPath(g,d,p));var f=u.get(e);if(f?(l=f.observers,c=f.id):c=o,l&&l.length>0){var v=null;l.forEach(function(e){e.value===r&&(e.path=d,e.value_=p,v=e)}),v||(v={value:r,value_:p,path:d},l.push(v))}else l=[],v={value:r,value_:p,path:d},l.push(v),u.set(e,{observers:l,id:c});var y=(t.observerMapPath(d),new PathObserver(g,t.observerMapPath(d)));e.bind(r,y);var x={type:"attribute",value:r,node:e,path:d,observer:y};w.push(x)}function h(e){var t,n=e.match(/\((.*?)\)/g);n||(n="");var i=e.replace(n,"");return n=n.replace("(",""),n=n.replace(")",""),t=n.length<1?[]:n.split(","),{func:i,args:t}}function m(e,t){var n,i,o=t.func;return window.dust.helpers.inline[o]?(n=window.dust.helpers.inline[o],i=t.args,i.length>0?i.unshift(e):i.push(e),n.apply(this,i)):window[o]?(n=window[o],i=t.args,i.length>0?i.unshift(e):i.push(e),n.apply(this,i)):this[o]?(n=this[o],i=t.args,i.length>0?i.unshift(e):i.push(e),n.apply(this,i)):e}function v(e){var n,o,r=_._data.$cache,s=r.get(e);s&&(n=s.observers,o=s.id);var a=_.__createPath(b);try{i=t.getIndexFromPath(a)}catch(l){}r.set(e,{path:a,id:o,index:i,observers:n})}var _=this,g=this.$scope,y=0,b=[],w=this._data.pathObservers,x=this._data.templateNode;!i&&this.options.scope&&o(0,this.options.scope,null),this.__traverseDOM(e,u)},__traverseDOM:function(e,t){for(t(e),e=e.firstChild;e;)this.__traverseDOM(e,t),e=e.nextSibling},__createTextNode:function(e,t,n){e.text(e.text().replace(n,""));var i=document.createTextNode(n);return t.appendChild(i),i},__getTemplateContextArray:function(){var e=this._data.contextKeyArray;return e&&e.length>0?e[e.length-1]:[]},__createPath:function(e,t){var n="";return e.forEach(function(e){n+="undefined"!=typeof e.modelIndex?e.context+"."+e.modelIndex+".":e.context+"."}),"undefined"!=typeof t?n+=t:n=n.substring(0,n.length-1),n},__createPathByContextIndex:function(e,t,n){var i="";return e.forEach(function(e){e.index<=t&&(i+=e.context+"."+e.modelIndex+".")}),i+=n},__getCurrentContextModelPath:function(e,n,i,o){var r=this,s=this.$scope,a=n>0?n-1:0,l=[];if(i.forEach(function(n){var i=r.__createPathByContextIndex(e,a,n.context),o=t.arrayPropertyLengthByPath(s,i);l.push({length:o,context:n.context,cxt:n.cxt})}),l.length>1){for(var c={},u=0,d=0;d<l.length;d++){if(o<l[d].length+u||!l[d].length){c.modelIndex=o-u,c.context=l[d].context,c.cxt=l[d].cxt,c.index=n;break}u+=l[d].length}return c}return{modelIndex:o,context:i[0].context,cxt:i[0].cxt,index:i[0].index}},__getParentModelNode:function(e){var t=$(e).parents(this._data.modelNodeSelector);return t[0]?t[0]:this._data.templateNode[0]},__addedNodes:function(){this._data.Running||this.__isModelList()&&this.__rebind()},__removedNodes:function(e){if(!this._data.Running){for(var t,n=this.$scope,i=this,o=!1,r=0;r<e.length;r++){var s=this._data.$cache,a=e[r],l=s.get(a);if(l)t=this.__parseObservers(a,n),t&&(o=!0);else{var c=$(e).findTextNodeDescendants();c&&c.length>0&&$.each(c,function(e,r){t=i.__parseObservers(r,n),t&&(o=!0)})}}o&&this.__rebind(),this._onRemovedNodes(e)}},__parseObservers:function(e,n){var i=this._data.$cache,o=i.get(e);if("undefined"!=typeof o){var r=o.path,s=t.isPathInArray(r);return s?this.__spliceArray(n,r):t.deleteObjectPropertyByPath(n,r),!0}return!1},__spliceArray:function(e,n){var i=t.getIndexFromPath(n);if(void 0!==i){n=this.__parsePath(n,i);var o=t.objectPropertyByPath(e,n);this._data._discard=!1,this._data._setDiscardBit=!1,o.splice(i,1)}},__parsePath:function(e,t){return e.substring(0,e.length-(t.toString().length+1))},__rebind:function(){var e=this._data.templateNode;this.__unbindPathObservers(),this.__databind(e)},__onScopeChange:function(e){e.removed&&e.removed.length&&e.removed.length>0&&this.__onRemoved(e.removed),this._onScopeChange(e)},__onListRemove:function(e){function t(t){if(t.tagName&&"ui-model"===t.tagName.toLowerCase()||t.hasAttribute&&t.hasAttribute("data-node")){var i=o.get(t),r=i.index;r===e&&(t.remove(),n._data.previouslyBound=!0,n.__rebind())}}var n=this,i=this._data.templateNode[0],o=this._data.$cache;this.__traverseDOM(i,t)},__onListAdd:function(e,t,n){var i=this,o=this._compileFragment(e,t),r=this.__getParent(e,t),s="push"===n||"concat"===n?this.__getPushInsertionIndex(e,t):this.__getUnshiftInsertionIndex(e,t),a=this.__getModelFromPath(e,n),l={};l.template=o,l.model=a,l.context=t,l.parse=!1,this._renderTemplate(l,function(e,t){e||i.__insertRenderedTemplate(t,r,s)})},_compileFragment:function(e,t){var n=this.options.$providers.template,i=this._data.templateId,o=i+"-"+t,r=this.__getFragmentById(i),s="{#"+t+"}.(.*?){/"+t+"}",a=r.match(new RegExp(s,"g")),l=a.length>1?this.__getPartial(a,e,t):a[0],c=n.compile(l,o);return n.loadSource(c),o},__getModelFromPath:function(e,n){var i=this.$scope,o=t.objectPropertyByPath(i,e);return"push"===n?o[o.length-1]:"unshift"===n?o[0]:o},__getPartial:function(e,t,n){var i=n+".",o=t.match(new RegExp(i,"g")),r=o.length;return e[r-1]},__getParent:function(e){var t=e.split(".");if(t.length<2)return this._data.templateNode[0];var n=this.__getParentPath(t);return this.__getParentByPath(n)},__getParentPath:function(e){for(var t=e.length-1,n="",i=0;t>i;i++)n+=e[i]+".";return n.substring(0,n.length-1)},__getParentByPath:function(e){function t(t){if(t.tagName&&"ui-model"===t.tagName.toLowerCase()||t.hasAttribute&&t.hasAttribute("data-node")){var i=o.get(t),r=i.path;r===e&&(n=t)}}var n,i=this._data.templateNode[0],o=this._data.$cache;return this.__traverseDOM(i,t),n},__getPushInsertionIndex:function(e,n){var i=this.$scope,o=this.__getContextArrayFromPath(e),r=this.__getSectionContextProp(o,n);if(1===r.count)return-1;if(r.position===r.count-1)return-1;for(var s=e.split("."),a=this.__getParentPath(s),l=0,c=0;c<r.position+1;c++){var u=a.length&&a.length>0?a+"."+r.cxt[c]:r.cxt[c],d=t.arrayPropertyLengthByPath(i,u);l+=d}return l},__getUnshiftInsertionIndex:function(e,n){var i=this.$scope,o=this.__getContextArrayFromPath(e),r=this.__getSectionContextProp(o,n);if(1===r.count)return 0;for(var s=e.split("."),a=this.__getParentPath(s),l=0,c=0;c<r.position;c++){var u=a+"."+r.cxt[c],d=t.arrayPropertyLengthByPath(i,u);l+=d}return l},__getSectionContextProp:function(e,t){var i={};return i.count=e.length,i.cxt=e,i.position=n.indexOf(e,t),i},__getParentIndex:function(e){var t=e.split(".");return e[0]+"."+t[1]},__getContextArrayFromPath:function(e){var t=this,n=[],i=e.split(".");i.forEach(function(e){t.__isNumeric(e)||n.push(e)});var o=n.length-1,r=this.__getTemplateContextArray(),s=[];return r.forEach(function(e){e.index===o&&s.push(e.context)}),s},__isNumeric:function(e){var t=parseInt(e);return!isNaN(t)},__insertRenderedTemplate:function(e,t,n){var i,o,r=$(t),s=r.closestChildren(this._data.modelNodeSelector);o=this._fragmentModelParser(e),i=o[0];var a;-1===n?r.append(o):0===n?(a=s[0],t.insertBefore(i,a)):(a=s[n],t.insertBefore(i,a)),this.__rebind()},_fragmentModelParser:function(e){var t=this._DOMParser(e);return $(t).find("ui-model")},__onRemoved:function(e){var t=this,n=!1,i=t._data.$cache,o=this.options.idProp;void 0===o&&(o="id"),this.__isModelList()&&(e.forEach(function(e){var r=t.__templateModels();r&&r.length>0&&$.each(r,function(t,r){var s=i.get(r);void 0!==s&&void 0!==s.id?s.id===e[o]&&(r.remove(),n=!0):s&&s.observers&&s.observers.length&&s.observers.forEach(function(t){var i=e[o];"model-id"===t.value&&t.value_===i&&(r.remove(),n=!0)})})}),n&&t.__rebind())},__unbindPathObservers:function(){var e=this._data.pathObservers;e&&e.length&&e.length>0&&(e.forEach(function(e){e.observer.close()}),t.emptyArray(e))},__unbindDOMObserver:function(){var e=this._data.DOMObserver;e&&e.disconnect()},__disposeTemplate:function(){this.__unbindDOMObserver(),this.__unbindPathObservers()},__rebindTemplate:function(e){if(this._data._watched)return!1;var t;"undefined"!=typeof e&&e||(t=!0);var n=this.__getTemplateNode();return n[0]?this.__bind(t):this.options.loadedTemplate&&this.__watchForTemplateInstance(t),!0},__watchForTemplateInstance:function(e){var t=this,n=setInterval(function(){var i=t.__getTemplateNode();i[0]&&(clearInterval(n),t.__bind(e))},100)},__reconnect:function(){var e=this._data.DOMObserver;if(e){var t=this._data.templateNode;if(t[0]){var n=t[0];e.observe(n,{childList:!0,subtree:!0})}}},_printPathObservers:function(e){var t=this;void 0===e&&(e=0),setTimeout(function(){console.log(t._data.pathObservers)},e)},_getModelIdByNode:function(e){return e.getAttribute("model-id")},_getModelIdByTarget:function(e){var t=$(e),n=t.parent("ui-model");return n.attr("model-id")},_getModelNodeCache:function(e){var t=this._data.$cache;return t.get(e)},_dispose:function(){this.__disposeTemplate()},_onDOMMutation:$.noop,_onRemovedNodes:$.noop,_onScopeChange:$.noop,$deleteNodes:function(e){var t,n=this;this.__unbindPathObservers();this.$scope;e.call(this);var i=e.toString();t=i.match(/scope.(.*?).splice/g),t&&t.length&&t.forEach(function(e){e=e.replace("scope.",""),e=e.replace(".splice","");var t=i.indexOf("splice("),o=i.indexOf(",",t);t+=7;var r=i.substring(t,o),s=e+"."+r;s=s.replace(/]/g,""),s=s.replace(/[[\]]/g,"."),n.__onListRemove(s)}),t=i.match(/scope.(.*?).shift/g),t&&t.length&&t.forEach(function(e){e=e.replace("scope.",""),e=e.replace(".shift","");var t=e+".0";t=t.replace(/]/g,""),t=t.replace(/[[\]]/g,"."),n.__onListRemove(t)})},$addNodes:function(e){var t,n=this;this.__unbindPathObservers();this.$scope;e.call(this);var i=e.toString();t=i.match(/scope.(.*?).push/g),t&&t.length&&t.forEach(function(e){e=e.replace("scope.",""),e=e.replace(".push","");var t=e;t=t.replace(/]/g,""),t=t.replace(/[[\]]/g,".");var i=t.split("."),o=i[i.length-1];n.__onListAdd(t,o,"push")}),t=i.match(/scope.(.*?).unshift/g),t&&t.length&&t.forEach(function(e){e=e.replace("scope.",""),e=e.replace(".unshift","");var t=e;t=t.replace(/]/g,""),t=t.replace(/[[\]]/g,".");var i=t.split("."),o=i[i.length-1];n.__onListAdd(t,o,"unshift")}),t=i.match(/scope.(.*?).concat/g),t&&t.length&&(t=i.replace(/scope.(.*?).=/g,""),t=t.match(/scope.(.*?).concat/g),t&&t.length&&t.forEach(function(e){e=e.replace("scope.",""),e=e.replace(".concat","");var t=e;t=t.replace(/]/g,""),t=t.replace(/[[\]]/g,".");var i=t.split("."),o=i[i.length-1];n.__onListAdd(t,o,"concat")}))},$empty:function(){var e=this.__getTemplateNode();if(this.__isModelList()){var n=void 0!==this.options.scope?this.options.scope:t.objectPropertyByIndex(this.$scope,0);this.$scope[n].length=0,e.empty()}else this.$scope={},e.empty()},$unbindTemplate:function(){this.__disposeTemplate()},$rebindTemplate:function(){this.__rebindTemplate()},$renderTemplate:function(e,t){e.parse=!1,this.__renderTemplate(e,t)},$rebind:function(){if(!this._data._watched){var e=this._data.templateNode;this.__unbindPathObservers(),this.__databind(e,void 0,!0),this.__reconnect()}}}),$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.Event=t(),e.returnExports=e.elliptical.Event)}(this,function(){var e={};return function(t){function n(){var e={},n=Function;return{emit:function(){var n,i,o,r=arguments,s=e[r[0]];s&&(n=s.length,i=r.length>1?Array.prototype.splice.call(r,1):[],setTimeout(function(){for(o=0;n>o;o+=1)s[o].apply(t,i);s=t=i=null},0))},on:function(t,i){if("string"!=typeof t)throw"invalid or missing channel";if(!(i instanceof n))throw"invalid or missing callback";return e[t]||(e[t]=[]),e[t].push(i),{channel:t,callback:i}},off:function(t,i){if(t.channel&&t.callback&&(i=t.callback,t=t.channel),"string"!=typeof t)throw"invalid or missing channel";if(!(i instanceof n))throw"invalid or missing callback";var o,r=e[t],s=r instanceof Array?r.length:0;for(o=0;s>o;o+=1)if(r[o]===i){r.splice(o,1);break}},flush:function(){e={}},list:function(t){t&&t(e)}}}e.init=n()}(this),e.init}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("ellipsis-element"),require("elliptical-event")):"function"==typeof define&&define.amd?define(["ellipsis-element","elliptical-event"],t):e.returnExports=t($,e.elliptical.Event)}(this,function(e,t){var n=e.elliptical.utils,i=n._;return e.element("elliptical.pubsub",{options:{channel:null,eventBlock:!1},_initElement:function(){this._data.subscriptions=[],this._subscriptions()},_publish:function(e,n,i,o){var r=arguments.length;2===r?(i=0,o=!1):3===r&&("boolean"==typeof i?(o=i,i=0):o=!1),(!this.options.eventBlock||o)&&setTimeout(function(){t.emit(e,n)},i)},_subscribe:function(e,n,o,r){var s=arguments.length;2===s?(r=n,n=null,o=null):3===s&&(r=o,o=350);var a={},l=null;"throttle"===n?l=i.throttle(r,o):"debounce"===n?(a.leading=!0,a.trailing=!1,l=i.debounce(r,o,a)):l=r;var c={channel:e,fn:l};this._data.subscriptions&&this._data.subscriptions.length||(this._data.subscriptions=[]),this._data.subscriptions.push(c),t.on(e,l)},_subscriptions:e.noop,_unbindSubscriptions:function(){var e=this._data.subscriptions;e.forEach(function(e){t.off(e.channel,e.fn)})},_dispose:function(){this._unbindSubscriptions()}}),e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-template"),require("elliptical-pubsub")):"function"==typeof define&&define.amd?define(["elliptical-template","elliptical-pubsub"],t):e.returnExports=t()}(this,function(){function e(e,t){$.each(e,function(){var e=window.$$.elliptical.context,n=$(this).attr(t);void 0!==n&&(n=n.toCamelCase());var i=$(this).attr($.element.custom?"camel-case":"data-camel-case");void 0===i&&(i=!0);var o=$.element.getOpts(this,i);e&&(o.context=e),$(this)[n](o)})}var t=$.elliptical.utils,n=(t._,"[data-controller]"),i="ui-controller";$.element("elliptical.controller","ui-controller",[$.elliptical.template,$.elliptical.pubsub],{options:{context:null,scope:null,dataBind:!0},_initElement:function(){var e=this.options.context;e||(e=window.$$.elliptical.context,e&&(this.options.context=e)),this._data.hasObserve=$.elliptical.hasObjectObserve,this.$viewBag=e,this.__setScope(),this.__onPreInit(),this._initController(),this.__subscriber(),this.__publisher()},__setScope:function(){var e=this.options.context,t=this.options.scope;this.$scope&&t&&e&&(this.$scope[t]=e[t])},_initController:$.noop,__subscriber:function(){var e=this,t=this.options.channel,n=this.options.event;this._data._synced=!1,t&&("sync"===n&&this._subscribe(t+".sync",function(t){e._data._synced||(e._data._synced=!0,e.__disposeTemplate(),e.__destroyObservable(),e.$scope=t.$scope,e.__setObservable(),e.__rebindTemplate(),e.__onSyncSubscribe(t.proto))}),this._subscribe(t+".add",function(t){e.__onAddSubscribe(t)}),this._subscribe(t+".remove",function(t){e.__onRemoveSubscribe(t)}),this._subscribe(t+".change",function(t){e.__onChangeSubscribe(t)}),this._subscribe(t+".select",function(t){e.__onSelectSubscribe(t)}))},__publisher:function(){var e=this.options.channel,t=this.options.event,n=this;if(e&&!t)if(this._data.scopeObserver)this._publish(e+".sync",{proto:this,$scope:this.$scope});else var i=setInterval(function(){n._data.scopeObserver&&(clearInterval(i),n._publish(e+".sync",{proto:n,$scope:n.$scope}))},500)},__onScopeChange:function(e){if(this._data._discard)return!1;var t=this,n=this.options.event;return e.added&&e.added.length&&e.added.forEach(function(e){var i=t.options.channel;i&&void 0!==i&&"sync"!==n&&t._publish(i+".add",e)}),e.removed&&e.removed.length&&e.removed.forEach(function(e){var i=t.options.channel;
i&&void 0!==i&&"sync"!==n&&t._publish(i+".remove",e)}),e.changed&&e.changed.length&&e.changed.forEach(function(e){var i=t.options.channel;i&&void 0!==i&&"sync"!==n&&t._publish(i+".change",e)}),this.__$scopePropsChange(e),this._super(e),!0},__$scopePropsChange:function(e){var t=this._objectChange,n=this._data.hasObserve,i=this._$scopePropsChange.bind(this);e.changed&&e.changed.length&&e.changed.forEach(function(e){var o={};n?o[e.name]=e.value:o=t(e),i(o)})},_$scopePropsChange:$.noop,_viewBag:function(){return $$.elliptical.context},_triggerEvent:function(e,t){var n=$.Event(e);$(window).trigger(n,t)},__onSyncSubscribe:function(e){this._onSyncSubscribe(e)},_onSyncSubscribe:$.noop,__onAddSubscribe:function(e){this._onAddSubscribe(e)},_onAddSubscribe:$.noop,__onChangeSubscribe:function(e){this._onChangeSubscribe(e)},_onChangeSubscribe:$.noop,__onRemoveSubscribe:function(e){this._onRemoveSubscribe(e)},_onRemoveSubscribe:$.noop,__onSelectSubscribe:function(e){var n;n=e.id&&this.__isModelList()?t.selectObjectByIdFromArrayProp(this.$scope,this._data.scopeId,e.id):void 0,this._onSelectSubscribe(n)},_onSelectSubscribe:$.noop,_scopedContextModel:function(){var e=this.options.context,t=this.options.scope;return t&&e?e[t]:void 0},_dispose:$.noop,scope:function(){return this.$scope}}),$.controller=function(e,t,n,i,o){var r,s=null,a=null,l=arguments.length;if(2>l)throw"Error: Controller requires a minimum of two parameter types: string name and a singleton for the prototype";if(2===l){if(o=t,"object"==typeof e)throw"Error: Controller requires a string name parameter";if("object"!=typeof t)throw"Error: Controller requires a singleton for the prototype";t=e,r=$.elliptical.controller,i=null}else if(3===l)if(o=n,"object"==typeof e){if("string"!=typeof t)throw"Error: Controller requires a string name parameter";if("object"!=typeof n)throw"Error: Controller requires a singleton for the prototype";a=e,r=$.elliptical.controller,i=null}else{if("object"!=typeof n)throw"Error: Controller requires a singleton for the prototype";"string"==typeof t?(s=t,r=$.elliptical.controller,i=null):i=t,t=e}else if(4===l)if(o=i,"object"==typeof e){if(a=e,"string"!=typeof t)throw"Error: Element requires a string name parameter";"string"==typeof n?(s=n,r=$.elliptical.controller,i=null):i=n}else i=n,s=t,t=e;else a=e,s=n;if(i){var c=[];$.utils.array.isArray(i)?(r=function(){},r._childConstructors=[],i.forEach(function(e){e.prototype.__initFunc&&e.prototype.__initFunc.length>0&&(c=c.concat(e.prototype.__initFunc)),$.extend(r.prototype,e.prototype,$.elliptical.controller.prototype),e.prototype._initController?c.push(e.prototype._initController):e.prototype._initElement&&c.push(e.prototype._initElement)}),c.length>0&&(o.__initFunc=c)):(i.prototype._initController?(r=i,r.prototype.__initFunc&&r.prototype.__initFunc.length>0&&(c=c.concat(r.prototype.__initFunc)),c.push(r.prototype._initController)):(r=function(){},r._childConstructors=[],i.prototype._initElement&&c.push(i.prototype._initElement),$.extend(r.prototype,i.prototype,$.elliptical.controller.prototype)),c.length>0&&(o.__initFunc=c))}if($.widget(t,r,o),$.element.custom){s||(s=t.replace(".","-"));var u=t.split(".")[1];if(!a){var d=HTMLElement.prototype;d._name="HTMLElement",a=d}$.element.register(u,s,a)}};for(var o in $.element)$.controller[o]=$.element[o];if($(function(){$(document).on("ellipsis.onMutation",function(t,o){var r=o.mutations;r.forEach(function(t){var o=t.addedNodes;if(o.length>0){var r=$(o).selfFind(n);if(r&&r.length>0&&e(r,"data-controller"),$.element.custom){var s=$(o).selfFind(i);s&&s.length>0&&e(s,"name");var a=$(o).selfFind("[controller]");a&&a.length>0&&e(a,"controller")}}})})}),function(){document.addEventListener("WebComponentsReady",function(){var t,o,r=$(document).find(n);$.element.custom&&(t=$(document).find(i),o=$(document).find("[controller]")),r&&r.length>0&&e(r,"data-controller"),$.element.custom&&t&&t.length>0&&e(t,"name"),$.element.custom&&o&&o.length>0&&e(o,"controller")})}(),$.element.custom)for(var r=$.element.definitions,s=r.length,a=0;s>a;a++)"controller"===r[a].name&&r.splice(a,1);return $}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-controller")):"function"==typeof define&&define.amd?define(["elliptical-controller"],t):e.returnExports=t()}(this,function(){function e(e){$.each(e,function(){var e=$(this).attr(i?"name":"data-form");void 0!==e&&(e=e.toCamelCase());var t=$(this).attr($.element.custom?"camel-case":"data-camel-case");void 0===t&&(t=!0);var n=$.widget.getOpts(this,t);$(this)[e](n)})}var t=$.elliptical.utils,n=(t._,"[data-form]"),i=!1;if($("html").hasClass("customelements")&&(n="ui-form",i=!0),$.controller("elliptical.form","ui-form",{_initController:function(){this._initForm()},_initForm:function(){},__getTemplateNode:function(){return this.element.find("form")},__render:function(e,t){var n={};if(n.template=this._data.templateId,this.__isModelList()){var i=Object.keys(e)[0];n.model=e[i],n.context=i}else n.model=e;n.parse=!1,this.__renderTemplate(n,t)},__renderTemplate:function(e,t){var n=this;this._renderTemplate(e,function(e,i){var o=i.replace(/<form(.*?)>/g,"").replace(/<\/form>/g,"");n._data.templateNode.html(o),t&&t(e,i)})},$render:function(e,t,n){"function"==typeof t&&(n=t,t=void 0);var i={};i.parse=!1,i.template=this._data.templateId,i.model=e,this.__renderTemplate(i,n)}}),$.form=function(e,t,n,o){var r,s=null,a=arguments.length;if(2>a)throw"Error: Form requires a minimum of two parameter types: string name and a singleton for the prototype";if("string"!=typeof e)throw"Error: Form requires name of type string";if(2===a){if("string"==typeof e&&"string"==typeof t)throw"Error: Form requires a minimum of two parameter types: string name and a singleton for the prototype";o=t,r=$.elliptical.form,n=null}else 3===a?"string"==typeof e&&"string"==typeof t?(s=t,o=n,r=$.elliptical.form,n=null):(o=n,n=t):4===a&&(s=t);if(n){var l=[];$.utils.array.isArray(n)?(r=function(){},r._childConstructors=[],n.forEach(function(e){e.prototype.__initFunc&&e.prototype.__initFunc.length>0&&(l=l.concat(e.prototype.__initFunc)),$.extend(r.prototype,e.prototype,$.elliptical.form.prototype),e.prototype._initForm?l.push(e.prototype._initForm):e.prototype._initController?l.push(e.prototype._initController):e.prototype._initElement&&l.push(e.prototype._initElement)}),l.length>0&&(o.__initFunc=l)):(n.prototype._initController?(r=n,r.prototype.__initFunc&&r.prototype.__initFunc.length>0&&(l=l.concat(r.prototype.__initFunc)),l.push(r.prototype._initForm)):(r=function(){},r._childConstructors=[],n.prototype._initController?l.push(n.prototype._initController):n.prototype._initElement&&l.push(n.prototype._initElement),$.extend(r.prototype,n.prototype,$.elliptical.form.prototype)),l.length>0&&(o.__initFunc=l))}if($.widget(e,r,o),i){s||(s=e.replace(".","-"));var c=e.split(".")[1];$.widget.register(c,s,HTMLElement.prototype,!1)}},i)try{for(var o in $.controller)$.form[o]=$.controller[o]}catch(r){}if($(function(){$(document).on("ellipsis.onMutation",function(t,i){var o=i.mutations;o.forEach(function(t){var i=t.addedNodes;if(i.length>0){var o=$(i).selfFind(n);o&&o.length>0&&e(o)}})})}),function(){document.addEventListener("WebComponentsReady",function(){var t=$(document).find(n);t&&t.length>0&&e(t)})}(),$.element.custom)for(var s=$.element.definitions,a=s.length,l=0;a>l;l++)"form"===s[l].name&&s.splice(l,1);return $}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-controller")):"function"==typeof define&&define.amd?define(["elliptical-controller"],t):e.returnExports=t($)}(this,function(e){e.controller.config={scope:Object.defineProperties({},{id:{get:function(){return e.Widget.prototype.options.idProp},set:function(t){e.Widget.prototype.options.idProp=t}}})},e.controller.service=function(){for(var t=[],n=[].slice.call(arguments),i=0;i<n.length;i++){var o=n[i]["@class"];o||(o=n[i].constructor&&n[i].constructor["@class"]?n[i].constructor["@class"]:"Model"),t.push({name:o,service:n[i]})}var r=e.Widget.prototype.options;r.services="undefined"!=typeof r.services?r.services.concat(t):t};var t={service:function(e){var t=null,n=null;return this.options.services.forEach(function(i){i.name===e?t=i.service:"Model"===i.name&&(n=i.service.extend({},{}),n["@class"]=e)}),t?t:n},__onPreInit:function(){var e=this.options.context;e&&(this._data.authenticated=this.options.context.authenticated,this._data.membership=this.options.context.membership)}};return e.extend(e.elliptical.controller.prototype,t),e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../controller/controller")):"function"==typeof define&&define.amd?define(["../controller/controller"],t):e.returnExports=t($)}(this,function(e){return e.controller("elliptical.scroll",{_initController:function(){this._scrollEvent()},_onScroll:e.noop,_scrollEvent:function(){var t=this;e(window).on("scroll",function(){var e=window.pageYOffset;t._onScroll(e)})},_onDestroy:function(){e(window).off("scroll")}}),e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../controller/controller")):"function"==typeof define&&define.amd?define(["../controller/controller"],t):e.returnExports=t()}(this,function(){return $.controller("elliptical.slideNotification",{options:{template:"ui-slide-notification",cssModalClass:null,animationIn:"bounceInDown",animationOut:"bounceOutUp",modalCssClass:null,modalZIndex:999,modalOpacity:.3,model:{}},_initElement:function(){this.__selector(),this._attachElement(),this._show()},_subscriptions:function(){this._subscribe("slide.notification.hide",this._hide.bind(this))},__selector:function(){var e=this.options.$customElements;this._data.selector=e?"ui-slide-Notification":".ui-slide-notification"},_attachElement:function(){var e=$("<div></div>");this._data.container=e;var t=this.element;t.append(e)},_show:function(){var e=this;this._showModal(function(){e._renderElement()})},_renderElement:function(){var e=this,t=this._data.container;this._render(t,{template:this.options.template,model:this.options.model},function(){e._data.element=t.find(e._data.selector),e._animate();var n=t.find("button");e._data.button=n,e._close()})},_showModal:function(e){var t={};this.options.modalCssClass&&(t.cssClass=this.options.modalCssClass),t.opacity=this.options.modalOpacity,t.zIndex=this.options.modalZIndex,this._setModal(this.element,t,function(){e()})},_animate:function(){var e=this;this._onEventTrigger("showing",{});var t=this._data.element;this._transitions(t,{preset:"bounceInDown"},function(){e._onEventTrigger("show",{})})},_close:function(){var e=this,t=this._data.button;t&&t.on("click",function(){e._hide()})},_hide:function(){this._removeModal();var e=this._data.element;this._onEventTrigger("hiding",{}),$.browser.msie?this._destroy():this.__transitionOut(e)},__transitionOut:function(e){var t=this,n=this.options.animationOut;this._transitions(e,{preset:n},function(){t.destroy()})},_unbindButtonEvent:function(){var e=this._data.button;e&&e.off("click")},_onDestroy:function(){this._unbindButtonEvent();var e=this._data.container;e.remove()},hide:function(){this._hide()}}),$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../controller/controller")):"function"==typeof define&&define.amd?define(["../controller/controller"],t):e.returnExports=t($)}(this,function(e){e(function(){return e.controller("elliptical.modelList","ui-model-list",{__setScope:function(){var e=this.options.context,t=this.options.scope,n=this.options.idProp;void 0===n&&(this.options.key=this._data.scopeId),t&&e?this.$scope[t]=e[t]:this.$scope={items:[]}},_initController:function(){},__onActiveSubscribe:function(e){var t=this.__templateModels();t.removeClass("active");var n=this.__templateNode(e);n.addClass("active")},__onSyncSubscribe:function(e){if(!e||void 0===e)return!1;var t=e.$scope,n=this,i=t[Object.keys(t)[0]];return i.forEach(function(e){var t={};t.added=[],t.added.push(e),n.__onScopeChange(t)}),this._onSyncSubscribe(t),!0},_publishCount:function(){var e=this.__scopeLength();this.options.channel?this._publish(this.options.channel+".count",e):this.options.scope&&this._publish(this.options.scope+".count",e)},_publishRemove:function(){this.options.channel&&this._publish(this.options.channel+".remove",{})},_onScopeChange:function(e){this._publishCount();var t=this.options.service,n=this.options.idProp,i=this.options.modelKey;void 0!==i&&(n=i);var o=this.options.eventBlock;if("undefined"!=typeof t&&!o){var r=this.service(t);e.removed&&e.removed.length&&e.removed.forEach(function(e){var t={};t[n]=e[n],r.delete(t)})}}}),e})}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("ellipsis-element")):"function"==typeof define&&define.amd?define(["ellipsis-element"],t):e.returnExports=t()}(this,function(e){e.element("elliptical.modelDelete","ui-model-delete",{options:{confirm:!1,confirmText:"Are you sure you want to delete this item?",disabled:!1},_initElement:function(){var e=this.options.$customElements;this._data.selector=e?"ui-model":'[data-node="model"]'},_events:function(){var e=this._data.click,t=this;this.element.on(e,function(){t.options.disabled||t._remove()})},_remove:function(){var e=this.options.confirm,t=this.options.confirmText,n=this._data.selector,i=this.element.parents(n),o=i[0];if(e){if(confirm(t))try{o.remove()}catch(r){i.remove()}}else try{o.remove()}catch(r){i.remove()}},_destroy:function(){var e=this._data.click;this.element.off(e)},disable:function(){this.options.disabled=!0,this.element.addClass("disabled")},enable:function(){this.options.disabled=!1,this.element.removeClass("disabled")}})}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-form")):"function"==typeof define&&define.amd?define(["elliptical-form"],t):e.returnExports=t($)}(this,function(e){var t={__setScope:e.noop,_initController:function(){this._data.data=null,this._data.notificationElement=null,this._setFormElement(),this.__setFormScope(),this._initForm()},__setFormScope:function(){var e=this.options.scope,t=this.options.context;if(t||(t=$$.elliptical.context),e&&"undefined"!=typeof e){var n=this.__cloneObject(t[e]);this.$scope=n}},_initForm:function(){},_events:function(){e(document).on(this.options.submitEvent,this._onValidate.bind(this)),e(document).on(this.options.resetEvent,this._onReset.bind(this)),this._onEvents()},_subscriptions:function(){this._subscribe(this.options.resetSubscription,this._onReset.bind(this)),this._onSubscriptions()},_onEvents:e.noop,_onSubscriptions:e.noop,_onValidate:function(e,t){this.options.schema?this._validate(t):this.___onSubmit(t)},_onReset:function(){this._reset(),this._killNotification()},___onSubmit:function(e){this.options.service?this.__onSubmit(e):this._onSubmit(e)},_validate:function(e){var t=this.service("Validation"),n=e.body,i=this.options.schema,o=this._data.form,r=o.attr("method"),s=o.attr("action");void 0!==t?this._callValidation(t,e,n,r,s,i):this.___onSubmit(e)},_callValidation:function(e,t,n,i,o,r){var s=this;n=this._onBeforeValidate(n),e.post(n,r,function(e,n){e?(n.action=o,n.method=i,s._onError(e,n),s._renderError(n)):s.___onSubmit(t)})},_onSubmit:e.noop,_onSuccess:e.noop,_onError:e.noop,_onBeforeSubmit:function(e){return e},_onBeforeValidate:function(e){return e},__onSubmit:function(e){this._notify("info",this.options.processingMsg,!1);var t=this._onBeforeSubmit(e.body),n=this,i=this.options.service;if(i){var o=this._data.form,r=o.attr("method").toLowerCase(),s=this.service(i);s[r](t,function(t,i){t?(n._triggerEvent(n.options.failureEvent,t),n._sendNotification(t,null),n._onError(t,e),n._renderError({})):(n._triggerEvent(n.options.successEvent,i),n._onSuccess(i),n._renderSuccess(i),n._sendNotification(t,i))})}else{var a={};a.statusCode=400,a.message="Model undefined",this._onError(a,e),this._renderError({})}},_renderSuccess:function(e){var t=this.service("Validation");e=t.onSuccess(e);var n=this._mergeFormData(e);this._renderForm(n)},_renderError:function(e,t){var n=this.service("Validation");e=n.onError(e,t);var i=this._mergeFormData(e);this._renderForm(i)},_mergeFormData:function(t){return e.extend({},this.$scope,t)},_renderForm:function(e){var t=this;this.$render(e,function(){t.__rebindTemplate()})},_setFormElement:function(){var e=this.element.find("form");this._data.form=e},_sendNotification:function(t,n,i){var o=this;void 0===i&&(i=1e3);var r={};r.terminate=!0,r.data=n,t?(r.cssClass="error",r.message="string"==typeof t.message?t.message:"Submission Error..."):r.slideIn=!0,setTimeout(function(){o._notification(e("body"),r)},i)},_notification:function(e,t,n){this._data.notificationElement=e;var i=this;"function"==typeof t?t={}:t||(t={}),t.slideIn=t.slideIn||!1,t.slideIn?(t.terminateTimeout=t.terminateTimeout||100,t.cssModalClass=t.cssModalClass||"forms",setTimeout(function(){e.data("ellipsisNotification")&&e.notification("destroy"),t.model=i._getNotificationModel(),t.context="model",e.slideNotification(t)},t.terminateTimeout),n&&n()):(t.terminateTimeout=t.terminateTimeout||1e3,t.inline=t.inline||!1,t.terminateDelay=t.terminateDelay||1e3,t.cssClass=t.cssClass||"info",t.message=t.message||"processing...",t.terminate=t.terminate||!1,e.notification(t),e.notification("show"),n&&n())},_getNotificationModel:function(){{var e={},t=this._data.form,n=t.attr("method");t.attr("action")}return n&&"post"===n.toLowerCase()&&(e.reset=!0),e.referrer={url:document.referrer},this.options.redirect&&(e.redirect={url:this.options.redirect},this.options.redirectLabel&&(e.redirect.label=this.options.redirectLabel)),e},_killNotifier:function(){var t=e("body");t.data("ellipsisNotification")&&t.notification("destroy")},_killNotification:function(){var e=this._data.notificationElement;e[0]&&e.slideNotification("hide")},__$scopePropsChange:function(e){var t=this,n=this.element,i=n.find(".ui-semantic-label");i[0]&&i.hasClass("error")&&i.removeClass("error").removeClass("visible").addClass("hidden"),e.changed.forEach(function(e){if(e){var i=t._objectChange(e);if(i)for(var o in i)if(i.hasOwnProperty(o)){var r=n.find('input[name="'+o+'"]');r[0]&&r.hasClass("error")&&r.removeClass("error")}}});var o=this._objectChange;e.changed&&e.changed.length&&e.changed.forEach(function(e){var n=o(e);t._$scopePropsChange(n)})},_reset:function(){this.__disposeTemplate();var e=this._scopedContextModel(),t=this;this.$render(e,function(){t.__setFormScope(),t.__resetObservable(),t.__rebindTemplate()})},_onDestroy:function(){e(document).off(this.options.submitEvent),e(document).off(this.options.resetEvent)},notification:function(e,t,n){this._notification(e,t,n)},reset:function(){this._reset()},renderForm:function(e){this._renderForm(e)}},n={submitEvent:"elliptical.onDocumentSubmit",successEvent:"elliptical.onSubmitSuccess",failureEvent:"elliptical.onSubmitFailure",resetEvent:"elliptical.onFormReset",resetSubscription:"elliptical.form.reset",schemas:null,schemaValidation:null,resetModel:{submitLabel:{cssDisplay:"hidden",message:"&nbsp;"}},processingMsg:"Processing...",redirectLabel:null,redirect:null};return e.extend(e.elliptical.form.prototype,t),e.extend(e.elliptical.form.prototype.options,n),e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../form/form")):"function"==typeof define&&define.amd?define(["../form/form"],t):e.returnExports=t($)}(this,function(e){return e(function(){e.form("elliptical.loginForm","ui-login-form",{_initForm:function(){this._getRedirectUrl()},_getRedirectUrl:function(){var e=this.service("Location"),t=e.href,n=e.url.queryString(t,"returnUrl");this._data.redirectUrl=n&&void 0!==n?n:this.options.redirect},_onSubmit:function(e){var t=e.body,n=this._data.form,i=n.attr("method"),o=n.attr("action"),r=this.service("Validation"),s=this.options.schema;r&&r.post?this._validate(r,t,s,o,i):this._login(t)},_validate:function(e,t,n,i,o){var r=this;e.post(t,n,function(e,n){e?(n.action=i,n.method=o,r._renderForm(n)):r._login(t)})},_login:function(e){var t=this,n=this.service("Location"),i=this.service("Membership");this._showLoader(),i.login(e,function(e,i){setTimeout(function(){if(t._hideLoader(),e)t._renderError({},"Invalid Login");else{var o=i.redirectUrl&&void 0!==i.redirectUrl?i.redirectUrl:t._data.redirectUrl;n.redirect(o)}},1e3)})}})}),e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../form/form")):"function"==typeof define&&define.amd?define(["../form/form"],t):e.returnExports=t($)}(this,function(e){return e(function(){e.form("elliptical.signupForm","ui-signup-form",{_initForm:function(){this._getRedirectUrl()},_getRedirectUrl:function(){this._data.redirectUrl=this.options.redirect},_onSubmit:function(e){var t=e.body,n=this._data.form,i=n.attr("method"),o=n.attr("action"),r=this.service("Validation"),s=this.options.schema;r&&r.post?this._validate(r,t,s,o,i):this._login(t)},_validate:function(e,t,n,i,o){var r=this;e.post(t,n,function(e,n){e?(n.action=i,n.method=o,n=r._mergeFormData(n),r._renderForm(n)):r._login(t)})},_login:function(e){var t=this,n=this.service("Location"),i=this.service("Membership");this._showLoader(),i.signUp(e,function(e,i){setTimeout(function(){if(t._hideLoader(),e)t._renderError({},"Invalid Sign-Up");else{var o=i.redirectUrl&&void 0!==i.redirectUrl?i.redirectUrl:t._data.redirectUrl;n.redirect(o)}},1e3)})}})}),e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../controller/controller")):"function"==typeof define&&define.amd?define(["../controller/controller"],t):e.returnExports=t($)}(this,function(e){return e.controller("elliptical.autoCompleteBind",{options:{dataBind:!1},_initController:e.noop,_onAutoCompleteBinding:e.noop,_onAutoCompleteSelected:e.noop,_events:function(){var t=this;this._event(e(document),"autocomplete.binding",function(e,n){t._onAutoCompleteBinding(e,n)}),this._event(e(document),"autocomplete.selected",function(e,n){t._onAutoCompleteSelected(e,n)})}}),e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../controller/controller")):"function"==typeof define&&define.amd?define(["../controller/controller"],t):e.returnExports=t($)}(this,function(e){e(function(){return e.controller("elliptical.badge","ui-model-badge",{_initController:function(){var e=this.element.text();e="undefined"!=typeof e||""!==e?parseInt(e):0,this._data.count=e},_subscriptions:function(){var e=this.options.channel+".count";this._subscribe(e,this._onCountInit.bind(this))},_onRemoveSubscribe:function(){var e=this._data.count;e--,this._data.count=e,this.element.text(e)},_onAddSubscribe:function(){var e=this._data.count;e++,this._data.count=e,this.element.text(e)},_onCountInit:function(e){this._data.count=parseInt(e)},_onChangeSubscribe:e.noop}),e})}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-pubsub"),require("../controller/controller")):"function"==typeof define&&define.amd?define(["elliptical-pubsub","../controller/controller"],t):e.returnExports=t()}(this,function(){return $.element("elliptical.modelPaginatedCount","ui-pagination-badge",$.elliptical.pubsub,{_initController:function(){},_subscriptions:function(){var e=this.options.channel;this._subscribe(e+".count",this._setLabel.bind(this))},_setLabel:function(e){this._data.count=e,this.element.text(e)},_setCount:function(){var e=this.data.count;e--,this._setLabel(e)}}),$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../controller/controller")):"function"==typeof define&&define.amd?define(["../controller/controller"],t):e.returnExports=t($)}(this,function(e){e(function(){return e.controller("elliptical.pluralize","ui-pluralize",{_initController:function(){},_onRemoveSubscribe:function(){var e=this.options.count,t=this.options.singular,n=this.options.plural;e--,this.options.count=e,this.element.text(1===e?t:n)},_onAddSubscribe:function(){var e=this.options.count,t=this.options.singular,n=this.options.plural;e++,this.options.count=e,this.element.text(1===e?t:n)},_onChangeSubscribe:function(e){var t=this.options.singular,n=this.options.plural;this.options.count=e,this.element.text(1===e?t:n)}}),e})}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../controller/controller")):"function"==typeof define&&define.amd?define(["../controller/controller"],t):e.returnExports=t($)}(this,function(e){e(function(){return e.controller("elliptical.selectList",{options:{dataBind:!1},_onChange:e.noop,_events:function(){var t=this;this._event(this.element,"change",function(n){var i=e(n.target),o=i.val();t._onChange(o)})}}),e})}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../controller/controller")):"function"==typeof define&&define.amd?define(["../controller/controller"],t):e.returnExports=t($)}(this,function(e){return e.controller("elliptical.autosearch",e.elliptical.autoCompleteBind,{options:{dataBind:!1},_initController:function(){if(!this._support.mq.touch){this._data.element=null;var e=this.element.find("input");if(this._data.input=e,this._initAutoSearch(e),this._data.message=this.options.message||"Your search filter returned no results...",this._data.cssClass=this.options.cssClass||"warning",this._data.paginationContext=this.options.paginationContext||"pagination",this._data.paginationTemplate=this.options.paginationTemplate||"ui-pagination",this._instantiated(e[0],"autocomplete"))try{e.autocomplete("destroy")}catch(t){}else this._onAutocompleteLoaded()}},_onAutocompleteLoaded:function(){var t=this._data.input;this._event(e(document),"autocomplete.loaded",function(){try{t.autocomplete("destroy")}catch(e){}})},_onSyncSubscribe:function(e){this._data.element||(e.$filterQueue=0,this._data.element=e)},_onInput:function(){var e=this._data.input,t=this;e.keyup(function(e){t._onChange(e)})},_onChange:function(e){var t=e.which,n=this;console.log("search keyboard key: "+t),(t>=48&&90>=t||8===t)&&setTimeout(function(){n._filter()},100)},_applyData:function(e){var t=this._data.element;t.options.eventBlock=!0,t.$filterQueue=t.$filterQueue+1;var n=this.$scope;t.$empty(),e&&e.length?(t._killNotificationLabel(),this._onScopeBind(n,t,e)):t._notificationLabel({cssClass:this._data.cssClass,message:this._data.message})},_updatePagination:function(e){var t=this._data.pagination,n={context:this._data.paginationContext,model:e,template:this._data.paginationTemplate};this._render(t,n,function(){})},_animate:function(e){this._transitions(e,{preset:"fadeIn",duration:750},function(){})},_updateCount:function(e){var t;this.options.channel&&(t=this.options.channel+".change",this._publish(t,e))},_filter:e.noop,_initAutoSearch:e.noop,_onScopeBind:e.noop}),e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("ellipsis-element")):"function"==typeof define&&define.amd?define(["ellipsis-element"],t):e.returnExports=t($)}(this,function(e){e.element.custom&&e.element.registerElement("overlay-element"),e(function(){return e.element("elliptical.veneer","ui-veneer",{options:{animationIn:"bounceInDown",modalCssClass:null,modalZIndex:1e4,modalOpacity:.3,cssClass:null,scope:null},_initElement:function(){this.options.template&&(this._data.model={},this._getModel(),this._attachElement(),this._show())},_getModel:function(){var e=this.options.scope;e&&$$&&$$.elliptical&&$$.elliptical.context&&(this._data.model=$$.elliptical.context[e]?$$.elliptical.context[e]:{})},_attachElement:function(){var t=e("<overlay-element></overlay-element>");this._data.container=t,this.options.cssClass&&t.addClass(this.options.cssClass);var n=e("body");n.append(t)},_show:function(){var e=this;this._showModal(function(){e._renderElement()})},_renderElement:function(){var e=this,t=this._data.container;this._render(t,{template:this.options.template,model:this._data.model},function(){e._data.element=e._data.container.find(">*"),e._animate()})},_showModal:function(e){var t={};t.opacity=this.options.modalOpacity,t.zIndex=this.options.modalZIndex,this._setModal(this.element,t,function(){e()})},_animate:function(){var e=this._data.element;this._transitions(e,{preset:this.options.animationIn},function(){})},_onDestroy:function(){this._data.container&&this._data.container.remove(),this._removeModal()}}),e})}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../controller/controller"),require("../scroll/scroll")):"function"==typeof define&&define.amd?define(["../controller/controller","../scroll/scroll"],t):e.returnExports=t()}(this,function(){return $.element.custom&&$.element.registerElement("reveal-container"),$.controller("elliptical.stickyReveal","ui-sticky-reveal",$.elliptical.scroll,{options:{animationIn:"slideIn",animationOut:"slideOut",durationIn:500,durationOut:500,yOffset:60},_initController:function(){if(this._support.mq.touch)this._destroy();else if(this._data.$element=null,this._data.visible=!1,this._getContainer(),this.options.template&&"sync"!==this.options.event){var e=this._getModel();this._renderElement(e)}},_getContainer:function(){this._data.container=this.element.find(this.options.$customElements?"reveal-container":".reveal-container")},_onScroll:function(e){if(!this._data.disabled){var t=this.options.yOffset,n=this._data.visible;e>t&&!n?(this._data.visible=!0,this._show()):t>e&&n&&(this._data.visible=!1,this._hide())}},_getModel:function(){var e,t=this.options.scope;return t&&$$&&$$.elliptical&&$$.elliptical.context&&(e=$$.elliptical.context[t]?$$.elliptical.context[t]:{}),e},_onRenderElement:function(e){this._renderElement(e)},_renderElement:function(e){var t=this._data.container;this._render(t,{template:this.options.template,model:e},function(){})},_show:function(){var e=this.element;this._transitions(e,{preset:this.options.animationIn,duration:this.options.durationIn},function(){})},_hide:function(){var e=this.element;this._transitions(e,{preset:this.options.animationOut,duration:this.options.durationOut},function(){})},_onSyncSubscribe:function(e){if(!this._support.mq.touch){this._data.$element=e;var t=this.$scope;this._onRenderElement(t)}},_onDestroy:function(){this.options.template&&this._data.container&&this._data.container.empty(),this._support.mq.touch&&this._super()}}),$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("../controller/controller")):"function"==typeof define&&define.amd?define(["../controller/controller"],t):e.returnExports=t($)}(this,function(e){return e.controller("elliptical.download",{_download:function(e,t){var n=this,i=t.delay;if(this._support.device.touch)window.open(e);else{if("undefined"!=typeof t){var o=void 0===t.cssClass?"info":t.cssClass,r=void 0===t.msg?"Downloading File":t.msg,s=t.terminate;void 0===s&&(s=!0),this._notify(o,r,s),void 0===i&&(i=100)}void 0===i&&(i=100),setTimeout(function(){n.__download(e)},i)}},__download:function(t){if(e.browser.webkit){var n=document.createElement("a");if(n.href=t,void 0!==n.download&&(n.download=t),document.createEvent){var i=document.createEvent("MouseEvents");return i.initEvent("click",!0,!0),n.dispatchEvent(i),!0}-1===t.indexOf("?")&&(t+="?download"),window.open(t,"_self")}else-1===t.indexOf("?")&&(t+="?download"),window.open(t);return!0}}),e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.delegate=e.elliptical.delegate||{},e.elliptical.delegate.request=t(),e.returnExports=e.elliptical.delegate.request)}(this,function(){return function(e){var t=e?"route":"data-route";$(document).on("touchclick","a",function(n){var i=$(this).attr("href"),o=$(this).attr(t);if("undefined"!=typeof i&&"#"!==i||"undefined"!=typeof o&&"false"===o){n.stopPropagation(),n.preventDefault();var r={method:"get",href:i};$.each(this.attributes,function(t,n){e?r[n.name.toCamelCase()]=n.value:0===n.name.indexOf("data-")&&(n.name=n.name.replace("data-",""),r[n.name.toCamelCase()]=n.value)
}),r.route=i,$(document).trigger("elliptical.onDocumentRequest",r)}})}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-document")):"function"==typeof define&&define.amd?define(["elliptical-document"],t):(e.elliptical.delegate=e.elliptical.delegate||{},e.elliptical.delegate.submit=t(),e.returnExports=e.elliptical.delegate.submit)}(this,function(){return function(e,t){var n,i;e?(n="ui-form",i="route"):(n='[data-role="form"]',i="data-route"),$(document).on("submit","form",function(o){var r=$(this).parent(n),s=r[0]?r:$(this),a=$(this).document();o.stopPropagation(),o.preventDefault();var l=s.attr(i),c={route:this.action,body:a,method:$(this).attr("method")};$.each(s[0].attributes,function(t,n){if(e)c[n.name.toCamelCase()]=n.value;else if(0===n.name.indexOf("data-option-")){var i=n.name.replace("data-","");c[i.toCamelCase()]=n.value}}),"undefined"!=typeof l&&"true"===l.toLowerCase()?$(document).trigger("elliptical.onDocumentRequest",c):"undefined"!=typeof l&&"false"===l.toLowerCase()?$(document).trigger("elliptical.onDocumentSubmit",c):t?$(document).trigger("elliptical.onDocumentRequest",c):$(document).trigger("elliptical.onDocumentSubmit",c)})}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-mvc"),require("elliptical-router"),require("elliptical-services"),require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-mvc","elliptical-router","elliptical-services","elliptical-utils"],t):(e.elliptical.request=t(e.elliptical,e.elliptical.Router,e.elliptical.services,e.elliptical.utils),e.returnExports=e.elliptical.request)}(this,function(e,t,n,i){var o=e.Class,r=t.Location,s=i._,a=r.url,l=o.extend({},{init:function(e){this.params={},this.query={},this.body={},this.route={},this.files={};var t=n.Session,i=new t(e),o=i.get()||{},l=n.Cookie;Object.defineProperties(this,{path:{get:function(){return r.path()},configurable:!1},url:{get:function(){return r.path()},configurable:!1},protocol:{get:function(){var e=window.location.protocol;return e=e.replace(":","")},configurable:!1},get:{get:function(){return console.log('warning: "get" not implemented on the browser.'),!1},configurable:!1},accepted:{get:function(){return console.log('warning: "accepted" not implemented on the browser.'),!1},configurable:!1},accepts:{get:function(){return console.log('warning: "accepts" not implemented on the browser.'),!1},configurable:!1},is:{get:function(){return console.log('warning: "is" not implemented on the browser.'),!1},configurable:!1},xhr:{get:function(){return!0},configurable:!1},acceptsLanguage:{get:function(){return console.log('warning: "acceptsLanguage" not implemented on the browser.'),!1},configurable:!1},acceptsCharset:{get:function(){return console.log('warning: "acceptsLanguage" not implemented on the browser.'),!1},configurable:!1},acceptsCharsets:{get:function(){return!1},configurable:!1},acceptedLanguages:{get:function(){return!1},configurable:!1},originalUrl:{get:function(){return!1},configurable:!1},subdomains:{get:function(){return!1},configurable:!1},secure:{get:function(){return!1},configurable:!1},stale:{get:function(){return console.log('warning: "stale" not implemented on the browser.'),!1},configurable:!1},fresh:{get:function(){return console.log('warning: "fresh" not implemented on the browser.'),!1},configurable:!1},host:{get:function(){return window.location.hostname},configurable:!1},ip:{get:function(){},configurable:!1},ips:{get:function(){return console.log('warning: "ips" not implemented on the browser.'),!1},configurable:!1},cookies:{get:function(e){return"undefined"==typeof e?l.get():l.get(e)},configurable:!1},signedCookies:{get:function(){return{}},configurable:!1},session:{get:function(){return s.extend(o,i.get()),i.put({session:o}),o}}}),this._parsedUrl={},this._parsedUrl.pathname=r.path(),this._parsedUrl.virtualize=function(e){{var t=window.elliptical.$hashTag;window.elliptical.$virtualRoot}return t&&(e=a.hashTagFormat(e)),e=a.pathComponent(e)},this.header=function(e){switch(e){case"Referer":return document.referrer}}}});return l}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("elliptical-mvc"),require("elliptical-services")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-mvc","elliptical-services"],t):(e.elliptical.response=t(e.elliptical.utils,e.elliptical,e.elliptical.services),e.returnExports=e.elliptical.response)}(this,function(e,t,n){var i=t.Class,o=n.Cookie,r=i.extend({req:{}},{init:function(e){this.req=e,this.charset={},this.context={},this.transition={},this.locals={},this.status=function(){},this.set=function(){},this.get=function(){},this.cookie=function(e,t,n){var i={};return i.key=e,i.value=t,i.options=n,o.put(i)},this.clearCookie=function(e){return o.delete(e)},this.redirect=function(e,t){"undefined"==typeof t&&(t=e),t=decodeURIComponent(t),window.location=t},this.location=function(){},this.send=function(){},this.json=function(){},this.jsonp=function(){},this.type=function(){},this.format=function(){},this.attachment=function(){},this.sendfile=function(){},this.download=function(){},this.links=function(){}},render:function(e,t,n,i){"function"==typeof t?(i=t,t={}):"function"==typeof n&&(i=n,n=void 0),this.app.render(e,t,n,this.req,i)},setContext:function(t){var n=e._,i=this.req;i.session=i.session||{},n.merge(i.session,t)},contextHelpers:function(){var e=this.req,t=e.app;return new t.contextHelpers},dispatch:function(e,t,n){e?t(e):n.apply(this,arguments)}});return r}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("elliptical-mvc"),require("elliptical-event"),require("elliptical-providers"),require("./request"),require("./response"),require("elliptical-router"),require("./delegates/index"),require("elliptical-delegate"),require("elliptical-platform")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-mvc","elliptical-event","elliptical-providers","./request","./response","elliptical-router","./delegates/index","elliptical-delegate","elliptical-platform"],t):(e.elliptical.application=t(e.elliptical.utils,e.elliptical,e.elliptical.Event,e.elliptical.providers,e.elliptical.request,e.elliptical.response,e.elliptical.Router,e.elliptical.delegate),e.returnExports=e.elliptical.browser)}(this,function(e,t,n,i,o,r,s,a,l){var c=e._,u=i.$transitions,d=s.Location.url,p=!1;return{init:function(){function n(t){e.patchFunctionName(),t.router=function(){t.next()},t.router.__name="appRouter";var n="/",i=t.router;t.stack.push({route:n,handle:i})}function o(){$("html").hasClass("customelements")&&(p=!0)}window.elliptical.$hashTag=!1,this.history=!1,this.sessionSync=!1,this.__observables=[],this.async=t.async,this.factory=t.factory,this.contextSettings(),this.setEnvironment(),this.$setDefaultProviders(),this.stack=[],this.locations=[],this.$sessionProvider=i.session.$storage,this.Router=s,this.utils=e,this._defineProps(),o();var r=new l([{event:"touchclick",delegate:"click"}]);r.on(),n(this)},_defineProps:function(){this._debug=!1,this._virtualRoot="/",this._hashTag=!1,this.settings.siteTitle="";var e=this;Object.defineProperties(this,{debug:{get:function(){return e._debug},set:function(t){s.debug=t,e._debug=t}},hashTag:{get:function(){return e._hashTag},set:function(t){s.hashTag=t,e._hashTag=t,window.elliptical.$hashTag=t}},virtualRoot:{get:function(){return e._virtualRoot},set:function(t){s.virtualRoot=t,e._virtualRoot=t,e.context.rootPath=t,window.elliptical.$virtualRoot=t}},siteRootTitle:{get:function(){return e.settings.siteTitle},set:function(t){e.settings.siteTitle=t}}})},Location:function(e){return e.history&&this._setLocationHistoryService(),s.Location},$setDefaultProviders:function(){var e=t.Model;e.$paginationProvider=i.$pagination,t.View.$provider=i.$template},setEnvironment:function(t){function n(e){var t=$("html"),n=t.attr("data-environment");return"undefined"!=typeof n?(e.context.ENV=n.toLowerCase(),!0):!1}function i(t){var n=document.location.hostname;t.context.ENV=e.isLocalHost(n)?"development":"production"}"undefined"!=typeof t?this.context.ENV=t.toLowerCase():n(this)||i(this)},getPort:function(){return void 0},getEnvironment:function(){return this.context.ENV},configure:function(e,t){"function"==typeof e?(t=e,t.call(this)):"string"==typeof e&&("production"===e.toLowerCase()&&"production"===this.context.ENV?t.call(this):"development"===e.toLowerCase()&&"development"===this.context.ENV&&t.call(this))},config:function(){},get:function(e,t){s.get(e,t)},post:function(e,t){s.post(e,t)},put:function(e,t){s.put(e,t)},"delete":function(e,t){s.delete(e,t)},contextHelpers:function(){this.form=function(){return{submitLabel:{cssDisplay:"hidden",message:"&nbsp;"}}}},contextSettings:function(){this.context={},this.context.virtualRoot="/",this.isServer=!1,this.isBrowser=!0,this.settings=this.settings||{},this.settings.config={cookie:{},session:{},providers:{}}},templatesScriptLoader:function(e){var t=this.virtualRoot;"undefined"!=typeof e&&(t=e),"/"===t&&(t=""),window.onload=function(){var e=document.createElement("script");e.src=t+"/scripts/templates.js",document.body.appendChild(e)}},location:function(e,t){"/"!=e.substring(0,1)&&(e="/"+e),"object"!=typeof t&&(t=[]);var n={path:e,exclude:t};this.locations.push(n)},parseRoute:function(e){return this.hashTag?d.hashTagFormat(e):e},onDispatchRequest:function(){var e=this;n.on("elliptical.onRouteDispatch",function(t){if(e.__cancelledRoute&&e.__route===t.route)e.__cancelledRoute=!1,e.__route=null;else{var n=t.route,i=t.handlers;e.dispatch(n,i)}})},use:function(e,t){var n=this.stack;if("string"!=typeof e&&(t=e,e="/"),"function"!=typeof t)return void(this.virtualRoot=e);if(t.__name&&t.__name===this.router.__name)for(var i=0;i<n.length;i++){var o=n[i].handle;if(o.__name&&o.__name===this.router.__name||0===o.length){n.splice(i,1);break}}try{if(0===t.length&&void 0===t.__name)return}catch(r){}n.push({route:e,handle:t})},dispatch:function(e,t){function n(e){return"/"!=e.substring(0,1)&&(e="/"+e),e}function i(e,t,n){function i(r){var s=e[o++];"undefined"!=typeof s&&("undefined"!=typeof r?4===s.length?s(r,t,n,i):i(r):s.length<4?s(t,n,i):i())}var o=0;_.next=i,i()}function a(e){var t=e.__observables;t.forEach(function(e){e.close()})}e=n(e);for(var l=this.stack,c=[],u=0;u<l.length;u++){var d=l[u].handle;if(d.__name&&d.__name===this.router.__name)for(var p=0;p<t.length;p++)c.push(t[p]);else{var f=l[u].route,h=e.toLowerCase().indexOf(f);h>-1&&(e.length===f.length||"/"===e.substring(h+1,0))&&c.push(l[u].handle)}}a(this);var m=new o(this.$sessionProvider);m.route=e;var v=new r(m),_=this;m.app=v.app=_,m.res=v,v.req=m,this.history&&(v.redirect=function(e){s.location(e,"get",null)}),i(c,m,v)},closeObservables:function(){var e=this.__observables;e.forEach(function(e){e.close()})},server:function(){},browser:function(e){e.call(this)},defaultMiddleware:function(){},bootstrap:function(){},listen:function(e,t){function n(e,t){a.submit(p,e),a.request(p),o(),i(),t.onDispatchRequest(),r._setLocationHistoryService(),"production"===c&&(s.debug=!1),s.start()}function i(){var e=function(e){u.open?(u.close(),setTimeout(function(){s.location(e,"get",null)},600)):s.location(e,"get",null)};$.widget.$providers({location:e})}function o(){$(window).on("drawer.open",function(e,t){u.open=!0,u.close=t.closeEvent}),$(window).on("drawer.close",function(){u.open=!1}),$(window).on("route.cancellation",function(e,t){l.__cancelledRoute=!0,l.__route=t})}var r=this,l=this,c=this.getEnvironment();"undefined"==typeof t?t=e:e.history===!1?a.submit(p,!1):e.history&&"history"===e.forms?n(!0,this):e.history&&n(!1,this),$(function(){setTimeout(function(){t.call(this)},3e3)});var u={};u.open=!1},_setLocationHistoryService:function(){this.history=!0,s.Location.redirect=function(e){s.location(e,"get",null)},s.Location.reload=function(){var e=Location.path();s.location(e,"get")}},onBeforeRender:function(e){"function"==typeof e&&(this.viewCallback=e)},render:function(e,n,i,o,r){function s(t){var i=f.clientContextRootNamespace;f.pushContextToClient?a(i,n):a(i,""),h.render(e,t,function(e,t){u.render(v,t,p,function(){r&&r(e,t)})})}function a(e,t){window[e]&&window[e].elliptical&&window[e].elliptical.context?window[e].elliptical.context=t:window[e]?(window[e].elliptical={},window[e].elliptical.context=t):(window[e]={},window[e].elliptical={},window[e].elliptical.context=t)}function l(e,t){return e.PageTitle?t.settings.siteTitle&&(e.PageTitle=t.settings.siteTitle+"-"+e.PageTitle):t.settings.siteTitle&&(e.PageTitle=t.settings.siteTitle),e}var n=n||{},d=this,i=i||"none",p=i,f=t.View,h=new f;try{c.merge(n,d.context),o.session&&c.defaults(n,o.session)}catch(m){}n=l(n,d),n.rootPath&&"/"===n.rootPath&&(n.rootPath="");var v=f.$getSelector();"object"==typeof i&&("undefined"!=typeof i.selector&&(v=i.selector),"undefined"!=typeof i.animation&&(p=i.animation)),"undefined"!=typeof d.viewCallback?d.viewCallback(o,this,n,function(e){s(e)}):s(n)}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("elliptical-mvc"),require("elliptical-event"),require("elliptical-middleware"),require("elliptical-providers"),require("elliptical-services"),require("elliptical-http"),require("elliptical-crypto"),require("./application"),require("./response"),require("./request")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-mvc","elliptical-event","elliptical-middleware","elliptical-providers","elliptical-services","elliptical-http","elliptical-crypto","./application","./response","./request"],t):(e.elliptical.browser=t(e.elliptical.utils,e.elliptical,e.elliptical.Event,e.elliptical.middleware,e.elliptical.providers,e.elliptical.services,e.elliptical.http,e.elliptical.crypto,e.elliptical.application,e.elliptical.response,e.elliptical.request),e.returnExports=e.elliptical.browser)}(this,function(e,t,n,i,o,r,s,a,l,c,u){function d(){var e=function(){};return p.defaults(e,l),e.init(),e}var p=e._;t.Event=n,t.application=l,t.response=c,t.request=u,t.http=s,t.providers=o,t.services=r,t.crypto=a,t.Try=function(e,t){try{t.apply(this,arguments)}catch(n){e(n)}},window.elliptical=t,window.elliptical.$virtualRoot="/";var f=d;return p.defaults(f,t),p.defaults(f,i),p.defaults(f,r),f});